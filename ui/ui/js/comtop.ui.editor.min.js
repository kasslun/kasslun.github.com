(function(){var a;var b=window.location.pathname;a="/web/top/component/ui/cui/";window.UEDITOR_CONFIG={UEDITOR_HOME_URL:a,lang:"zh-cn",langPath:a+"lang/",imageUrl:a+"jsp/imageUp.jsp",imagePath:a+"jsp/",scrawlUrl:a+"jsp/scrawlUp.jsp",scrawlPath:a+"jsp/",fileUrl:a+"jsp/fileUp.jsp",filePath:a+"jsp/",catcherUrl:a+"jsp/getRemoteImage.jsp",catcherPath:a+"jsp/",imageManagerUrl:a+"jsp/imageManager.jsp",imageManagerPath:a+"jsp/",snapscreenHost:"127.0.0.1",snapscreenServerUrl:a+"jsp/imageUp.jsp",snapscreenPath:a+"jsp/",wordImageUrl:a+"jsp/imageUp.jsp",wordImagePath:a+"jsp/",getMovieUrl:a+"jsp/getMovie.jsp",toolbars:[["Undo","Redo","|","Bold","Italic","Underline","StrikeThrough","Superscript","Subscript","FontFamily","FontSize","ForeColor","BackColor","FormatMatch","RemoveFormat","|","InsertUnorderedList","InsertOrderedList","|","JustifyLeft","JustifyCenter","JustifyRight","JustifyJustify","Paragraph","Indent","RowSpacingBottom","RowSpacingTop","LineHeight","|","Date","Time","SelectAll","ClearDoc","FullScreen"]],labelMap:{undo:"",redo:"","|":"",bold:"",italic:"",underline:"",strikethrough:"",superscript:"",subscript:"",fontfamily:"",fontsize:"",forecolor:"",backcolor:"",formatmatch:"",removeformat:"","|":"",insertunorderedlist:"",insertorderedlist:"","|":"",justifyleft:"",justifycenter:"",justifyright:"",justifyjustify:"",paragraph:"",indent:"",rowspacingbottom:"",rowspacingtop:"",lineheight:"","|":"",date:"",time:"",selectall:"",cleardoc:"",fullscreen:""},webAppKey:"",isShow:true,initialContent:"",autoClearinitialContent:false,iframeCssUrl:false,textarea:"editorValue",focus:true,minFrameHeight:"320",autoClearEmptyNode:true,fullscreen:false,readonly:false,zIndex:900,imagePopup:true,pasteplain:false,insertorderedlist:{decimal:"1,2,3...","lower-alpha":"a,b,c...","lower-roman":"i,ii,iii...","upper-alpha":"A,B,C","upper-roman":"I,II,III..."},insertunorderedlist:{circle:"",disc:"",square:""},fontfamily:[{label:"",name:"songti",val:"宋体,SimSun"},{label:"",name:"kaiti",val:"楷体,楷体_GB2312, SimKai"},{label:"",name:"heiti",val:"黑体, SimHei"},{label:"",name:"lishu",val:"隶书, SimLi"},{label:"",name:"andaleMono",val:"andale mono"},{label:"",name:"arial",val:"arial, helvetica,sans-serif"},{label:"",name:"arialBlack",val:"arial black,avant garde"},{label:"",name:"comicSansMs",val:"comic sans ms"},{label:"",name:"impact",val:"impact,chicago"},{label:"",name:"timesNewRoman",val:"times new roman"}],fontsize:[10,11,12,14,16,18,20,24,36],paragraph:{p:"",h1:"",h2:"",h3:"",h4:"",h5:"",h6:""},rowspacingtop:["5","10","15","20","25"],lineheight:["1","1.5","1.75","2","3","4","5"],customstyle:[{tag:"h1",name:"tc",label:"",style:"border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:center;margin:0 0 20px 0;"},{tag:"h1",name:"tl",label:"",style:"border-bottom:#ccc 2px solid;padding:0 4px 0 0;margin:0 0 10px 0;"},{tag:"span",name:"im",label:"",style:"font-style:italic;font-weight:bold;color:#000"},{tag:"span",name:"hi",label:"",style:"font-style:italic;font-weight:bold;color:rgb(51, 153, 204)"}],contextMenu:[],wordCount:true,tabSize:"4",tabNode:"&nbsp;",elementPathEnabled:false,maxUndoCount:"20",maxInputCount:"20",autoHeightEnabled:true,autoFloatEnabled:false}})();UEDITOR_CONFIG=window.UEDITOR_CONFIG||{};var baidu=window.baidu||{};window.baidu=baidu;window.UE=baidu.editor={};UE.plugins={};UE.commands={};UE.instants={};UE.I18N={};UE.version="1.2.3.0";var dom=UE.dom={};var browser=UE.browser=function(){var i=navigator.userAgent.toLowerCase(),f=window.opera,j={ie:!-[1,],opera:(!!f&&f.version),webkit:(i.indexOf(" applewebkit/")>-1),mac:(i.indexOf("macintosh")>-1),quirks:(document.compatMode=="BackCompat")};j.gecko=(navigator.product=="Gecko"&&!j.webkit&&!j.opera);var g=0;if(j.ie){g=parseFloat(i.match(/msie (\d+)/)[1]);j.ie9Compat=document.documentMode==9;j.ie8=!!document.documentMode;j.ie8Compat=document.documentMode==8;j.ie7Compat=((g==7&&!document.documentMode)||document.documentMode==7);j.ie6Compat=(g<7||j.quirks)}if(j.gecko){var h=i.match(/rv:([\d\.]+)/);if(h){h=h[1].split(".");g=h[0]*10000+(h[1]||0)*100+(h[2]||0)*1}}if(/chrome\/(\d+\.\d)/i.test(i)){j.chrome=+RegExp["\x241"]}if(/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(i)&&!/chrome/i.test(i)){j.safari=+(RegExp["\x241"]||RegExp["\x242"])}if(j.opera){g=parseFloat(f.version())}if(j.webkit){g=parseFloat(i.match(/ applewebkit\/(\d+)/)[1])}j.version=g;j.isCompatible=!j.mobile&&((j.ie&&g>=6)||(j.gecko&&g>=10801)||(j.opera&&g>=9.5)||(j.air&&g>=1)||(j.webkit&&g>=522)||false);return j}();var ie=browser.ie,webkit=browser.webkit,gecko=browser.gecko,opera=browser.opera;var utils=UE.utils={makeInstance:function(c){var d=new Function();d.prototype=c;c=new d;d.prototype=null;return c},extend:function(g,f,b){if(f){for(var h in f){if(!b||!g.hasOwnProperty(h)){g[h]=f[h]}}}return g},isArray:function(b){return Object.prototype.toString.apply(b)==="[object Array]"},isString:function(b){return typeof b=="string"||b.constructor==String},inherits:function(g,e){var f=g.prototype,h=utils.makeInstance(e.prototype);utils.extend(h,f,true);g.prototype=h;return(h.constructor=g)},bind:function(d,c){return function(){return d.apply(c,arguments)}},defer:function(e,f,h){var g;return function(){if(h){clearTimeout(g)}g=setTimeout(e,f)}},indexOf:function(h,i,g){for(var j=g||0,f=h.length;j<f;j++){if(h[j]===i){return j}}return -1},findNode:function(f,g,h){for(var i=0,j;j=f[i++];){if(h?h(j):this.indexOf(g,j.tagName.toLowerCase())!=-1){return j}}},removeItem:function(g,h){for(var e=0,f=g.length;e<f;e++){if(g[e]===h){g.splice(e,1);e--}}},trim:function(b){return b.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},listToMap:function(h){if(!h){return{}}h=utils.isArray(h)?h:h.split(",");for(var e=0,f,g={};f=h[e++];){g[f.toUpperCase()]=g[f]=1}return g},unhtml:function(c,d){return c?c.replace(d||/[&<">]/g,function(a){return{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;"}[a]}):""},html:function(b){return b?b.replace(/&((g|l|quo)t|amp);/g,function(a){return{"&lt;":"<","&amp;":"&","&quot;":'"',"&gt;":">"}[a]}):""},cssStyleToDomStyle:function(){var c=document.createElement("div").style,d={"float":c.cssFloat!=undefined?"cssFloat":c.styleFloat!=undefined?"styleFloat":"float"};return function(a){return d[a]||(d[a]=a.toLowerCase().replace(/-./g,function(b){return b.charAt(1).toUpperCase()}))}}(),loadFile:function(){var b={};return function(h,i,a){var k=b[i.src||i.href];if(k){if(utils.isArray(k.funs)){k.ready?a():b[i.src||i.href].funs.push(a)}return}b[i.src||i.href]=a?{funs:[a]}:1;if(!h.body){h.write('<script src="'+i.src+'"><\/script>');return}if(i.id&&h.getElementById(i.id)){return}var l=h.createElement(i.tag);delete i.tag;for(var j in i){l.setAttribute(j,i[j])}l.onload=l.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){k=b[i.src||i.href];if(k.funs){k.ready=1;for(var c;c=k.funs.pop();){c()}}l.onload=l.onreadystatechange=null}};h.getElementsByTagName("head")[0].appendChild(l)}}(),isEmptyObject:function(c){for(var d in c){return false}return true},isFunction:function(b){return"[object Function]"==Object.prototype.toString.call(b)},fixColor:function(f,i){if(/color/i.test(f)&&/rgba?/.test(i)){var h=i.split(",");if(h.length>3){return""}i="#";for(var j=0,g;g=h[j++];){g=parseInt(g.replace(/[^\d]/gi,""),10).toString(16);i+=g.length==1?"0"+g:g}i=i.toUpperCase()}return i},optCss:function(h){var i,j,g;h=h.replace(/(padding|margin|border)\-([^:]+):([^;]+);?/gi,function(a,c,d,b){if(b.split(" ").length==1){switch(c){case"padding":!i&&(i={});i[d]=b;return"";case"margin":!j&&(j={});j[d]=b;return"";case"border":return b=="initial"?"":a}}return a});function f(a,e){if(!a){return""}var d=a.top,o=a.bottom,l=a.left,c=a.right,q="";if(!d||!l||!o||!c){for(var b in a){q+=";"+e+"-"+b+":"+a[b]+";"}}else{q+=";"+e+":"+(d==o&&o==l&&l==c?d:d==o&&l==c?(d+" "+l):l==c?(d+" "+l+" "+o):(d+" "+c+" "+o+" "+l))+";"}return q}h+=f(i,"padding")+f(j,"margin");return h.replace(/^[ \n\r\t;]*|[ \n\r\t]*$/,"").replace(/;([ \n\r\t]+)|\1;/g,";").replace(/(&((l|g)t|quot|#39))?;{2,}/g,function(a,b){return b?b+";;":";"})},domReady:function(){var d=false,e=[];function f(){d=true;for(var a;a=e.pop();){a()}}return function(a){if(document.readyState==="complete"){return a&&setTimeout(a,1)}a&&e.push(a);d&&f();if(browser.ie){(function(){if(d){return}try{document.documentElement.doScroll("left")}catch(b){setTimeout(arguments.callee,0);return}f()})();window.attachEvent("onload",f)}else{document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,false);f()},false);window.addEventListener("load",f,false)}}}()};utils.domReady();var EventBase=UE.EventBase=function(){};EventBase.prototype={addListener:function(e,g){e=utils.trim(e).split(" ");for(var f=0,h;h=e[f++];){getListener(this,h,true).push(g)}},removeListener:function(e,g){e=utils.trim(e).split(" ");for(var f=0,h;h=e[f++];){utils.removeItem(getListener(this,h)||[],g)}},fireEvent:function(m){m=utils.trim(m).split(" ");for(var n=0,k;k=m[n++];){var l=getListener(this,k),j,h,i;if(l){i=l.length;while(i--){h=l[i].apply(this,arguments);if(h!==undefined){j=h}}}if(h=this["on"+k.toLowerCase()]){j=h.apply(this,arguments)}}return j}};function getListener(g,e,h){var f;e=e.toLowerCase();return((f=(g.__allListeners||h&&(g.__allListeners={})))&&(f[e]||h&&(f[e]=[])))}var dtd=dom.dtd=(function(){function A(b){for(var a in b){b[a.toUpperCase()]=b[a]}return b}function aa(b){var e=arguments;for(var c=1;c<e.length;c++){var a=e[c];for(var d in a){if(!b.hasOwnProperty(d)){b[d]=a[d]}}}return b}var B=A({isindex:1,fieldset:1}),C=A({input:1,button:1,select:1,textarea:1,label:1}),D=aa(A({a:1}),C),E=aa({iframe:1},D),F=A({hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1}),G=A({ins:1,del:1,script:1,style:1}),H=aa(A({b:1,acronym:1,bdo:1,"var":1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1}),G),I=aa(A({sub:1,img:1,embed:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1}),H),J=aa(A({p:1}),I),K=aa(A({iframe:1}),I,C),M=A({img:1,embed:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,"var":1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1}),N=aa(A({a:0}),K),P=A({tr:1}),Q=A({"#":1}),R=aa(A({param:1}),M),S=aa(A({form:1}),B,E,F,J),T=A({li:1}),U=A({style:1,script:1}),V=A({base:1,link:1,meta:1,title:1}),X=aa(V,U),Y=A({head:1,body:1}),Z=A({html:1});var O=A({address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1}),L=A({area:1,base:1,br:1,col:1,hr:1,img:1,input:1,link:1,meta:1,param:1,embed:1});return A({$nonBodyContent:aa(Z,Y,V),$block:O,$inline:N,$body:aa(A({script:1,style:1}),O),$cdata:A({script:1,style:1}),$empty:L,$nonChild:A({iframe:1,textarea:1}),$listItem:A({dd:1,dt:1,li:1}),$list:A({ul:1,ol:1,dl:1}),$isNotEmpty:A({table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,link:1,meta:1,param:1}),$removeEmpty:A({a:1,abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1}),$removeEmptyBlock:A({p:1,div:1}),$tableContent:A({caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,table:1}),$notTransContent:A({pre:1,script:1,style:1,textarea:1}),html:Y,head:X,style:Q,script:Q,body:S,base:{},link:{},meta:{},title:Q,col:{},tr:A({td:1,th:1}),img:{},embed:{},colgroup:A({thead:1,col:1,tbody:1,tr:1,tfoot:1}),noscript:S,td:S,br:{},th:S,center:S,kbd:N,button:aa(J,F),basefont:{},h5:N,h4:N,samp:N,h6:N,ol:T,h1:N,h3:N,option:Q,h2:N,form:aa(B,E,F,J),select:A({optgroup:1,option:1}),font:N,ins:N,menu:T,abbr:N,label:N,table:A({thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1}),code:N,tfoot:P,cite:N,li:S,input:{},iframe:S,strong:N,textarea:Q,noframes:S,big:N,small:N,span:A({"#":1,br:1}),hr:N,dt:N,sub:N,optgroup:A({option:1}),param:{},bdo:N,"var":N,div:S,object:R,sup:N,dd:S,strike:N,area:{},dir:T,map:aa(A({area:1,form:1,p:1}),B,G,F),applet:R,dl:A({dt:1,dd:1}),del:N,isindex:{},fieldset:aa(A({legend:1}),M),thead:P,ul:T,acronym:N,b:N,a:aa(A({a:1}),K),blockquote:aa(A({td:1,tr:1,tbody:1,li:1}),S),caption:N,i:N,u:N,tbody:P,s:N,address:aa(E,J),tt:N,legend:N,q:N,pre:aa(H,D),p:aa(A({a:1}),N),em:N,dfn:N})})();function getDomNode(l,k,i,j,n,m){var o=j&&l[k],q;!o&&(o=l[i]);while(!o&&(q=(q||l).parentNode)){if(q.tagName=="BODY"||m&&!m(q)){return null}o=q[i]}if(o&&n&&!n(o)){return getDomNode(o,k,i,false,n)}return o}var attrFix=ie&&browser.version<9?{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder"}:{tabindex:"tabIndex",readonly:"readOnly"},styleBlock=utils.listToMap(["-webkit-box","-moz-box","block","list-item","table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption"]);var domUtils=dom.domUtils={NODE_ELEMENT:1,NODE_DOCUMENT:9,NODE_TEXT:3,NODE_COMMENT:8,NODE_DOCUMENT_FRAGMENT:11,POSITION_IDENTICAL:0,POSITION_DISCONNECTED:1,POSITION_FOLLOWING:2,POSITION_PRECEDING:4,POSITION_IS_CONTAINED:8,POSITION_CONTAINS:16,fillChar:ie&&browser.version=="6"?"\ufeff":"\u200B",keys:{8:1,46:1,16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},getPosition:function(i,k){if(i===k){return 0}var g,j=[i],l=[k];g=i;while(g=g.parentNode){if(g===k){return 10}j.push(g)}g=k;while(g=g.parentNode){if(g===i){return 20}l.push(g)}j.reverse();l.reverse();if(j[0]!==l[0]){return 1}var h=-1;while(h++,j[h]===l[h]){}i=j[h];k=l[h];while(i=i.nextSibling){if(i===k){return 4}}return 2},getNodeIndex:function(e,h){var g=e,f=0;while(g=g.previousSibling){if(h&&g.nodeType==3){continue}f++}return f},inDoc:function(d,c){while(d=d.parentNode){if(d===c){return true}}return false},findParent:function(f,e,d){if(!domUtils.isBody(f)){f=d?f:f.parentNode;while(f){if(!e||e(f)||this.isBody(f)){return e&&!e(f)&&this.isBody(f)?null:f}f=f.parentNode}}return null},findParentByTagName:function(h,e,f,g){if(h&&h.nodeType&&!this.isBody(h)&&(h.nodeType==1||h.nodeType)){e=utils.listToMap(utils.isArray(e)?e:[e]);h=h.nodeType==3||!f?h.parentNode:h;while(h&&h.tagName&&h.nodeType!=9){if(g&&g(h)){break}if(e[h.tagName]){return h}h=h.parentNode}}return null},findParents:function(h,i,g,j){var f=i&&(g&&g(h)||!g)?[h]:[];while(h=domUtils.findParent(h,g)){f.push(h)}return j?f:f.reverse()},insertAfter:function(c,d){return c.parentNode.insertBefore(d,c.nextSibling)},remove:function(e,h){var f=e.parentNode,g;if(f){if(h&&e.hasChildNodes()){while(g=e.firstChild){f.insertBefore(g,e)}}f.removeChild(e)}return e},getNextDomNode:function(g,f,e,h){return getDomNode(g,"firstChild","nextSibling",f,e,h)},isBookmarkNode:function(b){return b.nodeType==1&&b.id&&/^_baidu_bookmark_/i.test(b.id)},getWindow:function(d){var c=d.ownerDocument||d;return c.defaultView||c.parentWindow},getCommonAncestor:function(i,k){if(i===k){return i}var j=[i],l=[k],g=i,h=-1;while(g=g.parentNode){if(g===k){return g}j.push(g)}g=k;while(g=g.parentNode){if(g===i){return g}l.push(g)}j.reverse();l.reverse();while(h++,j[h]===l[h]){}return h==0?null:j[h-1]},clearEmptySibling:function(g,e,h){function f(a,c){var b;while(a&&!domUtils.isBookmarkNode(a)&&(domUtils.isEmptyInlineElement(a)||!new RegExp("[^\t\n\r"+domUtils.fillChar+"]").test(a.nodeValue))){b=a[c];domUtils.remove(a);a=b}}!e&&f(g.nextSibling,"nextSibling");!h&&f(g.previousSibling,"previousSibling")},split:function(k,i){var j=k.ownerDocument;if(browser.ie&&i==k.nodeValue.length){var l=j.createTextNode("");return domUtils.insertAfter(k,l)}var h=k.splitText(i);if(browser.ie8){var g=j.createTextNode("");domUtils.insertAfter(h,g);domUtils.remove(g)}return h},isWhitespace:function(b){return !new RegExp("[^ \t\n\r"+domUtils.fillChar+"]").test(b.nodeValue)},getXY:function(d){var e=0,f=0;while(d.offsetParent){f+=d.offsetTop;e+=d.offsetLeft;d=d.offsetParent}return{x:e,y:f}},on:function(i,j,k){var l=utils.isArray(j)?j:[j],h=l.length;if(h){while(h--){j=l[h];if(i.addEventListener){i.addEventListener(j,k,false)}else{if(!k._d){k._d={}}var g=j+k.toString();if(!k._d[g]){k._d[g]=function(a){return k.call(a.srcElement,a||window.event)};i.attachEvent("on"+j,k._d[g])}}}}i=null},un:function(i,j,k){var l=utils.isArray(j)?j:[j],h=l.length;if(h){while(h--){j=l[h];if(i.removeEventListener){i.removeEventListener(j,k,false)}else{var g=j+k.toString();i.detachEvent("on"+j,k._d?k._d[g]:k);if(k._d&&k._d[g]){delete k._d[g]}}}}},isSameElement:function(o,q){if(o.tagName!=q.tagName){return 0}var k=o.attributes,l=q.attributes;if(!ie&&k.length!=l.length){return 0}var s,i,m=0,r=0;for(var n=0;s=k[n++];){if(s.nodeName=="style"){if(s.specified){m++}if(domUtils.isSameStyle(o,q)){continue}else{return 0}}if(ie){if(s.specified){m++;i=l.getNamedItem(s.nodeName)}else{continue}}else{i=q.attributes[s.nodeName]}if(!i.specified||s.nodeValue!=i.nodeValue){return 0}}if(ie){for(n=0;i=l[n++];){if(i.specified){r++}}if(m!=r){return 0}}return 1},isSameStyle:function(m,n){var h=m.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":"),i=n.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":");if(browser.opera){h=m.style;i=n.style;if(h.length!=i.length){return 0}for(var j in h){if(/^(\d+|csstext)$/i.test(j)){continue}if(h[j]!=i[j]){return 0}}return 1}if(!h||!i){return h==i?1:0}h=h.split(";");i=i.split(";");if(h.length!=i.length){return 0}for(var k=0,l;l=h[k++];){if(utils.indexOf(i,l)==-1){return 0}}return 1},isBlockElm:function(b){return b.nodeType==1&&(dtd.$block[b.tagName]||styleBlock[domUtils.getComputedStyle(b,"display")])&&!dtd.$nonChild[b.tagName]},isBody:function(b){return b&&b.nodeType==1&&b.tagName.toLowerCase()=="body"},breakParent:function(l,n){var h,j=l,k=l,i,m;do{j=j.parentNode;if(i){h=j.cloneNode(false);h.appendChild(i);i=h;h=j.cloneNode(false);h.appendChild(m);m=h}else{i=j.cloneNode(false);m=i.cloneNode(false)}while(h=k.previousSibling){i.insertBefore(h,i.firstChild)}while(h=k.nextSibling){m.appendChild(h)}k=j}while(n!==j);h=n.parentNode;h.insertBefore(i,n);h.insertBefore(m,n);h.insertBefore(l,m);domUtils.remove(n);return l},isEmptyInlineElement:function(b){if(b.nodeType!=1||!dtd.$removeEmpty[b.tagName]){return 0}b=b.firstChild;while(b){if(domUtils.isBookmarkNode(b)){return 0}if(b.nodeType==1&&!domUtils.isEmptyInlineElement(b)||b.nodeType==3&&!domUtils.isWhitespace(b)){return 0}b=b.nextSibling}return 1},trimWhiteTextNode:function(c){function d(b){var a;while((a=c[b])&&a.nodeType==3&&domUtils.isWhitespace(a)){c.removeChild(a)}}d("firstChild");d("lastChild")},mergChild:function(t,v,n){var q=domUtils.getElementsByTagName(t,t.tagName.toLowerCase());for(var r=0,i;i=q[r++];){if(!i.parentNode||domUtils.isBookmarkNode(i)){continue}if(i.tagName.toLowerCase()=="span"){if(t===i.parentNode){domUtils.trimWhiteTextNode(t);if(t.childNodes.length==1){t.style.cssText=i.style.cssText+";"+t.style.cssText;domUtils.remove(i,true);continue}}i.style.cssText=t.style.cssText+";"+i.style.cssText;if(n){var w=n.style;if(w){w=w.split(";");for(var s=0,j;j=w[s++];){i.style[utils.cssStyleToDomStyle(j.split(":")[0])]=j.split(":")[1]}}}if(domUtils.isSameStyle(i,t)){domUtils.remove(i,true)}continue}if(domUtils.isSameElement(t,i)){domUtils.remove(i,true)}}if(v=="span"){var u=domUtils.getElementsByTagName(t,"a");for(var r=0,o;o=u[r++];){o.style.cssText=";"+t.style.cssText;o.style.textDecoration="underline"}}},getElementsByTagName:function(j,g){var i=j.getElementsByTagName(g),h=[];for(var k=0,l;l=i[k++];){h.push(l)}return h},mergToParent:function(c){var d=c.parentNode;while(d&&dtd.$removeEmpty[d.tagName]){if(d.tagName==c.tagName||d.tagName=="A"){domUtils.trimWhiteTextNode(d);if(d.tagName=="SPAN"&&!domUtils.isSameStyle(d,c)||(d.tagName=="A"&&c.tagName=="SPAN")){if(d.childNodes.length>1||d!==c.parentNode){c.style.cssText=d.style.cssText+";"+c.style.cssText;d=d.parentNode;continue}else{d.style.cssText+=";"+c.style.cssText;if(d.tagName=="A"){d.style.textDecoration="underline"}}}if(d.tagName!="A"){d===c.parentNode&&domUtils.remove(c,true);break}}d=d.parentNode}},mergSibling:function(h,e,f){function g(b,a,c){var d;if((d=c[b])&&!domUtils.isBookmarkNode(d)&&d.nodeType==1&&domUtils.isSameElement(c,d)){while(d.firstChild){if(a=="firstChild"){c.insertBefore(d.lastChild,c.firstChild)}else{c.appendChild(d.firstChild)}}domUtils.remove(d)}}!e&&g("previousSibling","firstChild",h);!f&&g("nextSibling","lastChild",h)},unselectable:ie||browser.opera?function(f){f.onselectstart=function(){return false};f.onclick=f.onkeyup=f.onkeydown=function(){return false};f.unselectable="on";f.setAttribute("unselectable","on");for(var d=0,e;e=f.all[d++];){switch(e.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:e.unselectable="on";f.setAttribute("unselectable","on")}}}:function(b){b.style.MozUserSelect=b.style.webkitUserSelect=b.style.KhtmlUserSelect="none"},removeAttributes:function(g,h){for(var e=0,f;f=h[e++];){f=attrFix[f]||f;switch(f){case"className":g[f]="";break;case"style":g.style.cssText="";!browser.ie&&g.removeAttributeNode(g.getAttributeNode("style"))}g.removeAttribute(f)}},creElm:function(f,e,d){return this.setAttributes(f.createElement(e),d)},setAttributes:function(h,e){for(var f in e){var g=e[f];switch(f){case"class":h.className=g;break;case"style":h.style.cssText=h.style.cssText+";"+g;break;case"innerHTML":h[f]=g;break;case"value":h.value=g;break;default:h.setAttribute(attrFix[f]||f,g)}}return h},getComputedStyle:function(n,e){function l(b,a){if(b=="font-size"&&/pt$/.test(a)){a=Math.round(parseFloat(a)/0.75)+"px"}return a}if(n.nodeType==3){n=n.parentNode}if(browser.ie&&browser.version<9&&e=="font-size"&&!n.style.fontSize&&!dtd.$empty[n.tagName]&&!dtd.$nonChild[n.tagName]){var m=n.ownerDocument.createElement("span");m.style.cssText="padding:0;border:0;font-family:simsun;";m.innerHTML=".";n.appendChild(m);var i=m.offsetHeight;n.removeChild(m);m=null;return i+"px"}try{var k=domUtils.getStyle(n,e)||(window.getComputedStyle?domUtils.getWindow(n).getComputedStyle(n,"").getPropertyValue(e):(n.currentStyle||n.style)[utils.cssStyleToDomStyle(e)])}catch(j){return null}return l(e,utils.fixColor(e,k))},removeClasses:function(d,c){c=utils.isArray(c)?c:[c];d.className=(" "+d.className+" ").replace(new RegExp("(?:\\s+(?:"+c.join("|")+"))+\\s+","g")," ")},addClass:function(d,c){if(!this.hasClass(d,c)){d.className+=" "+c}},removeStyle:function(c,d){c.style[utils.cssStyleToDomStyle(d)]="";if(!c.style.cssText){domUtils.removeAttributes(c,["style"])}},hasClass:function(d,c){return(" "+d.className+" ").indexOf(" "+c+" ")>-1},preventDefault:function(b){b.preventDefault?b.preventDefault():(b.returnValue=false)},getStyle:function(d,e){var f=d.style[utils.cssStyleToDomStyle(e)];return utils.fixColor(e,f)},setStyle:function(d,e,f){d.style[utils.cssStyleToDomStyle(e)]=f},setStyles:function(d,f){for(var e in f){if(f.hasOwnProperty(e)){domUtils.setStyle(d,e,f[e])}}},removeDirtyAttr:function(g){for(var h=0,e,f=g.getElementsByTagName("*");e=f[h++];){e.removeAttribute("_moz_dirty")}g.removeAttribute("_moz_dirty")},getChildCount:function(h,f){var e=0,g=h.firstChild;f=f||function(){return 1};while(g){if(f(g)){e++}g=g.nextSibling}return e},isEmptyNode:function(b){return !b.firstChild||domUtils.getChildCount(b,function(a){return !domUtils.isBr(a)&&!domUtils.isBookmarkNode(a)&&!domUtils.isWhitespace(a)})==0},clearSelectedArr:function(d){var c;while(c=d.pop()){domUtils.removeAttributes(c,["class"])}},scrollToView:function(q,j,s){var r=function(){var b=j.document,a=b.compatMode=="CSS1Compat";return{width:(a?b.documentElement.clientWidth:b.body.clientWidth)||0,height:(a?b.documentElement.clientHeight:b.body.clientHeight)||0}},k=function(a){if("pageXOffset" in a){return{x:a.pageXOffset||0,y:a.pageYOffset||0}}else{var b=a.document;return{x:b.documentElement.scrollLeft||b.body.scrollLeft||0,y:b.documentElement.scrollTop||b.body.scrollTop||0}}};var m=r().height,l=m*-1+s;l+=(q.offsetHeight||0);var o=domUtils.getXY(q);l+=o.y;var n=k(j).y;if(l>n||l<n-m){j.scrollTo(0,l+(l<0?-20:20))}},isBr:function(b){return b.nodeType==1&&b.tagName=="BR"},isFillChar:function(b){return b.nodeType==3&&!b.nodeValue.replace(new RegExp(domUtils.fillChar),"").length},isStartInblock:function(h){var k=h.cloneRange(),i=0,j=k.startContainer,n;while(j&&domUtils.isFillChar(j)){n=j;j=j.previousSibling}if(n){k.setStartBefore(n);j=k.startContainer}if(j.nodeType==1&&domUtils.isEmptyNode(j)&&k.startOffset==1){k.setStart(j,0).collapse(true)}while(!k.startOffset){j=k.startContainer;if(domUtils.isBlockElm(j)||domUtils.isBody(j)){i=1;break}var l=k.startContainer.previousSibling,m;if(!l){k.setStartBefore(k.startContainer)}else{while(l&&domUtils.isFillChar(l)){m=l;l=l.previousSibling}if(m){k.setStartBefore(m)}else{k.setStartBefore(k.startContainer)}}}return i&&!domUtils.isBody(k.startContainer)?1:0},isEmptyBlock:function(d){var e=new RegExp("[ \t\r\n"+domUtils.fillChar+"]","g");if(d[browser.ie?"innerText":"textContent"].replace(e,"").length>0){return 0}for(var f in dtd.$isNotEmpty){if(d.getElementsByTagName(f).length){return 0}}return 1},setViewportOffset:function(i,j){var k=parseInt(i.style.left)|0;var l=parseInt(i.style.top)|0;var n=i.getBoundingClientRect();var m=j.left-n.left;var h=j.top-n.top;if(m){i.style.left=k+m+"px"}if(h){i.style.top=l+h+"px"}},fillNode:function(f,d){var e=browser.ie?f.createTextNode(domUtils.fillChar):f.createElement("br");d.innerHTML="";d.appendChild(e)},moveChild:function(f,e,d){while(f.firstChild){if(d&&e.firstChild){e.insertBefore(f.lastChild,e.firstChild)}else{e.appendChild(f.firstChild)}}},hasNoAttributes:function(b){return browser.ie?/^<\w+\s*?>/.test(b.outerHTML):b.attributes.length==0},isCustomeNode:function(b){return b.nodeType==1&&b.getAttribute("_ue_custom_node_")},isTagNode:function(c,d){return c.nodeType==1&&c.tagName.toLowerCase()==d}};var fillCharReg=new RegExp(domUtils.fillChar,"g");(function(){var l=0,k=domUtils.fillChar,q;function r(a){a.collapsed=a.startContainer&&a.endContainer&&a.startContainer===a.endContainer&&a.startOffset==a.endOffset}function s(c,b,a,d){if(b.nodeType==1&&(dtd.$empty[b.tagName]||dtd.$nonChild[b.tagName])){a=domUtils.getNodeIndex(b)+(c?0:1);b=b.parentNode}if(c){d.startContainer=b;d.startOffset=a;if(!d.endContainer){d.collapse(true)}}else{d.endContainer=b;d.endOffset=a;if(!d.startContainer){d.collapse(false)}}r(d);return d}function j(F,e){var J=F.startContainer,K=F.endContainer,c=F.startOffset,H=F.endOffset,i=F.document,N=i.createDocumentFragment(),h,f;if(J.nodeType==1){J=J.childNodes[c]||(h=J.appendChild(i.createTextNode("")))}if(K.nodeType==1){K=K.childNodes[H]||(f=K.appendChild(i.createTextNode("")))}if(J===K&&J.nodeType==3){N.appendChild(i.createTextNode(J.substringData(c,H-c)));if(e){J.deleteData(c,H-c);F.collapse(true)}return N}var g,a,G=N,I=domUtils.findParents(J,true),M=domUtils.findParents(K,true);for(var b=0;I[b]==M[b];){b++}for(var d=b,E;E=I[d];d++){g=E.nextSibling;if(E==J){if(!h){if(F.startContainer.nodeType==3){G.appendChild(i.createTextNode(J.nodeValue.slice(c)));if(e){J.deleteData(c,J.nodeValue.length-c)}}else{G.appendChild(!e?J.cloneNode(true):J)}}}else{a=E.cloneNode(false);G.appendChild(a)}while(g){if(g===K||g===M[d]){break}E=g.nextSibling;G.appendChild(!e?g.cloneNode(true):g);g=E}G=a}G=N;if(!I[b]){G.appendChild(I[b-1].cloneNode(false));G=G.firstChild}for(var d=b,L;L=M[d];d++){g=L.previousSibling;if(L==K){if(!f&&F.endContainer.nodeType==3){G.appendChild(i.createTextNode(K.substringData(0,H)));if(e){K.deleteData(0,H)}}}else{a=L.cloneNode(false);G.appendChild(a)}if(d!=b||!I[b]){while(g){if(g===J){break}L=g.previousSibling;G.insertBefore(!e?g.cloneNode(true):g,G.firstChild);g=L}}G=a}if(e){F.setStartBefore(!M[b]?M[b-1]:!I[b]?I[b-1]:M[b]).collapse(true)}h&&domUtils.remove(h);f&&domUtils.remove(f);return N}var o=dom.Range=function(b){var a=this;a.startContainer=a.startOffset=a.endContainer=a.endOffset=null;a.document=b;a.collapsed=true};function m(a,d){try{if(q&&domUtils.inDoc(q,a)){if(!q.nodeValue.replace(fillCharReg,"").length){var c=q.parentNode;domUtils.remove(q);while(c&&domUtils.isEmptyInlineElement(c)&&!c.contains(d)){q=c.parentNode;domUtils.remove(c);c=q}}else{q.nodeValue=q.nodeValue.replace(fillCharReg,"")}}}catch(b){}}function n(a,c){var b;a=a[c];while(a&&domUtils.isFillChar(a)){b=a[c];domUtils.remove(a);a=b}}o.prototype={cloneContents:function(){return this.collapsed?null:j(this,0)},deleteContents:function(){var a;if(!this.collapsed){j(this,1)}if(browser.webkit){a=this.startContainer;if(a.nodeType==3&&!a.nodeValue.length){this.setStartBefore(a).collapse(true);domUtils.remove(a)}}return this},extractContents:function(){return this.collapsed?null:j(this,2)},setStart:function(b,a){return s(true,b,a,this)},setEnd:function(b,a){return s(false,b,a,this)},setStartAfter:function(a){return this.setStart(a.parentNode,domUtils.getNodeIndex(a)+1)},setStartBefore:function(a){return this.setStart(a.parentNode,domUtils.getNodeIndex(a))},setEndAfter:function(a){return this.setEnd(a.parentNode,domUtils.getNodeIndex(a)+1)},setStartAtFirst:function(a){return this.setStart(a,0)},setStartAtLast:function(a){return this.setStart(a,a.nodeType==3?a.nodeValue.length:a.childNodes.length)},setEndAtFirst:function(a){return this.setEnd(a,0)},setEndAtLast:function(a){return this.setEnd(a,a.nodeType==3?a.nodeValue.length:a.childNodes.length)},setEndBefore:function(a){return this.setEnd(a.parentNode,domUtils.getNodeIndex(a))},selectNode:function(a){return this.setStartBefore(a).setEndAfter(a)},selectNodeContents:function(a){return this.setStart(a,0).setEnd(a,a.nodeType==3?a.nodeValue.length:a.childNodes.length)},cloneRange:function(){var a=this,b=new o(a.document);return b.setStart(a.startContainer,a.startOffset).setEnd(a.endContainer,a.endOffset)},collapse:function(b){var a=this;if(b){a.endContainer=a.startContainer;a.endOffset=a.startOffset}else{a.startContainer=a.endContainer;a.startOffset=a.endOffset}a.collapsed=true;return a},shrinkBoundary:function(c){var d=this,a,b=d.collapsed;while(d.startContainer.nodeType==1&&(a=d.startContainer.childNodes[d.startOffset])&&a.nodeType==1&&!domUtils.isBookmarkNode(a)&&!dtd.$empty[a.tagName]&&!dtd.$nonChild[a.tagName]){d.setStart(a,0)}if(b){return d.collapse(true)}if(!c){while(d.endContainer.nodeType==1&&d.endOffset>0&&(a=d.endContainer.childNodes[d.endOffset-1])&&a.nodeType==1&&!domUtils.isBookmarkNode(a)&&!dtd.$empty[a.tagName]&&!dtd.$nonChild[a.tagName]){d.setEnd(a,a.childNodes.length)}}return d},getCommonAncestor:function(c,b){var a=this.startContainer,d=this.endContainer;if(a===d){if(c&&a.nodeType==1&&this.startOffset==this.endOffset-1){return a.childNodes[this.startOffset]}return b&&a.nodeType==3?a.parentNode:a}return domUtils.getCommonAncestor(a,d)},trimBoundary:function(c){this.txtToElmBoundary();var e=this.startContainer,f=this.startOffset,a=this.collapsed,d=this.endContainer;if(e.nodeType==3){if(f==0){this.setStartBefore(e)}else{if(f>=e.nodeValue.length){this.setStartAfter(e)}else{var b=domUtils.split(e,f);if(e===d){this.setEnd(b,this.endOffset-f)}else{if(e.parentNode===d){this.endOffset+=1}}this.setStartBefore(b)}}if(a){return this.collapse(true)}}if(!c){f=this.endOffset;d=this.endContainer;if(d.nodeType==3){if(f==0){this.setEndBefore(d)}else{if(f>=d.nodeValue.length){this.setEndAfter(d)}else{domUtils.split(d,f);this.setEndAfter(d)}}}}return this},txtToElmBoundary:function(){function a(c,e){var d=c[e+"Container"],b=c[e+"Offset"];if(d.nodeType==3){if(!b){c["set"+e.replace(/(\w)/,function(f){return f.toUpperCase()})+"Before"](d)}else{if(b>=d.nodeValue.length){c["set"+e.replace(/(\w)/,function(f){return f.toUpperCase()})+"After"](d)}}}}if(!this.collapsed){a(this,"start");a(this,"end")}return this},insertNode:function(b){var f=b,c=1;if(b.nodeType==11){f=b.firstChild;c=b.childNodes.length}this.trimBoundary(true);var e=this.startContainer,a=this.startOffset;var d=e.childNodes[a];if(d){e.insertBefore(b,d)}else{e.appendChild(b)}if(f.parentNode===this.endContainer){this.endOffset=this.endOffset+c}return this.setStartBefore(f)},setCursor:function(a,b){return this.collapse(!a).select(b)},createBookmark:function(b,a){var d,c=this.document.createElement("span");c.style.cssText="display:none;line-height:0px;";c.appendChild(this.document.createTextNode("\uFEFF"));c.id="_baidu_bookmark_start_"+(a?"":l++);if(!this.collapsed){d=c.cloneNode(true);d.id="_baidu_bookmark_end_"+(a?"":l++)}this.insertNode(c);if(d){this.collapse(false).insertNode(d);this.setEndBefore(d)}this.setStartAfter(c);return{start:b?c.id:c,end:d?b?d.id:d:null,id:b}},moveToBookmark:function(b){var a=b.id?this.document.getElementById(b.start):b.start,c=b.end&&b.id?this.document.getElementById(b.end):b.end;this.setStartBefore(a);domUtils.remove(a);if(c){this.setEndBefore(c);domUtils.remove(c)}else{this.collapse(true)}return this},enlarge:function(c,f){var d=domUtils.isBody,e,a,b=this.document.createTextNode("");if(c){a=this.startContainer;if(a.nodeType==1){if(a.childNodes[this.startOffset]){e=a=a.childNodes[this.startOffset]}else{a.appendChild(b);e=a=b}}else{e=a}while(1){if(domUtils.isBlockElm(a)){a=e;while((e=a.previousSibling)&&!domUtils.isBlockElm(e)){a=e}this.setStartBefore(a);break}e=a;a=a.parentNode}a=this.endContainer;if(a.nodeType==1){if(e=a.childNodes[this.endOffset]){a.insertBefore(b,e)}else{a.appendChild(b)}e=a=b}else{e=a}while(1){if(domUtils.isBlockElm(a)){a=e;while((e=a.nextSibling)&&!domUtils.isBlockElm(e)){a=e}this.setEndAfter(a);break}e=a;a=a.parentNode}if(b.parentNode===this.endContainer){this.endOffset--}domUtils.remove(b)}if(!this.collapsed){while(this.startOffset==0){if(f&&f(this.startContainer)){break}if(d(this.startContainer)){break}this.setStartBefore(this.startContainer)}while(this.endOffset==(this.endContainer.nodeType==1?this.endContainer.childNodes.length:this.endContainer.nodeValue.length)){if(f&&f(this.endContainer)){break}if(d(this.endContainer)){break}this.setEndAfter(this.endContainer)}}return this},adjustmentBoundary:function(){if(!this.collapsed){while(!domUtils.isBody(this.startContainer)&&this.startOffset==this.startContainer[this.startContainer.nodeType==3?"nodeValue":"childNodes"].length){this.setStartAfter(this.startContainer)}while(!domUtils.isBody(this.endContainer)&&!this.endOffset){this.setEndBefore(this.endContainer)}}return this},applyInlineStyle:function(g,D,H){if(this.collapsed){return this}this.trimBoundary().enlarge(false,function(t){return t.nodeType==1&&domUtils.isBlockElm(t)}).adjustmentBoundary();var G=this.createBookmark(),d=G.end,B=function(t){return t.nodeType==1?t.tagName.toLowerCase()!="br":!domUtils.isWhitespace(t)},I=domUtils.getNextDomNode(G.start,false,B),f,e,a=this.cloneRange();while(I&&(domUtils.getPosition(I,d)&domUtils.POSITION_PRECEDING)){if(I.nodeType==3||dtd[g][I.tagName]){a.setStartBefore(I);f=I;while(f&&(f.nodeType==3||dtd[g][f.tagName])&&f!==d){e=f;f=domUtils.getNextDomNode(f,f.nodeType==1,null,function(t){return dtd[g][t.tagName]})}var C=a.setEndAfter(e).extractContents(),F;if(H&&H.length>0){var i,E;E=i=H[0].cloneNode(false);for(var b=1,c;c=H[b++];){i.appendChild(c.cloneNode(false));i=i.firstChild}F=i}else{F=a.document.createElement(g)}if(D){domUtils.setAttributes(F,D)}F.appendChild(C);a.insertNode(H?E:F);var h;if(g=="span"&&D.style&&/text\-decoration/.test(D.style)&&(h=domUtils.findParentByTagName(F,"a",true))){domUtils.setAttributes(h,D);domUtils.remove(F,true);F=h}else{domUtils.mergSibling(F);domUtils.clearEmptySibling(F)}domUtils.mergChild(F,g,D);I=domUtils.getNextDomNode(F,false,B);domUtils.mergToParent(F);if(f===d){break}}else{I=domUtils.getNextDomNode(I,true,B)}}return this.moveToBookmark(G)},removeInlineStyle:function(c){if(this.collapsed){return this}c=utils.isArray(c)?c:[c];this.shrinkBoundary().adjustmentBoundary();var e=this.startContainer,d=this.endContainer;while(1){if(e.nodeType==1){if(utils.indexOf(c,e.tagName.toLowerCase())>-1){break}if(e.tagName.toLowerCase()=="body"){e=null;break}}e=e.parentNode}while(1){if(d.nodeType==1){if(utils.indexOf(c,d.tagName.toLowerCase())>-1){break}if(d.tagName.toLowerCase()=="body"){d=null;break}}d=d.parentNode}var a=this.createBookmark(),f,g;if(e){g=this.cloneRange().setEndBefore(a.start).setStartBefore(e);f=g.extractContents();g.insertNode(f);domUtils.clearEmptySibling(e,true);e.parentNode.insertBefore(a.start,e)}if(d){g=this.cloneRange().setStartAfter(a.end).setEndAfter(d);f=g.extractContents();g.insertNode(f);domUtils.clearEmptySibling(d,false,true);d.parentNode.insertBefore(a.end,d.nextSibling)}var h=domUtils.getNextDomNode(a.start,false,function(i){return i.nodeType==1}),b;while(h&&h!==a.end){b=domUtils.getNextDomNode(h,true,function(i){return i.nodeType==1});if(utils.indexOf(c,h.tagName.toLowerCase())>-1){domUtils.remove(h,true)}h=b}return this.moveToBookmark(a)},getClosedNode:function(){var b;if(!this.collapsed){var c=this.cloneRange().adjustmentBoundary().shrinkBoundary();if(c.startContainer.nodeType==1&&c.startContainer===c.endContainer&&c.endOffset-c.startOffset==1){var a=c.startContainer.childNodes[c.startOffset];if(a&&a.nodeType==1&&(dtd.$empty[a.tagName]||dtd.$nonChild[a.tagName])){b=a}}}return b},select:browser.ie?function(h,i){var b;if(!this.collapsed){this.shrinkBoundary()}var f=this.getClosedNode();if(f&&!i){try{b=this.document.body.createControlRange();b.addElement(f);b.select()}catch(a){}return this}var w=this.createBookmark(),g=w.start,e;b=this.document.body.createTextRange();b.moveToElementText(g);b.moveStart("character",1);if(!this.collapsed){var c=this.document.body.createTextRange();e=w.end;c.moveToElementText(e);b.setEndPoint("EndToEnd",c)}else{if(!h&&this.startContainer.nodeType!=3){var v=this.document.createTextNode(k),d=this.document.createElement("span");d.appendChild(this.document.createTextNode(k));g.parentNode.insertBefore(d,g);g.parentNode.insertBefore(v,g);m(this.document,v);q=v;n(d,"previousSibling");n(g,"nextSibling");b.moveStart("character",-1);b.collapse(true)}}this.moveToBookmark(w);d&&domUtils.remove(d);try{b.select()}catch(a){}return this}:function(d){var e=domUtils.getWindow(this.document),f=e.getSelection(),a;browser.gecko?this.document.body.focus():e.focus();if(f){f.removeAllRanges();if(this.collapsed){if(d&&browser.opera&&!domUtils.isBody(this.startContainer)&&this.startContainer.nodeType==1){var c=this.document.createTextNode("");this.insertNode(c).setStart(c,0).collapse(true)}if(!d){a=this.document.createTextNode(k);this.insertNode(a);m(this.document,a);n(a,"previousSibling");n(a,"nextSibling");q=a;this.setStart(a,browser.webkit?1:0).collapse(true)}}var b=this.document.createRange();b.setStart(this.startContainer,this.startOffset);b.setEnd(this.endContainer,this.endOffset);f.addRange(b)}return this},scrollToView:function(b,a){b=b?window:domUtils.getWindow(this.document);var d=this.document.createElement("span");d.innerHTML="&nbsp;";var c=this.cloneRange();c.insertNode(d);domUtils.scrollToView(d,b,a);domUtils.remove(d);return this}}})();(function(){function g(b,A){var z=domUtils.getNodeIndex;b=b.duplicate();b.collapse(A);var D=b.parentElement();if(!D.hasChildNodes()){return{container:D,offset:0}}var E=D.children,y,w=b.duplicate(),C=0,c=E.length-1,a=-1,B;while(C<=c){a=Math.floor((C+c)/2);y=E[a];w.moveToElementText(y);var d=w.compareEndPoints("StartToStart",b);if(d>0){c=a-1}else{if(d<0){C=a+1}else{return{container:D,offset:z(y)}}}}if(a==-1){w.moveToElementText(D);w.setEndPoint("StartToStart",b);B=w.text.replace(/(\r\n|\r)/g,"\n").length;E=D.childNodes;if(!B){y=E[E.length-1];return{container:y,offset:y.nodeValue.length}}var i=E.length;while(B>0){B-=E[--i].nodeValue.length}return{container:E[i],offset:-B}}w.collapse(d>0);w.setEndPoint(d>0?"StartToStart":"EndToStart",b);B=w.text.replace(/(\r\n|\r)/g,"\n").length;if(!B){return dtd.$empty[y.tagName]||dtd.$nonChild[y.tagName]?{container:D,offset:z(y)+(d>0?0:1)}:{container:y,offset:d>0?0:y.childNodes.length}}while(B>0){try{var x=y;y=y[d>0?"previousSibling":"nextSibling"];B-=y.nodeValue.length}catch(F){return{container:D,offset:z(x)}}}return{container:y,offset:d>0?-B:y.nodeValue.length+B}}function h(a,b){if(a.item){b.selectNode(a.item(0))}else{var c=g(a,true);b.setStart(c.container,c.offset);if(a.compareEndPoints("StartToEnd",a)!=0){c=g(a,false);b.setEnd(c.container,c.offset)}}return b}function e(b){var c;try{c=b.getNative().createRange()}catch(a){return null}var d=c.item?c.item(0):c.parentElement();if((d.ownerDocument||d)===b.document){return c}return null}var f=dom.Selection=function(a){var b=this,c;b.document=a;if(ie){c=domUtils.getWindow(a).frameElement;domUtils.on(c,"beforedeactivate",function(){b._bakIERange=b.getIERange()});domUtils.on(c,"activate",function(){try{if(!e(b)&&b._bakIERange){b._bakIERange.select()}}catch(d){}b._bakIERange=null})}c=a=null};f.prototype={getNative:function(){var a=this.document;try{return !a?null:ie?a.selection:domUtils.getWindow(a).getSelection()}catch(b){return null}},getIERange:function(){var a=e(this);if(!a){if(this._bakIERange){return this._bakIERange}}return a},cache:function(){this.clear();this._cachedRange=this.getRange();this._cachedStartElement=this.getStart();this._cachedStartElementPath=this.getStartElementPath()},getStartElementPath:function(){if(this._cachedStartElementPath){return this._cachedStartElementPath}var a=this.getStart();if(a){return domUtils.findParents(a,true,null,true)}return[]},clear:function(){this._cachedStartElementPath=this._cachedRange=this._cachedStartElement=null},isFocus:function(){try{return browser.ie&&e(this)||!browser.ie&&this.getNative().rangeCount?true:false}catch(a){return false}},getRange:function(){var d=this;function l(j){var k=d.document.body.firstChild,i=j.collapsed;while(k&&k.firstChild){j.setStart(k,0);k=k.firstChild}if(!j.startContainer){j.setStart(d.document.body,0)}if(i){j.collapse(true)}}if(d._cachedRange!=null){return this._cachedRange}var m=new baidu.editor.dom.Range(d.document);if(ie){var b=d.getIERange();if(b){h(b,m)}else{l(m)}}else{var c=d.getNative();if(c&&c.rangeCount){var n=c.getRangeAt(0);var a=c.getRangeAt(c.rangeCount-1);m.setStart(n.startContainer,n.startOffset).setEnd(a.endContainer,a.endOffset);if(m.collapsed&&domUtils.isBody(m.startContainer)&&!m.startOffset){l(m)}}else{if(this._bakRange&&domUtils.inDoc(this._bakRange.startContainer,this.document)){return this._bakRange}l(m)}}return this._bakRange=m},getStart:function(){if(this._cachedStartElement){return this._cachedStartElement}var j=ie?this.getIERange():this.getRange(),b,a,d,c;if(ie){if(!j){return this.document.body.firstChild}if(j.item){return j.item(0)}b=j.duplicate();b.text.length>0&&b.moveStart("character",1);b.collapse(1);a=b.parentElement();c=d=j.parentElement();while(d=d.parentNode){if(d==a){a=c;break}}}else{j.shrinkBoundary();a=j.startContainer;if(a.nodeType==1&&a.hasChildNodes()){a=a.childNodes[Math.min(a.childNodes.length-1,j.startOffset)]}if(a.nodeType==3){return a.parentNode}}return a},getText:function(){var b,a;if(this.isFocus()&&(b=this.getNative())){a=browser.ie?b.createRange():b.getRangeAt(0);return browser.ie?a.text:a.toString()}return""}}})();(function(){var i=0,f;function j(a){var b=a.getElementsByTagName("img"),c;for(var d=0,e;e=b[d++];){if(c=e.getAttribute("orgSrc")){e.src=c;e.removeAttribute("orgSrc")}}var n=a.getElementsByTagName("a");for(var d=0,o;o=n[d++];d++){if(o.getAttribute("data_ue_src")){o.setAttribute("href",o.getAttribute("data_ue_src"))}}}function h(a,b){var m;if(b.textarea){if(utils.isString(b.textarea)){for(var d=0,c,e=domUtils.getElementsByTagName(a,"textarea");c=e[d++];){if(c.id=="ueditor_textarea_"+b.options.textarea){m=c;break}}}else{m=b.textarea}}if(!m){a.appendChild(m=domUtils.creElm(document,"textarea",{name:b.options.textarea,id:"ueditor_textarea_"+b.options.textarea,style:"display:none"}))}m.value=b.options.allHtmlEnabled?b.getAllHtml():b.getContent(null,null,true)}var g=UE.Editor=function(c){var b=this;b.uid=i++;EventBase.call(b);b.commands={};b.options=utils.extend(c||{},UEDITOR_CONFIG,true);b.setOpt({isShow:true,initialContent:"欢迎使用ueditor!",autoClearinitialContent:false,iframeCssUrl:b.options.UEDITOR_HOME_URL+"/themes/default/iframe.css",textarea:"editorValue",focus:false,minFrameHeight:320,autoClearEmptyNode:true,fullscreen:false,readonly:false,zIndex:999,imagePopup:true,enterTag:"p",pageBreakTag:"_baidu_page_break_tag_",customDomain:false,lang:"zh-cn",langPath:b.options.UEDITOR_HOME_URL+"lang/",allHtmlEnabled:false});for(var a in UE.plugins){UE.plugins[a].call(b)}b.langIsReady=true;b.fireEvent("langReady");UE.instants["ueditorInstant"+b.uid]=b};g.prototype={_root:null,loaded:false,ready:function(b){var a=this;if(b){a.isReady?b.apply(a):a.addListener("ready",b)}},setOpt:function(c,a){var b={};if(utils.isString(c)){b[c]=a}else{b=c}utils.extend(this.options,b,true)},destroy:function(){var b=this;b.fireEvent("destroy");b.container.innerHTML="";domUtils.remove(b.container);for(var a in b){if(b.hasOwnProperty(a)){delete this[a]}}},render:function(m){var c=this,l=c.options;if(m.constructor===String){m=document.getElementById(m)}if(m){var n=ie&&browser.version<9,d=(ie&&browser.version<9?"":"<!DOCTYPE html>")+"<html xmlns='http://www.w3.org/1999/xhtml'"+(!n?" class='view'":"")+"><head>"+(l.iframeCssUrl?"<link rel='stylesheet' type='text/css' href='"+utils.unhtml(l.iframeCssUrl)+"'/>":"")+"<style type='text/css'>.selectTdClass{background-color:#3399FF !important;}table.noBorderTable td{border:1px dashed #ddd !important}table{clear:both;margin-bottom:10px;border-collapse:collapse;word-break:break-all;}.pagebreak{display:block;clear:both !important;cursor:default !important;width: 100% !important;margin:0;}.anchorclass{background: url('"+c.options.UEDITOR_HOME_URL+"themes/default/images/anchor.gif') no-repeat scroll left center transparent;border: 1px dotted #0000FF;cursor: auto;display: inline-block;height: 16px;width: 15px;}.view{padding:0;word-wrap:break-word;cursor:text;height:100%;}\nbody{margin:8px;font-family:'宋体';font-size:16px;}li{clear:both}p{margin:5px 0;}"+(l.initialStyle||"")+"</style></head><body"+(n?" class='view'":"")+"></body>";if(l.customDomain&&document.domain!=location.hostname){d+="<script>window.parent.UE.instants['ueditorInstant"+c.uid+"']._setup(document);<\/script></html>";m.appendChild(domUtils.creElm(document,"iframe",{id:"baidu_editor_"+c.uid,width:"100%",height:"100%",frameborder:"0",src:'javascript:void(function(){document.open();document.domain="'+document.domain+'";document.write("'+d+'");document.close();}())'}))}else{m.innerHTML='<iframe id="baidu_editor_'+this.uid+'"width="100%" height="100%" scroll="no" frameborder="0" ></iframe>';var b=m.firstChild.contentWindow.document;var e=m.firstChild;var a=this;e.onload=e.onreadystatechange=function(){if(e.readyState!==undefined){if(e.readyState=="complete"){a.loaded=true;a._root&&a._root._fireSync()}}else{a.loaded=true;a._root&&a._root._fireSync()}};!browser.webkit&&b.open();b.write(d+"</html>");!browser.webkit&&b.close();c._setup(b)}m.style.overflow="hidden"}},_setup:function(b){var c=this,l=c.options;if(ie){b.body.disabled=true;b.body.contentEditable=true;b.body.disabled=false}else{b.body.contentEditable=true;b.body.spellcheck=false}c.document=b;c.window=b.defaultView||b.parentWindow;c.iframe=c.window.frameElement;c.body=b.body;c.selection=new dom.Selection(b);var a;if(browser.gecko&&(a=this.selection.getNative())){a.removeAllRanges()}this._initEvents();if(l.initialContent){if(l.autoClearinitialContent){var e=c.execCommand;c.execCommand=function(){c.fireEvent("firstBeforeExecCommand");e.apply(c,arguments)};this.setDefaultContent(l.initialContent)}else{this.setContent(l.initialContent,true)}}for(var d=this.iframe.parentNode;!domUtils.isBody(d);d=d.parentNode){if(d.tagName=="FORM"){domUtils.on(d,"submit",function(){h(this,c)});break}}if(domUtils.isEmptyNode(c.body)){c.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>"}if(l.focus){setTimeout(function(){c.focus();!c.options.autoClearinitialContent&&c._selectionChange()})}if(!c.container){c.container=this.iframe.parentNode}if(l.fullscreen&&c.ui){c.ui.setFullScreen(true)}c.isReady=1;c.fireEvent("ready");if(!browser.ie){domUtils.on(c.window,["blur","focus"],function(k){if(k.type=="blur"){c._bakRange=c.selection.getRange();try{c.selection.getNative().removeAllRanges()}catch(k){}}else{try{c._bakRange&&c._bakRange.select()}catch(k){}}})}if(browser.gecko&&browser.version<=10902){c.body.contentEditable=false;setTimeout(function(){c.body.contentEditable=true},100);setInterval(function(){c.body.style.height=c.iframe.offsetHeight-20+"px"},100)}!l.isShow&&c.setHide();l.readonly&&c.setDisabled()},sync:function(a){var b=this,c=a?document.getElementById(a):domUtils.findParent(b.iframe.parentNode,function(d){return d.tagName=="FORM"},true);c&&h(c,b)},setHeight:function(c,b){var a=this.iframe.parentNode.style.height;if(a&&!b){return}if(c!==parseInt(a)){this.iframe.parentNode.style.height=c+"px"}this.document.body.style.height=c-20+"px"},getContent:function(a,d,n){var b=this;if(a&&utils.isFunction(a)){d=a;a=""}if(d?!d():!this.hasContents()){return""}b.fireEvent("beforegetcontent",a);var e=new RegExp(domUtils.fillChar,"g"),m=b.body.innerHTML.replace(e,"").replace(/>[\t\r\n]*?</g,"><");b.fireEvent("aftergetcontent",a);if(b.serialize){var c=b.serialize.parseHTML(m);c=b.serialize.transformOutput(c);m=b.serialize.toHTML(c)}if(ie&&n){m=m.replace(/<p>\s*?<\/p>/g,"<p>&nbsp;</p>")}else{m=m.replace(/(&nbsp;)+/g,function(r){for(var s=0,l=[],k=r.split(";").length-1;s<k;s++){l.push(s%2==0?" ":"&nbsp;")}return l.join("")})}return m},getAllHtml:function(){var a=this,b={html:""},c="";a.fireEvent("getAllHtml",b);return"<html><head>"+(a.options.charset?'<meta http-equiv="Content-Type" content="text/html; charset='+a.options.charset+'"/>':"")+a.document.getElementsByTagName("head")[0].innerHTML+b.html+"</head><body "+(ie&&browser.version<9?'class="view"':"")+">"+a.getContent(null,null,true)+"</body></html>"},getPlainTxt:function(){var a=new RegExp(domUtils.fillChar,"g"),b=this.body.innerHTML.replace(/[\n\r]/g,"");b=b.replace(/<(p|div)[^>]*>(<br\/?>|&nbsp;)<\/\1>/gi,"\n").replace(/<br\/?>/gi,"\n").replace(/<[^>/]+>/g,"").replace(/(\n)?<\/([^>]+)>/g,function(d,e,c){return dtd.$block[c]?"\n":e?e:""});return b.replace(a,"").replace(/\u00a0/g," ").replace(/&nbsp;/g," ")},getContentTxt:function(){var a=new RegExp(domUtils.fillChar,"g");return this.body[browser.ie?"innerText":"textContent"].replace(a,"").replace(/\u00a0/g," ")},setContent:function(e,s){var b=this,c=utils.extend({a:1,A:1},dtd.$inline,true),r;e=e.replace(/^[ \t\r\n]*?</,"<").replace(/>[ \t\r\n]*?$/,">").replace(/>[\t\r\n]*?</g,"><").replace(/[\s\/]?(\w+)?>[ \t\r\n]*?<\/?(\w+)/gi,function(l,m,k){if(m){r=k}else{m=r}return !c[m]&&!c[k]?l.replace(/>[ \t\r\n]*?</,"><"):l});b.fireEvent("beforesetcontent");var a=this.serialize;if(a){var t=a.parseHTML(e);t=a.transformInput(t);t=a.filter(t);e=a.toHTML(t)}this.body.innerHTML=e.replace(new RegExp("[\r"+domUtils.fillChar+"]*","g"),"");if(browser.ie&&browser.version<7){j(this.document.body)}if(b.options.enterTag=="p"){var v=this.body.firstChild,u;if(!v||v.nodeType==1&&(dtd.$cdata[v.tagName]||domUtils.isCustomeNode(v))&&v===this.body.lastChild){this.body.innerHTML="<p>"+(browser.ie?"&nbsp;":"<br/>")+"</p>"+this.body.innerHTML}else{var w=b.document.createElement("p");while(v){while(v&&(v.nodeType==3||v.nodeType==1&&dtd.p[v.tagName]&&!dtd.$cdata[v.tagName])){u=v.nextSibling;w.appendChild(v);v=u}if(w.firstChild){if(!v){b.body.appendChild(w);break}else{b.body.insertBefore(w,v);w=b.document.createElement("p")}}v=v.nextSibling}}}b.adjustTable&&b.adjustTable(b.body);b.fireEvent("aftersetcontent");b.fireEvent("contentchange");!s&&b._selectionChange();b._bakRange=b._bakIERange=null;var d;if(browser.gecko&&(d=this.selection.getNative())){d.removeAllRanges()}},focus:function(a){try{var c=this,d=c.selection.getRange();if(a){d.setStartAtLast(c.body.lastChild).setCursor(false,true)}else{d.select(true)}}catch(b){}},_initEvents:function(){var e=this,a=e.document,b=e.window;e._proxyDomEvent=utils.bind(e._proxyDomEvent,e);domUtils.on(a,["click","contextmenu","mousedown","keydown","keyup","keypress","mouseup","mouseover","mouseout","selectstart"],e._proxyDomEvent);domUtils.on(b,["focus","blur"],e._proxyDomEvent);domUtils.on(a,["mouseup","keydown"],function(k){if(k.type=="keydown"&&(k.ctrlKey||k.metaKey||k.shiftKey||k.altKey)){return}if(k.button==2){return}e._selectionChange(250,k)});var l=0,d=browser.ie?e.body:e.document,c;domUtils.on(d,"dragstart",function(){l=1});domUtils.on(d,browser.webkit?"dragover":"drop",function(){return browser.webkit?function(){clearTimeout(c);c=setTimeout(function(){if(!l){var s=e.selection,r=s.getRange();if(r){var k=r.getCommonAncestor();if(k&&e.serialize){var t=e.serialize,u=t.filter(t.transformInput(t.parseHTML(t.word(k.innerHTML))));k.innerHTML=t.toHTML(u)}}}l=0},200)}:function(k){if(!l){k.preventDefault?k.preventDefault():(k.returnValue=false)}l=0}}())},_proxyDomEvent:function(a){return this.fireEvent(a.type.replace(/^on/,""),a)},_selectionChange:function(d,n){var a=this;var b=false;var c,e;if(browser.ie&&browser.version<9&&n&&n.type=="mouseup"){var m=this.selection.getRange();if(!m.collapsed){b=true;c=n.clientX;e=n.clientY}}clearTimeout(f);f=setTimeout(function(){if(!a.selection.getNative()){return}var q;if(b&&a.selection.getNative().type=="None"){q=a.document.body.createTextRange();try{q.moveToPoint(c,e)}catch(k){q=null}}var l;if(q){l=a.selection.getIERange;a.selection.getIERange=function(){return q}}a.selection.cache();if(l){a.selection.getIERange=l}if(a.selection._cachedRange&&a.selection._cachedStartElement){a.fireEvent("beforeselectionchange");a.fireEvent("selectionchange",!!n);a.fireEvent("afterselectionchange");a.selection.clear()}},d||50)},_callCmdFn:function(a,d){var e=d[0].toLowerCase(),b,c;b=this.commands[e]||UE.commands[e];c=b&&b[a];if((!b||!c)&&a=="queryCommandState"){return 0}else{if(c){return c.apply(this,d)}}},execCommand:function(c){c=c.toLowerCase();var b=this,d,a=b.commands[c]||UE.commands[c];if(!a||!a.execCommand){return}if(!a.notNeedUndo&&!b.__hasEnterExecCommand){b.__hasEnterExecCommand=true;if(b.queryCommandState(c)!=-1){b.fireEvent("beforeexeccommand",c);d=this._callCmdFn("execCommand",arguments);b.fireEvent("afterexeccommand",c)}b.__hasEnterExecCommand=false}else{d=this._callCmdFn("execCommand",arguments)}b._selectionChange();return d},queryCommandState:function(a){return this._callCmdFn("queryCommandState",arguments)},queryCommandValue:function(a){return this._callCmdFn("queryCommandValue",arguments)},hasContents:function(e){if(e){for(var c=0,d;d=e[c++];){if(this.document.getElementsByTagName(d).length>0){return true}}}if(!domUtils.isEmptyBlock(this.body)){return true}e=["div"];for(c=0;d=e[c++];){var m=domUtils.getElementsByTagName(this.document,d);for(var a=0,b;b=m[a++];){if(domUtils.isCustomeNode(b)){return true}}}return false},reset:function(){this.fireEvent("reset")},setEnabled:function(){var b=this,c;if(b.body.contentEditable=="false"){b.body.contentEditable=true;c=b.selection.getRange();try{c.moveToBookmark(b.lastBk);delete b.lastBk}catch(a){c.setStartAtFirst(b.body).collapse(true)}c.select(true);if(b.bkqueryCommandState){b.queryCommandState=b.bkqueryCommandState;delete b.bkqueryCommandState}b.fireEvent("selectionchange")}},setDisabled:function(b){var a=this;b=b?utils.isArray(b)?b:[b]:[];if(a.body.contentEditable=="true"){if(!a.lastBk){a.lastBk=a.selection.getRange().createBookmark(true)}a.body.contentEditable=false;a.bkqueryCommandState=a.queryCommandState;a.queryCommandState=function(c){if(utils.indexOf(b,c)!=-1){return a.bkqueryCommandState.apply(a,arguments)}return -1};a.fireEvent("selectionchange")}},setDefaultContent:function(){function a(){var b=this;if(b.document.getElementById("initContent")){b.document.body.innerHTML="<p>"+(ie?"":"<br/>")+"</p>";var c=b.selection.getRange();b.removeListener("firstBeforeExecCommand",a);b.removeListener("focus",a);setTimeout(function(){c.setStart(b.document.body.firstChild,0).collapse(true).select(true);b._selectionChange()})}}return function(c){var b=this;b.document.body.innerHTML='<p id="initContent">'+c+"</p>";if(browser.ie&&browser.version<7){j(b.document.body)}b.addListener("firstBeforeExecCommand",a);b.addListener("focus",a)}}(),setShow:function(){var b=this,c=b.selection.getRange();if(b.container.style.display=="none"){try{c.moveToBookmark(b.lastBk);delete b.lastBk}catch(a){c.setStartAtFirst(b.body).collapse(true)}c.select(true);b.container.style.display=""}},setHide:function(){var a=this;if(!a.lastBk){a.lastBk=a.selection.getRange().createBookmark(true)}a.container.style.display="none"},getLang:function(b){var a=UE.I18N[this.options.lang];b=(b||"").split(".");for(var c=0,d;d=b[c++];){a=a[d];if(!a){break}}return a}};utils.inherits(g,EventBase)})();UE.ajax=function(){return{request:function(t,r){var m=c(),q=false,s={method:"POST",timeout:5000,async:true,data:{},onsuccess:function(){},onerror:function(){}};if(typeof t==="object"){r=t;t=r.url}if(!m||!t){return}var n=r?utils.extend(s,r):s;var a=d(n);if(!utils.isEmptyObject(n.data)){a+=(a?"&":"")+d(n.data)}var b=setTimeout(function(){if(m.readyState!=4){q=true;m.abort();clearTimeout(b)}},n.timeout);var u=n.method.toUpperCase();var o=t+(t.indexOf("?")==-1?"?":"&")+(u=="POST"?"":a+"&noCache="+ +new Date);m.open(u,o,n.async);m.onreadystatechange=function(){if(m.readyState==4){if(!q&&m.status==200){n.onsuccess(m)}else{n.onerror(m)}}};if(u=="POST"){m.setRequestHeader("Content-Type","application/x-www-form-urlencoded");m.send(a)}else{m.send(null)}}};function d(b){var a=[];for(var f in b){if(f=="method"||f=="timeout"||f=="async"){continue}if(!((typeof b[f]).toLowerCase()=="function"||(typeof b[f]).toLowerCase()=="object")){a.push(encodeURIComponent(f)+"="+encodeURIComponent(b[f]))}}return a.join("&")}function c(){var b=null;if(window.XMLHttpRequest){b=new XMLHttpRequest()}else{try{b=new ActiveXObject("Msxml2.XMLHTTP")}catch(a){try{b=new ActiveXObject("Microsoft.XMLHTTP")}catch(a){}}}return b}}();var baidu=baidu||{};baidu.editor=baidu.editor||{};baidu.editor.ui={};(function(){var o=baidu.editor.browser,q=baidu.editor.dom.domUtils;var l="$EDITORUI";var m=window[l]={};var s="ID"+l;var j=0;var r=baidu.editor.ui.uiUtils={uid:function(a){return(a?a[s]||(a[s]=++j):++j)},hook:function(c,a){var b;if(c&&c._callbacks){b=c}else{b=function(){var e;if(c){e=c.apply(this,arguments)}var f=b._callbacks;var d=f.length;while(d--){var g=f[d].apply(this,arguments);if(e===undefined){e=g}}return e};b._callbacks=[]}b._callbacks.push(a);return b},createElementByHtml:function(b){var a=document.createElement("div");a.innerHTML=b;a=a.firstChild;a.parentNode.removeChild(a);return a},getViewportElement:function(){return(o.ie&&o.quirks)?document.body:document.documentElement},getClientRect:function(d){var e;try{e=d.getBoundingClientRect()}catch(a){e={left:0,top:0,height:0,width:0}}var c={left:Math.round(e.left),top:Math.round(e.top),height:Math.round(e.bottom-e.top),width:Math.round(e.right-e.left)};var b;while((b=d.ownerDocument)!==document&&(d=q.getWindow(b).frameElement)){e=d.getBoundingClientRect();c.left+=e.left;c.top+=e.top}c.bottom=c.top+c.height;c.right=c.left+c.width;return c},getViewportRect:function(){var b=r.getViewportElement();var a=(window.innerWidth||b.clientWidth)|0;var c=(window.innerHeight||b.clientHeight)|0;return{left:0,top:0,height:c,width:a,bottom:c,right:a}},setViewportOffset:function(d,a){var c;var b=r.getFixedLayer();if(d.parentNode===b){d.style.left=a.left+"px";d.style.top=a.top+"px"}else{q.setViewportOffset(d,a)}},getEventOffset:function(d){var c=d.target||d.srcElement;var b=r.getClientRect(c);var a=r.getViewportOffsetByEvent(d);return{left:a.left-b.left,top:a.top-b.top}},getViewportOffsetByEvent:function(c){var b=c.target||c.srcElement;var d=q.getWindow(b).frameElement;var e={left:c.clientX,top:c.clientY};if(d&&b.ownerDocument!==document){var a=r.getClientRect(d);e.left+=a.left;e.top+=a.top}return e},setGlobal:function(a,b){m[a]=b;return l+'["'+a+'"]'},unsetGlobal:function(a){delete m[a]},copyAttributes:function(d,e){var b=e.attributes;var c=b.length;while(c--){var a=b[c];if(a.nodeName!="style"&&a.nodeName!="class"&&(!o.ie||a.specified)){d.setAttribute(a.nodeName,a.nodeValue)}}if(e.className){d.className+=" "+e.className}if(e.style.cssText){d.style.cssText+=";"+e.style.cssText}},removeStyle:function(a,b){if(a.style.removeProperty){a.style.removeProperty(b)}else{if(a.style.removeAttribute){a.style.removeAttribute(b)}else{throw""}}},contains:function(a,b){return a&&b&&(a===b?false:(a.contains?a.contains(b):a.compareDocumentPosition(b)&16))},startDrag:function(i,d,b){var b=b||document;var e=i.clientX;var f=i.clientY;function g(x){var y=x.clientX-e;var w=x.clientY-f;d.ondragmove(y,w);if(x.stopPropagation){x.stopPropagation()}else{x.cancelBubble=true}}if(b.addEventListener){function a(u){b.removeEventListener("mousemove",g,true);b.removeEventListener("mouseup",g,true);window.removeEventListener("mouseup",a,true);d.ondragstop()}b.addEventListener("mousemove",g,true);b.addEventListener("mouseup",a,true);window.addEventListener("mouseup",a,true);i.preventDefault()}else{var c=i.srcElement;c.setCapture();function h(){c.releaseCapture();c.detachEvent("onmousemove",g);c.detachEvent("onmouseup",h);c.detachEvent("onlosecaptrue",h);d.ondragstop()}c.attachEvent("onmousemove",g);c.attachEvent("onmouseup",h);c.attachEvent("onlosecaptrue",h);i.returnValue=false}d.ondragstart()},getFixedLayer:function(){var a=document.getElementById("edui_fixedlayer");if(a==null){a=document.createElement("div");a.id="edui_fixedlayer";document.body.appendChild(a);if(o.ie&&o.version<=8){a.style.position="absolute";k();setTimeout(n)}else{a.style.position="fixed"}a.style.left="0";a.style.top="0";a.style.width="0";a.style.height="0"}return a},makeUnselectable:function(a){if(o.opera||(o.ie&&o.version<9)){a.unselectable="on";if(a.hasChildNodes()){for(var b=0;b<a.childNodes.length;b++){if(a.childNodes[b].nodeType==1){r.makeUnselectable(a.childNodes[b])}}}}else{if(a.style.MozUserSelect!==undefined){a.style.MozUserSelect="none"}else{if(a.style.WebkitUserSelect!==undefined){a.style.WebkitUserSelect="none"}else{if(a.style.KhtmlUserSelect!==undefined){a.style.KhtmlUserSelect="none"}}}}}};function n(){var a=document.getElementById("edui_fixedlayer");r.setViewportOffset(a,{left:0,top:0})}function k(a){q.on(window,"scroll",n);q.on(window,"resize",baidu.editor.utils.defer(n,0,true))}})();(function(){var f=baidu.editor.utils,e=baidu.editor.ui.uiUtils,h=baidu.editor.EventBase,g=baidu.editor.ui.UIBase=function(){};g.prototype={className:"",uiName:"",initOptions:function(b){var a=this;for(var c in b){a[c]=b[c]}this.id=this.id||"edui"+e.uid()},initUIBase:function(){this._globalKey=f.unhtml(e.setGlobal(this.id,this))},render:function(c){var d=this.renderHtml();var b=e.createElementByHtml(d);var a=this.getDom();if(a!=null){a.parentNode.replaceChild(b,a);e.copyAttributes(b,a)}else{if(typeof c=="string"){c=document.getElementById(c)}c=c||e.getFixedLayer();c.appendChild(b)}this.postRender()},getDom:function(a){if(!a){return document.getElementById(this.id)}else{return document.getElementById(this.id+"_"+a)}},postRender:function(){this.fireEvent("postrender")},getHtmlTpl:function(){return""},formatHtml:function(b){var a="edui-"+this.uiName;return(b.replace(/##/g,this.id).replace(/%%-/g,this.uiName?a+"-":"").replace(/%%/g,(this.uiName?a:"")+" "+this.className).replace(/\$\$/g,this._globalKey))},renderHtml:function(){return this.formatHtml(this.getHtmlTpl())},dispose:function(){var a=this.getDom();if(a){baidu.editor.dom.domUtils.remove(a)}e.unsetGlobal(this.id)}};f.inherits(g,h)})();(function(){var e=baidu.editor.utils,d=baidu.editor.ui.UIBase,f=baidu.editor.ui.Separator=function(a){this.initOptions(a);this.initSeparator()};f.prototype={uiName:"separator",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"></div>'}};e.inherits(f,d)})();(function(){var f=baidu.editor.utils,g=baidu.editor.dom.domUtils,i=baidu.editor.ui.UIBase,j=baidu.editor.ui.uiUtils;var h=baidu.editor.ui.Mask=function(a){this.initOptions(a);this.initUIBase()};h.prototype={getHtmlTpl:function(){return'<div id="##" class="edui-mask %%" onmousedown="return $$._onMouseDown(event, this);"></div>'},postRender:function(){var a=this;g.on(window,"resize",function(){setTimeout(function(){if(!a.isHidden()){a._fill()}})})},show:function(a){this._fill();this.getDom().style.display="";this.getDom().style.zIndex=a},hide:function(){this.getDom().style.display="none";this.getDom().style.zIndex=""},isHidden:function(){return this.getDom().style.display=="none"},_onMouseDown:function(){return false},_fill:function(){var b=this.getDom();var a=j.getViewportRect();b.style.width=a.width+"px";b.style.height=a.height+"px"}};f.inherits(h,i)})();(function(){var q=baidu.editor.utils,n=baidu.editor.ui.uiUtils,j=baidu.editor.dom.domUtils,k=baidu.editor.ui.UIBase,l=baidu.editor.ui.Popup=function(a){this.initOptions(a);this.initPopup()};var i=[];function m(b){var a=[];for(var c=0;c<i.length;c++){var d=i[c];if(!d.isHidden()){if(d.queryAutoHide(b)!==false){d.hide()}}}}l.postHide=m;var o=["edui-anchor-topleft","edui-anchor-topright","edui-anchor-bottomleft","edui-anchor-bottomright"];l.prototype={SHADOW_RADIUS:5,content:null,_hidden:false,autoRender:true,canSideLeft:true,canSideUp:true,initPopup:function(){this.initUIBase();i.push(this)},getHtmlTpl:function(){return'<div id="##" class="edui-popup %%"> <div id="##_body" class="edui-popup-body"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: white;" frameborder="0" width="100%" height="100%" src="javascript:"></iframe> <div class="edui-shadow"></div> <div id="##_content" class="edui-popup-content">'+this.getContentHtmlTpl()+"  </div> </div></div>"},getContentHtmlTpl:function(){if(this.content){if(typeof this.content=="string"){return this.content}return this.content.renderHtml()}else{return""}},_UIBase_postRender:k.prototype.postRender,postRender:function(){if(this.content instanceof k){this.content.postRender()}this.fireEvent("postRenderAfter");this.hide(true);this._UIBase_postRender()},_doAutoRender:function(){if(!this.getDom()&&this.autoRender){this.render()}},mesureSize:function(){var a=this.getDom("content");return n.getClientRect(a)},fitSize:function(){var b=this.getDom("body");b.style.width="";b.style.height="";var a=this.mesureSize();b.style.width=a.width+"px";b.style.height=a.height+"px";return a},showAnchor:function(a,b){this.showAnchorRect(n.getClientRect(a),b)},showAnchorRect:function(b,e,d){this._doAutoRender();var g=n.getViewportRect();this._show();var h=this.fitSize();var a,f,t,c;if(e){a=this.canSideLeft&&(b.right+h.width>g.right&&b.left>h.width);f=this.canSideUp&&(b.top+h.height>g.bottom&&b.bottom>h.height);t=(a?b.left-h.width:b.right);c=(f?b.bottom-h.height:b.top)}else{a=this.canSideLeft&&(b.right+h.width>g.right&&b.left>h.width);f=this.canSideUp&&(b.top+h.height>g.bottom&&b.bottom>h.height);t=(a?b.right-h.width:b.left);c=(f?b.top-h.height:b.bottom)}var u=this.getDom();n.setViewportOffset(u,{left:t,top:c});j.removeClasses(u,o);u.className+=" "+o[(f?1:0)*2+(a?1:0)];if(this.editor){u.style.zIndex=this.editor.container.style.zIndex*1+10;baidu.editor.ui.uiUtils.getFixedLayer().style.zIndex=u.style.zIndex-1}},showAt:function(a){var b=a.left;var c=a.top;var d={left:b,top:c,right:b,bottom:c,height:0,width:0};this.showAnchorRect(d,false,true)},_show:function(){if(this._hidden){var a=this.getDom();a.style.display="";this._hidden=false;this.fireEvent("show")}},isHidden:function(){return this._hidden},show:function(){this._doAutoRender();this._show()},hide:function(a){if(!this._hidden&&this.getDom()){this.getDom().style.display="none";this._hidden=true;if(!a){this.fireEvent("hide")}}},queryAutoHide:function(a){return !a||!n.contains(this.getDom(),a)}};q.inherits(l,k);j.on(document,"mousedown",function(b){var a=b.target||b.srcElement;m(a)});j.on(window,"scroll",function(){m()})})();(function(){var g=baidu.editor.utils,j=baidu.editor.ui.UIBase,f=baidu.editor.ui.ColorPicker=function(a){this.initOptions(a);this.noColorText=this.noColorText||this.editor.getLang("clearColor");this.initUIBase()};f.prototype={getHtmlTpl:function(){return h(this.noColorText,this.editor)},_onTableClick:function(c){var a=c.target||c.srcElement;var b=a.getAttribute("data-color");if(b){this.fireEvent("pickcolor",b)}},_onTableOver:function(c){var a=c.target||c.srcElement;var b=a.getAttribute("data-color");if(b){this.getDom("preview").style.backgroundColor=b}},_onTableOut:function(){this.getDom("preview").style.backgroundColor=""},_onPickNoColor:function(){this.fireEvent("picknocolor")}};g.inherits(f,j);var i=("ffffff,000000,eeece1,1f497d,4f81bd,c0504d,9bbb59,8064a2,4bacc6,f79646,f2f2f2,7f7f7f,ddd9c3,c6d9f0,dbe5f1,f2dcdb,ebf1dd,e5e0ec,dbeef3,fdeada,d8d8d8,595959,c4bd97,8db3e2,b8cce4,e5b9b7,d7e3bc,ccc1d9,b7dde8,fbd5b5,bfbfbf,3f3f3f,938953,548dd4,95b3d7,d99694,c3d69b,b2a2c7,92cddc,fac08f,a5a5a5,262626,494429,17365d,366092,953734,76923c,5f497a,31859b,e36c09,7f7f7f,0c0c0c,1d1b10,0f243e,244061,632423,4f6128,3f3151,205867,974806,c00000,ff0000,ffc000,ffff00,92d050,00b050,00b0f0,0070c0,002060,7030a0,").split(",");function h(d,a){var b='<div id="##" class="edui-colorpicker %%"><div class="edui-colorpicker-topbar edui-clearfix"><div unselectable="on" id="##_preview" class="edui-colorpicker-preview"></div><div unselectable="on" class="edui-colorpicker-nocolor" onclick="$$._onPickNoColor(event, this);">'+d+'</div></div><table  class="edui-box" style="border-collapse: collapse;" onmouseover="$$._onTableOver(event, this);" onmouseout="$$._onTableOut(event, this);" onclick="return $$._onTableClick(event, this);" cellspacing="0" cellpadding="0"><tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#366092;padding-top: 2px"><td colspan="10">'+a.getLang("themeColor")+'</td> </tr><tr class="edui-colorpicker-tablefirstrow" >';for(var c=0;c<i.length;c++){if(c&&c%10===0){b+="</tr>"+(c==60?'<tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#366092;"><td colspan="10">'+a.getLang("standardColor")+"</td></tr>":"")+"<tr"+(c==60?' class="edui-colorpicker-tablefirstrow"':"")+">"}b+=c<70?'<td style="padding: 0 2px;"><a hidefocus title="'+i[c]+'" onclick="return false;" href="javascript:" unselectable="on" class="edui-box edui-colorpicker-colorcell" data-color="#'+i[c]+'" style="background-color:#'+i[c]+";border:solid #ccc;"+(c<10||c>=60?"border-width:1px;":c>=10&&c<20?"border-width:1px 1px 0 1px;":"border-width:0 1px 0 1px;")+'"></a></td>':""}b+="</tr></table></div>";return b}})();(function(){var f=baidu.editor.utils,e=baidu.editor.ui.uiUtils,h=baidu.editor.ui.UIBase;var g=baidu.editor.ui.TablePicker=function(a){this.initOptions(a);this.initTablePicker()};g.prototype={defaultNumRows:10,defaultNumCols:10,maxNumRows:20,maxNumCols:20,numRows:10,numCols:10,lengthOfCellSide:22,initTablePicker:function(){this.initUIBase()},getHtmlTpl:function(){var a=this;return'<div id="##" class="edui-tablepicker %%"><div class="edui-tablepicker-body"><div class="edui-infoarea"><span id="##_label" class="edui-label"></span><span class="edui-clickable" onclick="$$._onMore();">'+a.editor.getLang("more")+'</span></div><div class="edui-pickarea" onmousemove="$$._onMouseMove(event, this);" onmouseover="$$._onMouseOver(event, this);" onmouseout="$$._onMouseOut(event, this);" onclick="$$._onClick(event, this);"><div id="##_overlay" class="edui-overlay"></div></div></div></div>'},_UIBase_render:h.prototype.render,render:function(a){this._UIBase_render(a);this.getDom("label").innerHTML="0"+this.editor.getLang("t_row")+" x 0"+this.editor.getLang("t_col")},_track:function(a,b){var d=this.getDom("overlay").style;var c=this.lengthOfCellSide;d.width=a*c+"px";d.height=b*c+"px";var j=this.getDom("label");j.innerHTML=a+this.editor.getLang("t_col")+" x "+b+this.editor.getLang("t_row");this.numCols=a;this.numRows=b},_onMouseOver:function(b,a){var c=b.relatedTarget||b.fromElement;if(!e.contains(a,c)&&a!==c){this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row");this.getDom("overlay").style.visibility=""}},_onMouseOut:function(b,a){var c=b.relatedTarget||b.toElement;if(!e.contains(a,c)&&a!==c){this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row");this.getDom("overlay").style.visibility="hidden"}},_onMouseMove:function(n,l){var m=this.getDom("overlay").style;var a=e.getEventOffset(n);var c=this.lengthOfCellSide;var b=Math.ceil(a.left/c);var d=Math.ceil(a.top/c);this._track(b,d)},_onClick:function(){this.fireEvent("picktable",this.numCols,this.numRows)},_onMore:function(){this.fireEvent("more")}};f.inherits(g,h)})();(function(){var h=baidu.editor.browser,f=baidu.editor.dom.domUtils,e=baidu.editor.ui.uiUtils;var g='onmousedown="$$.Stateful_onMouseDown(event, this);" onmouseup="$$.Stateful_onMouseUp(event, this);"'+(h.ie?(' onmouseenter="$$.Stateful_onMouseEnter(event, this);" onmouseleave="$$.Stateful_onMouseLeave(event, this);"'):(' onmouseover="$$.Stateful_onMouseOver(event, this);" onmouseout="$$.Stateful_onMouseOut(event, this);"'));baidu.editor.ui.Stateful={alwalysHoverable:false,Stateful_init:function(){this._Stateful_dGetHtmlTpl=this.getHtmlTpl;this.getHtmlTpl=this.Stateful_getHtmlTpl},Stateful_getHtmlTpl:function(){var a=this._Stateful_dGetHtmlTpl();return a.replace(/stateful/g,function(){return g})},Stateful_onMouseEnter:function(b,a){if(!this.isDisabled()||this.alwalysHoverable){this.addState("hover");this.fireEvent("over")}},Stateful_onMouseLeave:function(b,a){if(!this.isDisabled()||this.alwalysHoverable){this.removeState("hover");this.removeState("active");this.fireEvent("out")}},Stateful_onMouseOver:function(b,a){var c=b.relatedTarget;if(!e.contains(a,c)&&a!==c){this.Stateful_onMouseEnter(b,a)}},Stateful_onMouseOut:function(b,a){var c=b.relatedTarget;if(!e.contains(a,c)&&a!==c){this.Stateful_onMouseLeave(b,a)}},Stateful_onMouseDown:function(b,a){if(!this.isDisabled()){this.addState("active")}},Stateful_onMouseUp:function(b,a){if(!this.isDisabled()){this.removeState("active")}},Stateful_postRender:function(){if(this.disabled&&!this.hasState("disabled")){this.addState("disabled")}},hasState:function(a){return f.hasClass(this.getStateDom(),"edui-state-"+a)},addState:function(a){if(!this.hasState(a)){this.getStateDom().className+=" edui-state-"+a}},removeState:function(a){if(this.hasState(a)){f.removeClasses(this.getStateDom(),["edui-state-"+a])}},getStateDom:function(){return this.getDom("state")},isChecked:function(){return this.hasState("checked")},setChecked:function(a){if(!this.isDisabled()&&a){this.addState("checked")}else{this.removeState("checked")}},isDisabled:function(){return this.hasState("disabled")},setDisabled:function(a){if(a){this.removeState("hover");this.removeState("checked");this.removeState("active");this.addState("disabled")}else{this.removeState("disabled")}}}})();(function(){var e=baidu.editor.utils,g=baidu.editor.ui.UIBase,h=baidu.editor.ui.Stateful,f=baidu.editor.ui.Button=function(a){this.initOptions(a);this.initButton()};f.prototype={uiName:"button",label:"",title:"",showIcon:true,showText:true,initButton:function(){this.initUIBase();this.Stateful_init()},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div id="##_state" stateful><div class="%%-wrap"><div id="##_body" unselectable="on" '+(this.title?'title="'+this.title+'"':"")+' class="%%-body" onmousedown="return false;" onclick="return $$._onClick();">'+(this.showIcon?'<div class="edui-box edui-icon"></div>':"")+(this.showText?'<div class="edui-box edui-label">'+this.label+"</div>":"")+"</div></div></div></div>"},postRender:function(){this.Stateful_postRender();this.setDisabled(this.disabled)},_onClick:function(){if(!this.isDisabled()){this.fireEvent("click")}}};e.inherits(f,g);e.extend(f.prototype,h)})();(function(){var l=baidu.editor.utils,j=baidu.editor.ui.uiUtils,h=baidu.editor.dom.domUtils,i=baidu.editor.ui.UIBase,k=baidu.editor.ui.Stateful,g=baidu.editor.ui.SplitButton=function(a){this.initOptions(a);this.initSplitButton()};g.prototype={popup:null,uiName:"splitbutton",title:"",initSplitButton:function(){this.initUIBase();this.Stateful_init();var a=this;if(this.popup!=null){var b=this.popup;this.popup=null;this.setPopup(b)}},_UIBase_postRender:i.prototype.postRender,postRender:function(){this.Stateful_postRender();this._UIBase_postRender()},setPopup:function(a){if(this.popup===a){return}if(this.popup!=null){this.popup.dispose()}a.addListener("show",l.bind(this._onPopupShow,this));a.addListener("hide",l.bind(this._onPopupHide,this));a.addListener("postrender",l.bind(function(){a.getDom("body").appendChild(j.createElementByHtml('<div id="'+this.popup.id+'_bordereraser" class="edui-bordereraser edui-background" style="width:'+(j.getClientRect(this.getDom()).width-2)+'px"></div>'));a.getDom().className+=" "+this.className},this));this.popup=a},_onPopupShow:function(){this.addState("opened")},_onPopupHide:function(){this.removeState("opened")},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div '+(this.title?'title="'+this.title+'"':"")+' id="##_state" stateful><div class="%%-body"><div id="##_button_body" class="edui-box edui-button-body" onclick="$$._onButtonClick(event, this);"><div class="edui-box edui-icon"></div></div><div class="edui-box edui-splitborder"></div><div class="edui-box edui-arrow" onclick="$$._onArrowClick();"></div></div></div></div>'},showPopup:function(){var a=j.getClientRect(this.getDom());a.top-=this.popup.SHADOW_RADIUS;a.height+=this.popup.SHADOW_RADIUS;this.popup.showAnchorRect(a)},_onArrowClick:function(a,b){if(!this.isDisabled()){this.showPopup()}},_onButtonClick:function(){if(!this.isDisabled()){this.fireEvent("buttonclick")}}};l.inherits(g,i);l.extend(g.prototype,k,true)})();(function(){var g=baidu.editor.utils,l=baidu.editor.ui.uiUtils,k=baidu.editor.ui.ColorPicker,i=baidu.editor.ui.Popup,h=baidu.editor.ui.SplitButton,j=baidu.editor.ui.ColorButton=function(a){this.initOptions(a);this.initColorButton()};j.prototype={initColorButton:function(){var a=this;this.popup=new i({content:new k({noColorText:a.editor.getLang("clearColor"),editor:a.editor,onpickcolor:function(b,c){a._onPickColor(c)},onpicknocolor:function(b,c){a._onPickNoColor(c)}}),editor:a.editor});this.initSplitButton()},_SplitButton_postRender:h.prototype.postRender,postRender:function(){this._SplitButton_postRender();this.getDom("button_body").appendChild(l.createElementByHtml('<div id="'+this.id+'_colorlump" class="edui-colorlump"></div>'));this.getDom().className+=" edui-colorbutton"},setColor:function(a){this.getDom("colorlump").style.backgroundColor=a;this.color=a},_onPickColor:function(a){if(this.fireEvent("pickcolor",a)!==false){this.setColor(a);this.popup.hide()}},_onPickNoColor:function(a){if(this.fireEvent("picknocolor")!==false){this.popup.hide()}}};g.inherits(j,h)})();(function(){var f=baidu.editor.utils,j=baidu.editor.ui.Popup,i=baidu.editor.ui.TablePicker,g=baidu.editor.ui.SplitButton,h=baidu.editor.ui.TableButton=function(a){this.initOptions(a);this.initTableButton()};h.prototype={initTableButton:function(){var a=this;this.popup=new j({content:new i({editor:a.editor,onpicktable:function(d,b,c){a._onPickTable(b,c)},onmore:function(){a.popup.hide();a.fireEvent("more")}}),editor:a.editor});this.initSplitButton()},_onPickTable:function(a,b){if(this.fireEvent("picktable",a,b)!==false){this.popup.hide()}}};f.inherits(h,g)})();(function(){var e=baidu.editor.utils,d=baidu.editor.ui.UIBase;var f=baidu.editor.ui.AutoTypeSetPicker=function(a){this.initOptions(a);this.initAutoTypeSetPicker()};f.prototype={initAutoTypeSetPicker:function(){this.initUIBase()},getHtmlTpl:function(){var b=this.editor,c=b.options.autotypeset,a=b.getLang("autoTypeSet");return'<div id="##" class="edui-autotypesetpicker %%"><div class="edui-autotypesetpicker-body"><table ><tr><td colspan="2"><input type="checkbox" name="mergeEmptyline" '+(c.mergeEmptyline?"checked":"")+">"+a.mergeLine+'</td><td colspan="2"><input type="checkbox" name="removeEmptyline" '+(c.removeEmptyline?"checked":"")+">"+a.delLine+'</td></tr><tr><td colspan="2"><input type="checkbox" name="removeClass" '+(c.removeClass?"checked":"")+">"+a.removeFormat+'</td><td colspan="2"><input type="checkbox" name="indent" '+(c.indent?"checked":"")+">"+a.indent+'</td></tr><tr><td colspan="2"><input type="checkbox" name="textAlign" '+(c.textAlign?"checked":"")+">"+a.alignment+'</td><td colspan="2" id="textAlignValue"><input type="radio" name="textAlignValue" value="left" '+((c.textAlign&&c.textAlign=="left")?"checked":"")+">"+b.getLang("justifyleft")+'<input type="radio" name="textAlignValue" value="center" '+((c.textAlign&&c.textAlign=="center")?"checked":"")+">"+b.getLang("justifycenter")+'<input type="radio" name="textAlignValue" value="right" '+((c.textAlign&&c.textAlign=="right")?"checked":"")+">"+b.getLang("justifyright")+' </tr><tr><td colspan="2"><input type="checkbox" name="imageBlockLine" '+(c.imageBlockLine?"checked":"")+">"+a.imageFloat+'</td><td colspan="2" id="imageBlockLineValue"><input type="radio" name="imageBlockLineValue" value="none" '+((c.imageBlockLine&&c.imageBlockLine=="none")?"checked":"")+">"+b.getLang("default")+'<input type="radio" name="imageBlockLineValue" value="left" '+((c.imageBlockLine&&c.imageBlockLine=="left")?"checked":"")+">"+b.getLang("justifyleft")+'<input type="radio" name="imageBlockLineValue" value="center" '+((c.imageBlockLine&&c.imageBlockLine=="center")?"checked":"")+">"+b.getLang("justifycenter")+'<input type="radio" name="imageBlockLineValue" value="right" '+((c.imageBlockLine&&c.imageBlockLine=="right")?"checked":"")+">"+b.getLang("justifyright")+'</tr><tr><td colspan="2"><input type="checkbox" name="clearFontSize" '+(c.clearFontSize?"checked":"")+">"+a.removeFontsize+'</td><td colspan="2"><input type="checkbox" name="clearFontFamily" '+(c.clearFontFamily?"checked":"")+">"+a.removeFontFamily+'</td></tr><tr><td colspan="4"><input type="checkbox" name="removeEmptyNode" '+(c.removeEmptyNode?"checked":"")+">"+a.removeHtml+'</td></tr><tr><td colspan="4"><input type="checkbox" name="pasteFilter" '+(c.pasteFilter?"checked":"")+">"+a.pasteFilter+'</td></tr><tr><td colspan="4" align="right"><button >'+a.run+"</button></td></tr></table></div></div>"},_UIBase_render:d.prototype.render};e.inherits(f,d)})();(function(){var g=baidu.editor.utils,k=baidu.editor.ui.Popup,j=baidu.editor.ui.AutoTypeSetPicker,h=baidu.editor.ui.SplitButton,i=baidu.editor.ui.AutoTypeSetButton=function(a){this.initOptions(a);this.initAutoTypeSetButton()};function l(E){var y=E.editor.options.autotypeset,A=E.getDom(),b=domUtils.getElementsByTagName(A,"input");for(var e=b.length-1,B;B=b[e--];){if(B.getAttribute("type")=="checkbox"){var D=B.getAttribute("name");y[D]&&delete y[D];if(B.checked){var d=document.getElementById(D+"Value");if(d){if(/input/ig.test(d.tagName)){y[D]=d.value}else{var z=d.getElementsByTagName("input");for(var x=z.length-1,C;C=z[x--];){if(C.checked){y[D]=C.value;break}}}}else{y[D]=true}}}}var a=domUtils.getElementsByTagName(A,"select");for(var e=0,f;f=a[e++];){var c=f.getAttribute("name");y[c]=y[c]?f.value:""}E.editor.options.autotypeset=y}i.prototype={initAutoTypeSetButton:function(){var a=this;this.popup=new k({content:new j({editor:a.editor}),editor:a.editor,hide:function(){if(!this._hidden&&this.getDom()){l(this);this.getDom().style.display="none";this._hidden=true;this.fireEvent("hide")}}});var b=0;this.popup.addListener("postRenderAfter",function(){var d=this;if(b){return}var e=this.getDom(),c=e.getElementsByTagName("button")[0];c.onclick=function(){l(d);a.editor.execCommand("autotypeset")};b=1});this.initSplitButton()}};g.inherits(i,h)})();(function(){var f=baidu.editor.utils,e=baidu.editor.ui.uiUtils,g=baidu.editor.ui.UIBase,h=baidu.editor.ui.Toolbar=function(a){this.initOptions(a);this.initToolbar()};h.prototype={items:null,initToolbar:function(){this.items=this.items||[];this.initUIBase()},add:function(a){this.items.push(a)},getHtmlTpl:function(){var a=[];for(var b=0;b<this.items.length;b++){a[b]=this.items[b].renderHtml()}return'<div id="##" class="edui-toolbar %%" onselectstart="return false;" onmousedown="return $$._onMouseDown(event, this);">'+a.join("")+"</div>"},postRender:function(){var a=this.getDom();for(var b=0;b<this.items.length;b++){this.items[b].postRender()}e.makeUnselectable(a)},_onMouseDown:function(){return false}};f.inherits(h,g)})();(function(){var k=baidu.editor.utils,o=baidu.editor.dom.domUtils,r=baidu.editor.ui.uiUtils,q=baidu.editor.ui.UIBase,j=baidu.editor.ui.Popup,s=baidu.editor.ui.Stateful,n=baidu.editor.ui.Menu=function(a){this.initOptions(a);this.initMenu()};var m={renderHtml:function(){return'<div class="edui-menuitem edui-menuseparator"><div class="edui-menuseparator-inner"></div></div>'},postRender:function(){},queryAutoHide:function(){return true}};n.prototype={items:null,uiName:"menu",initMenu:function(){this.items=this.items||[];this.initPopup();this.initItems()},initItems:function(){for(var b=0;b<this.items.length;b++){var a=this.items[b];if(a=="-"){this.items[b]=this.getSeparator()}else{if(!(a instanceof l)){this.items[b]=this.createItem(a)}}}},getSeparator:function(){return m},createItem:function(a){return new l(a)},_Popup_getContentHtmlTpl:j.prototype.getContentHtmlTpl,getContentHtmlTpl:function(){if(this.items.length==0){return this._Popup_getContentHtmlTpl()}var a=[];for(var c=0;c<this.items.length;c++){var b=this.items[c];a[c]=b.renderHtml()}return('<div class="%%-body">'+a.join("")+"</div>")},_Popup_postRender:j.prototype.postRender,postRender:function(){var a=this;for(var c=0;c<this.items.length;c++){var b=this.items[c];b.ownerMenu=this;b.postRender()}o.on(this.getDom(),"mouseover",function(f){f=f||event;var d=f.relatedTarget||f.fromElement;var e=a.getDom();if(!r.contains(e,d)&&e!==d){a.fireEvent("over")}});this._Popup_postRender()},queryAutoHide:function(b){if(b){if(r.contains(this.getDom(),b)){return false}for(var c=0;c<this.items.length;c++){var a=this.items[c];if(a.queryAutoHide(b)===false){return false}}}},clearItems:function(){for(var b=0;b<this.items.length;b++){var a=this.items[b];clearTimeout(a._showingTimer);clearTimeout(a._closingTimer);if(a.subMenu){a.subMenu.destroy()}}this.items=[]},destroy:function(){if(this.getDom()){o.remove(this.getDom())}this.clearItems()},dispose:function(){this.destroy()}};k.inherits(n,j);var l=baidu.editor.ui.MenuItem=function(a){this.initOptions(a);this.initUIBase();this.Stateful_init();if(this.subMenu&&!(this.subMenu instanceof n)){this.subMenu=new n(this.subMenu)}};l.prototype={label:"",subMenu:null,ownerMenu:null,uiName:"menuitem",alwalysHoverable:true,getHtmlTpl:function(){return'<div id="##" class="%%" stateful onclick="$$._onClick(event, this);"><div class="%%-body">'+this.renderLabelHtml()+"</div></div>"},postRender:function(){var a=this;this.addListener("over",function(){a.ownerMenu.fireEvent("submenuover",a);if(a.subMenu){a.delayShowSubMenu()}});if(this.subMenu){this.getDom().className+=" edui-hassubmenu";this.subMenu.render();this.addListener("out",function(){a.delayHideSubMenu()});this.subMenu.addListener("over",function(){clearTimeout(a._closingTimer);a._closingTimer=null;a.addState("opened")});this.ownerMenu.addListener("hide",function(){a.hideSubMenu()});this.ownerMenu.addListener("submenuover",function(b,c){if(c!==a){a.delayHideSubMenu()}});this.subMenu._bakQueryAutoHide=this.subMenu.queryAutoHide;this.subMenu.queryAutoHide=function(b){if(b&&r.contains(a.getDom(),b)){return false}return this._bakQueryAutoHide(b)}}this.getDom().style.tabIndex="-1";r.makeUnselectable(this.getDom());this.Stateful_postRender()},delayShowSubMenu:function(){var a=this;if(!a.isDisabled()){a.addState("opened");clearTimeout(a._showingTimer);clearTimeout(a._closingTimer);a._closingTimer=null;a._showingTimer=setTimeout(function(){a.showSubMenu()},250)}},delayHideSubMenu:function(){var a=this;if(!a.isDisabled()){a.removeState("opened");clearTimeout(a._showingTimer);if(!a._closingTimer){a._closingTimer=setTimeout(function(){if(!a.hasState("opened")){a.hideSubMenu()}a._closingTimer=null},400)}}},renderLabelHtml:function(){return'<div class="edui-arrow"></div><div class="edui-box edui-icon"></div><div class="edui-box edui-label %%-label">'+(this.label||"")+"</div>"},getStateDom:function(){return this.getDom()},queryAutoHide:function(a){if(this.subMenu&&this.hasState("opened")){return this.subMenu.queryAutoHide(a)}},_onClick:function(b,a){if(this.hasState("disabled")){return}if(this.fireEvent("click",b,a)!==false){if(this.subMenu){this.showSubMenu()}else{j.postHide()}}},showSubMenu:function(){var a=r.getClientRect(this.getDom());a.right-=5;a.left+=2;a.width-=7;a.top-=4;a.bottom+=4;a.height+=8;this.subMenu.showAnchorRect(a,true,true)},hideSubMenu:function(){this.subMenu.hide()}};k.inherits(l,q);k.extend(l.prototype,s,true)})();(function(){var f=baidu.editor.utils,i=baidu.editor.ui.uiUtils,h=baidu.editor.ui.Menu,g=baidu.editor.ui.SplitButton,j=baidu.editor.ui.Combox=function(a){this.initOptions(a);this.initCombox()};j.prototype={uiName:"combox",initCombox:function(){var a=this;this.items=this.items||[];for(var c=0;c<this.items.length;c++){var b=this.items[c];b.uiName="listitem";b.index=c;b.onclick=function(){a.selectByIndex(this.index)}}this.popup=new h({items:this.items,uiName:"list",editor:this.editor});this.initSplitButton()},_SplitButton_postRender:g.prototype.postRender,postRender:function(){this._SplitButton_postRender();this.setLabel(this.label||"");this.setValue(this.initValue||"")},showPopup:function(){var a=i.getClientRect(this.getDom());a.top+=1;a.bottom-=1;a.height-=2;this.popup.showAnchorRect(a)},getValue:function(){return this.value},setValue:function(a){var b=this.indexByValue(a);if(b!=-1){this.selectedIndex=b;this.setLabel(this.items[b].label);this.value=this.items[b].value}else{this.selectedIndex=-1;this.setLabel(this.getLabelForUnknowValue(a));this.value=a}},setLabel:function(a){this.getDom("button_body").innerHTML=a;this.label=a},getLabelForUnknowValue:function(a){return a},indexByValue:function(a){for(var b=0;b<this.items.length;b++){if(a==this.items[b].value){return b}}return -1},getItem:function(a){return this.items[a]},selectByIndex:function(a){if(a<this.items.length&&this.fireEvent("select",a)!==false){this.selectedIndex=a;this.value=this.items[a].value;this.setLabel(this.items[a].label)}}};f.inherits(j,g)})();(function(){var k=baidu.editor.utils,o=baidu.editor.dom.domUtils,s=baidu.editor.ui.uiUtils,n=baidu.editor.ui.Mask,r=baidu.editor.ui.UIBase,m=baidu.editor.ui.Button,l=baidu.editor.ui.Dialog=function(a){this.initOptions(k.extend({autoReset:true,draggable:true,onok:function(){},oncancel:function(){},onclose:function(b,c){return c?this.onok():this.oncancel()}},a));this.initDialog()};var q;var j;l.prototype={draggable:false,uiName:"dialog",initDialog:function(){var a=this;this.initUIBase();this.modalMask=(q||(q=new n({className:"edui-dialog-modalmask"})));this.dragMask=(j||(j=new n({className:"edui-dialog-dragmask"})));this.closeButton=new m({className:"edui-dialog-closebutton",title:a.closeDialog,onclick:function(){a.close(false)}});if(this.buttons){for(var b=0;b<this.buttons.length;b++){if(!(this.buttons[b] instanceof m)){this.buttons[b]=new m(this.buttons[b])}}}},fitSize:function(){var b=this.getDom("body");var a=this.mesureSize();b.style.width=a.width+"px";b.style.height=a.height+"px";return a},safeSetOffset:function(e){var b=this;var d=b.getDom();var f=s.getViewportRect();var c=s.getClientRect(d);var g=e.left;if(g+c.width>f.right){g=f.right-c.width}var a=e.top;if(a+c.height>f.bottom){a=f.bottom-c.height}d.style.left=Math.max(g,0)+"px";d.style.top=Math.max(a,0)+"px"},showAtCenter:function(){this.getDom().style.display="";var e=s.getViewportRect();var d=this.fitSize();var f=this.getDom("titlebar").offsetHeight|0;var a=e.width/2-d.width/2;var b=e.height/2-(d.height-f)/2-f;var c=this.getDom();this.safeSetOffset({left:Math.max(a|0,0),top:Math.max(b|0,0)});if(!o.hasClass(c,"edui-state-centered")){c.className+=" edui-state-centered"}this._show()},getContentHtml:function(){var a="";if(typeof this.content=="string"){a=this.content}else{if(this.iframeUrl){a='<span id="'+this.id+'_contmask" class="dialogcontmask"></span><iframe id="'+this.id+'_iframe" class="%%-iframe" height="100%" width="100%" frameborder="0" src="'+this.iframeUrl+'"></iframe>'}}return a},getHtmlTpl:function(){var b="";if(this.buttons){var a=[];for(var c=0;c<this.buttons.length;c++){a[c]=this.buttons[c].renderHtml()}b='<div class="%%-foot"><div id="##_buttons" class="%%-buttons">'+a.join("")+"</div></div>"}return'<div id="##" class="%%"><div class="%%-wrap"><div id="##_body" class="%%-body"><div class="%%-shadow"></div><div id="##_titlebar" class="%%-titlebar"><div class="%%-draghandle" onmousedown="$$._onTitlebarMouseDown(event, this);"><span class="%%-caption">'+(this.title||"")+"</span></div>"+this.closeButton.renderHtml()+'</div><div id="##_content" class="%%-content">'+(this.autoReset?"":this.getContentHtml())+"</div>"+b+"</div></div></div>"},postRender:function(){if(!this.modalMask.getDom()){this.modalMask.render();this.modalMask.hide()}if(!this.dragMask.getDom()){this.dragMask.render();this.dragMask.hide()}var a=this;this.addListener("show",function(){a.modalMask.show(this.getDom().style.zIndex-2)});this.addListener("hide",function(){a.modalMask.hide()});if(this.buttons){for(var b=0;b<this.buttons.length;b++){this.buttons[b].postRender()}}o.on(window,"resize",function(){setTimeout(function(){if(!a.isHidden()){a.safeSetOffset(s.getClientRect(a.getDom()))}})});this._hide()},mesureSize:function(){var c=this.getDom("body");var b=s.getClientRect(this.getDom("content")).width;var a=c.style;a.width=b;return s.getClientRect(c)},_onTitlebarMouseDown:function(d,c){if(this.draggable){var a;var e=s.getViewportRect();var b=this;s.startDrag(d,{ondragstart:function(){a=s.getClientRect(b.getDom());b.getDom("contmask").style.visibility="visible";b.dragMask.show(b.getDom().style.zIndex-1)},ondragmove:function(i,f){var g=a.left+i;var h=a.top+f;b.safeSetOffset({left:g,top:h})},ondragstop:function(){b.getDom("contmask").style.visibility="hidden";o.removeClasses(b.getDom(),["edui-state-centered"]);b.dragMask.hide()}})}},reset:function(){this.getDom("content").innerHTML=this.getContentHtml()},_show:function(){if(this._hidden){this.getDom().style.display="";this.editor.container.style.zIndex&&(this.getDom().style.zIndex=this.editor.container.style.zIndex*1+10);this._hidden=false;this.fireEvent("show");baidu.editor.ui.uiUtils.getFixedLayer().style.zIndex=this.getDom().style.zIndex-4}},isHidden:function(){return this._hidden},_hide:function(){if(!this._hidden){this.getDom().style.display="none";this.getDom().style.zIndex="";this._hidden=true;this.fireEvent("hide")}},open:function(){if(this.autoReset){try{this.reset()}catch(a){this.render();this.open()}}this.showAtCenter();if(this.iframeUrl){try{this.getDom("iframe").focus()}catch(b){}}},_onCloseButtonClick:function(b,a){this.close(false)},close:function(a){if(this.fireEvent("close",a)!==false){this._hide()}}};k.inherits(l,r)})();(function(){var e=baidu.editor.utils,h=baidu.editor.ui.Menu,f=baidu.editor.ui.SplitButton,g=baidu.editor.ui.MenuButton=function(a){this.initOptions(a);this.initMenuButton()};g.prototype={initMenuButton:function(){var a=this;this.uiName="menubutton";this.popup=new h({items:a.items,className:a.className,editor:a.editor});this.popup.addListener("show",function(){var b=this;for(var c=0;c<b.items.length;c++){b.items[c].removeState("checked");if(b.items[c].value==a._value){b.items[c].addState("checked");this.value=a._value}}});this.initSplitButton()},setValue:function(a){this._value=a}};e.inherits(g,f)})();(function(){var l=baidu.editor.utils;var v=baidu.editor.ui;var A=v.Dialog;v.Dialog=function(b){var a=new A(b);a.addListener("hide",function(){if(a.editor){var d=a.editor;try{if(browser.gecko){var c=d.window.scrollY,f=d.window.scrollX;d.body.focus();d.window.scrollTo(f,c)}else{d.focus()}}catch(e){}}});return a};var z={anchor:"~/dialogs/anchor/anchor.html",insertimage:"~/dialogs/image/image.html",inserttable:"~/dialogs/table/table.html",link:"~/dialogs/link/link.html",spechars:"~/dialogs/spechars/spechars.html",searchreplace:"~/dialogs/searchreplace/searchreplace.html",map:"~/dialogs/map/map.html",gmap:"~/dialogs/gmap/gmap.html",insertvideo:"~/dialogs/video/video.html",help:"~/dialogs/help/help.html",highlightcode:"~/dialogs/highlightcode/highlightcode.html",emotion:"~/dialogs/emotion/emotion.html",wordimage:"~/dialogs/wordimage/wordimage.html",attachment:"~/dialogs/attachment/attachment.html",insertframe:"~/dialogs/insertframe/insertframe.html",edittd:"~/dialogs/table/edittd.html",webapp:"~/dialogs/webapp/webapp.html",snapscreen:"~/dialogs/snapscreen/snapscreen.html",scrawl:"~/dialogs/scrawl/scrawl.html",template:"~/dialogs/template/template.html",background:"~/dialogs/background/background.html"};var w=["undo","redo","formatmatch","bold","italic","underline","touppercase","tolowercase","strikethrough","subscript","superscript","source","indent","outdent","blockquote","pasteplain","pagebreak","selectall","print","preview","horizontal","removeformat","time","date","unlink","insertparagraphbeforetable","insertrow","insertcol","mergeright","mergedown","deleterow","deletecol","splittorows","splittocols","splittocells","mergecells","deletetable"];for(var y=0,F;F=w[y++];){F=F.toLowerCase();v[F]=function(a){return function(b){var c=new v.Button({className:"edui-for-"+a,title:b.options.labelMap[a]||b.getLang("labelMap."+a)||"",onclick:function(){b.execCommand(a)},showText:false});b.addListener("selectionchange",function(f,g,d){var e=b.queryCommandState(a);if(e==-1){c.setDisabled(true);c.setChecked(false)}else{if(!d){c.setDisabled(false);c.setChecked(e)}}});return c}}(F)}v.cleardoc=function(b){var a=new v.Button({className:"edui-for-cleardoc",title:b.options.labelMap.cleardoc||b.getLang("labelMap.cleardoc")||"",onclick:function(){if(confirm(b.getLang("confirmClear"))){b.execCommand("cleardoc")}}});b.addListener("selectionchange",function(){a.setDisabled(b.queryCommandState("cleardoc")==-1)});return a};var r={justify:["left","right","center","justify"],imagefloat:["none","left","center","right"],directionality:["ltr","rtl"]};for(var D in r){(function(c,b){for(var d=0,a;a=b[d++];){(function(e){v[c.replace("float","")+e]=function(g){var f=new v.Button({className:"edui-for-"+c.replace("float","")+e,title:g.options.labelMap[c.replace("float","")+e]||g.getLang("labelMap."+c.replace("float","")+e)||"",onclick:function(){g.execCommand(c,e)}});g.addListener("selectionchange",function(j,k,h){f.setDisabled(g.queryCommandState(c)==-1);f.setChecked(g.queryCommandValue(c)==e&&!h)});return f}})(a)}})(D,r[D])}for(var y=0,F;F=["backcolor","forecolor"][y++];){v[F]=function(a){return function(b){var c=new v.ColorButton({className:"edui-for-"+a,color:"default",title:b.options.labelMap[a]||b.getLang("labelMap."+a)||"",editor:b,onpickcolor:function(d,e){b.execCommand(a,e)},onpicknocolor:function(){b.execCommand(a,"default");this.setColor("transparent");this.color="default"},onbuttonclick:function(){b.execCommand(a,this.color)}});b.addListener("selectionchange",function(){c.setDisabled(b.queryCommandState(a)==-1)});return c}}(F)}var x={noOk:["searchreplace","help","spechars","webapp"],ok:["attachment","anchor","link","insertimage","map","gmap","insertframe","wordimage","insertvideo","highlightcode","insertframe","edittd","scrawl","template","background"]};for(var D in x){(function(c,b){for(var d=0,a;a=b[d++];){if(browser.opera&&a==="searchreplace"){continue}(function(e){v[e]=function(k,g,f){g=g||(k.options.iframeUrlMap||{})[e]||z[e];f=k.options.labelMap[e]||k.getLang("labelMap."+e)||"";var h;if(g){h=new v.Dialog(l.extend({iframeUrl:k.ui.mapUrl(g),editor:k,className:"edui-for-"+e,title:f,closeDialog:k.getLang("closeDialog")},c=="ok"?{buttons:[{className:"edui-okbutton",label:k.getLang("ok"),onclick:function(){h.close(true)}},{className:"edui-cancelbutton",label:k.getLang("cancel"),onclick:function(){h.close(false)}}]}:{}));k.ui._dialogs[e+"Dialog"]=h}var j=new v.Button({className:"edui-for-"+e,title:f,onclick:function(){if(h){switch(e){case"wordimage":k.execCommand("wordimage","word_img");if(k.word_img){h.render();h.open()}break;case"scrawl":if(k.queryCommandState("scrawl")!=-1){h.render();h.open()}break;default:h.render();h.open()}}},disabled:e=="scrawl"&&k.queryCommandState("scrawl")==-1});k.addListener("selectionchange",function(){var n={edittd:1,edittable:1};if(e in n){return}var m=k.queryCommandState(e);j.setDisabled(m==-1);j.setChecked(m)});return j}})(a.toLowerCase())}})(D,x[D])}v.snapscreen=function(e,a,b){b=e.options.labelMap.snapscreen||e.getLang("labelMap.snapscreen")||"";var c=new v.Button({className:"edui-for-snapscreen",title:b,onclick:function(){e.execCommand("snapscreen")},disabled:!browser.ie});if(browser.ie){a=a||(e.options.iframeUrlMap||{})["snapscreen"]||z.snapscreen;if(a){var d=new v.Dialog({iframeUrl:e.ui.mapUrl(a),editor:e,className:"edui-for-snapscreen",title:b,buttons:[{className:"edui-okbutton",label:e.getLang("ok"),onclick:function(){d.close(true)}},{className:"edui-cancelbutton",label:e.getLang("cancel"),onclick:function(){d.close(false)}}]});d.render();e.ui._dialogs.snapscreenDialog=d}}e.addListener("selectionchange",function(){c.setDisabled(e.queryCommandState("snapscreen")==-1)});return c};v.fontfamily=function(d,a,g){a=d.options.fontfamily||[];g=d.options.labelMap.fontfamily||d.getLang("labelMap.fontfamily")||"";for(var e=0,f,c=[];f=a[e];e++){var h=d.getLang("fontfamily")[f.name]||"";(function(k,j){c.push({label:k,value:j,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="font-family:'+l.unhtml(this.value)+'">'+(this.label||"")+"</div>"}})})(f.label||h,f.val)}var b=new v.Combox({editor:d,items:c,onselect:function(j,k){d.execCommand("FontFamily",this.items[k].value)},onbuttonclick:function(){this.showPopup()},title:g,initValue:g,className:"edui-for-fontfamily",indexByValue:function(k){if(k){for(var m=0,j;j=this.items[m];m++){if(j.value.indexOf(k)!=-1){return m}}}return -1}});d.addListener("selectionchange",function(j,k,m){if(!m){var n=d.queryCommandState("FontFamily");if(n==-1){b.setDisabled(true)}else{b.setDisabled(false);var o=d.queryCommandValue("FontFamily");o&&(o=o.replace(/['"]/g,"").split(",")[0]);b.setValue(o)}}});return b};v.fontsize=function(d,a,g){g=d.options.labelMap.fontsize||d.getLang("labelMap.fontsize")||"";a=a||d.options.fontsize||[];var c=[];for(var e=0;e<a.length;e++){var f=a[e]+"px";c.push({label:f,value:f,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="line-height:1;font-size:'+this.value+'">'+(this.label||"")+"</div>"}})}var b=new v.Combox({editor:d,items:c,title:g,initValue:g,onselect:function(j,h){d.execCommand("FontSize",this.items[h].value)},onbuttonclick:function(){this.showPopup()},className:"edui-for-fontsize"});d.addListener("selectionchange",function(k,j,m){if(!m){var h=d.queryCommandState("FontSize");if(h==-1){b.setDisabled(true)}else{b.setDisabled(false);b.setValue(d.queryCommandValue("FontSize"))}}});return b};v.paragraph=function(e,c,a){a=e.options.labelMap.paragraph||e.getLang("labelMap.paragraph")||"";c=e.options.paragraph||[];var b=[];for(var f in c){b.push({value:f,label:c[f]||e.getLang("paragraph")[f],renderLabelHtml:function(){return'<div class="edui-label %%-label"><span class="edui-for-'+this.value+'">'+(this.label||"")+"</span></div>"}})}var d=new v.Combox({editor:e,items:b,title:a,initValue:a,className:"edui-for-paragraph",onselect:function(h,g){e.execCommand("Paragraph",this.items[g].value)},onbuttonclick:function(){this.showPopup()}});e.addListener("selectionchange",function(k,n,j){if(!j){var m=e.queryCommandState("Paragraph");if(m==-1){d.setDisabled(true)}else{d.setDisabled(false);var g=e.queryCommandValue("Paragraph");var h=d.indexByValue(g);if(h!=-1){d.setValue(g)}else{d.setValue(d.initValue)}}}});return d};v.customstyle=function(c){var h=c.options.customstyle||[],g=c.options.labelMap.customstyle||c.getLang("labelMap.customstyle")||"";if(!h){return}var d=c.getLang("customstyle");for(var e=0,b=[],f;f=h[e++];){(function(j){var k={};k.label=j.label?j.label:d[j.name];k.style=j.style;k.className=j.className;k.tag=j.tag;b.push({label:k.label,value:k,renderLabelHtml:function(){return'<div class="edui-label %%-label"><'+k.tag+" "+(k.className?' class="'+k.className+'"':"")+(k.style?' style="'+k.style+'"':"")+">"+k.label+"</"+k.tag+"></div>"}})})(f)}var a=new v.Combox({editor:c,items:b,title:g,initValue:g,className:"edui-for-customstyle",onselect:function(j,k){c.execCommand("customstyle",this.items[k].value)},onbuttonclick:function(){this.showPopup()},indexByValue:function(k){for(var j=0,m;m=this.items[j++];){if(m.label==k){return j-1}}return -1}});c.addListener("selectionchange",function(q,j,m){if(!m){var n=c.queryCommandState("customstyle");if(n==-1){a.setDisabled(true)}else{a.setDisabled(false);var o=c.queryCommandValue("customstyle");var k=a.indexByValue(o);if(k!=-1){a.setValue(o)}else{a.setValue(a.initValue)}}}});return a};v.inserttable=function(d,f,b){f=f||(d.options.iframeUrlMap||{})["inserttable"]||z.inserttable;b=d.options.labelMap.inserttable||d.getLang("labelMap.inserttable")||"";if(f){var a=new v.Dialog({iframeUrl:d.ui.mapUrl(f),editor:d,className:"edui-for-inserttable",title:b,buttons:[{className:"edui-okbutton",label:d.getLang("ok"),onclick:function(){a.close(true)}},{className:"edui-cancelbutton",label:d.getLang("cancel"),onclick:function(){a.close(false)}}]});a.render();d.ui._dialogs.inserttableDialog=a}var e=function(){if(a){if(browser.webkit){a.open();a.close()}a.open()}};var c=new v.TableButton({editor:d,title:b,className:"edui-for-inserttable",onpicktable:function(g,h,j){d.execCommand("InsertTable",{numRows:j,numCols:h,border:1})},onmore:e,onbuttonclick:e});d.addListener("selectionchange",function(){c.setDisabled(d.queryCommandState("inserttable")==-1)});return c};v.lineheight=function(d){var a=d.options.lineheight;for(var e=0,f,c=[];f=a[e++];){c.push({label:f,value:f,onclick:function(){d.execCommand("lineheight",this.value)}})}var b=new v.MenuButton({editor:d,className:"edui-for-lineheight",title:d.options.labelMap.lineheight||d.getLang("labelMap.lineheight")||"",items:c,onbuttonclick:function(){var g=d.queryCommandValue("LineHeight")||this.value;d.execCommand("LineHeight",g)}});d.addListener("selectionchange",function(){var h=d.queryCommandState("LineHeight");if(h==-1){b.setDisabled(true)}else{b.setDisabled(false);var g=d.queryCommandValue("LineHeight");g&&b.setValue((g+"").replace(/cm/,""));b.setChecked(h)}});return b};var C=["top","bottom"];for(var E=0,u;u=C[E++];){(function(a){v["rowspacing"+a]=function(e){var b=e.options["rowspacing"+a];for(var f=0,g,d=[];g=b[f++];){d.push({label:g,value:g,onclick:function(){e.execCommand("rowspacing",this.value,a)}})}var c=new v.MenuButton({editor:e,className:"edui-for-rowspacing"+a,title:e.options.labelMap["rowspacing"+a]||e.getLang("labelMap.rowspacing"+a)||"",items:d,onbuttonclick:function(){var h=e.queryCommandValue("rowspacing",a)||this.value;e.execCommand("rowspacing",h,a)}});e.addListener("selectionchange",function(){var h=e.queryCommandState("rowspacing",a);if(h==-1){c.setDisabled(true)}else{c.setDisabled(false);var j=e.queryCommandValue("rowspacing",a);j&&c.setValue((j+"").replace(/%/,""));c.setChecked(h)}});return c}})(u)}var G=["insertorderedlist","insertunorderedlist"];for(var B=0,i;i=G[B++];){(function(a){v[a]=function(f){var d=f.options[a],b=function(){f.execCommand(a,this.value)},c=[];for(var g in d){c.push({label:d[g]||f.getLang()[a][g]||"",value:g,onclick:b})}var e=new v.MenuButton({editor:f,className:"edui-for-"+a,title:f.getLang("labelMap."+a)||"",items:c,onbuttonclick:function(){var h=f.queryCommandValue(a)||this.value;f.execCommand(a,h)}});f.addListener("selectionchange",function(){var h=f.queryCommandState(a);if(h==-1){e.setDisabled(true)}else{e.setDisabled(false);var j=f.queryCommandValue(a);e.setValue(j);e.setChecked(h)}});return e}})(i)}v.fullscreen=function(b,c){c=b.options.labelMap.fullscreen||b.getLang("labelMap.fullscreen")||"";var a=new v.Button({className:"edui-for-fullscreen",title:c,onclick:function(){if(b.ui){b.ui.setFullScreen(!b.ui.isFullScreen())}this.setChecked(b.ui.isFullScreen())}});b.addListener("selectionchange",function(){var d=b.queryCommandState("fullscreen");a.setDisabled(d==-1);a.setChecked(b.ui.isFullScreen())});return a};v.emotion=function(a,b){var c=new v.MultiMenuPop({title:a.options.labelMap.emotion||a.getLang("labelMap.emotion")||"",editor:a,className:"edui-for-emotion",iframeUrl:a.ui.mapUrl(b||(a.options.iframeUrlMap||{})["emotion"]||z.emotion)});a.addListener("selectionchange",function(){c.setDisabled(a.queryCommandState("emotion")==-1)});return c};v.autotypeset=function(b){var a=new v.AutoTypeSetButton({editor:b,title:b.options.labelMap.autotypeset||b.getLang("labelMap.autotypeset")||"",className:"edui-for-autotypeset",onbuttonclick:function(){b.execCommand("autotypeset")}});b.addListener("selectionchange",function(){a.setDisabled(b.queryCommandState("autotypeset")==-1)});return a}})();(function(){var f=baidu.editor.utils,i=baidu.editor.ui.uiUtils,h=baidu.editor.ui.UIBase,g=baidu.editor.dom.domUtils;function j(a){this.initOptions(a);this.initEditorUI()}j.prototype={uiName:"editor",initEditorUI:function(){this.editor.ui=this;this._dialogs={};this.initUIBase();this._initToolbars();var b=this.editor,a=this;b.addListener("ready",function(){b.getDialog=function(d){return b.ui._dialogs[d+"Dialog"]};g.on(b.window,"scroll",function(){baidu.editor.ui.Popup.postHide()});if(b.options.elementPathEnabled){b.ui.getDom("elementpath").innerHTML='<div class="edui-editor-breadcrumb">'+b.getLang("elementPathTip")+":</div>"}if(b.options.wordCount){b.ui.getDom("wordcount").innerHTML=b.getLang("wordCountTip");b.addListener("keyup",function(e,l){var d=l.keyCode||l.which;if(d==32){a._wordCount()}})}if(!b.options.elementPathEnabled&&!b.options.wordCount){b.ui.getDom("elementpath").style.display="none";b.ui.getDom("wordcount").style.display="none"}if(!b.selection.isFocus()){return}b.fireEvent("selectionchange",false,true)});b.addListener("mousedown",function(e,l){var d=l.target||l.srcElement;baidu.editor.ui.Popup.postHide(d)});b.addListener("contextmenu",function(d,e){baidu.editor.ui.Popup.postHide()});b.addListener("selectionchange",function(){if(b.options.elementPathEnabled){a[(b.queryCommandState("elementpath")==-1?"dis":"en")+"ableElementPath"]()}if(b.options.wordCount){a[(b.queryCommandState("wordcount")==-1?"dis":"en")+"ableWordCount"]()}});var c=new baidu.editor.ui.Popup({editor:b,content:"",className:"edui-bubble",_onEditButtonClick:function(){this.hide();b.ui._dialogs.linkDialog.open()},_onImgEditButtonClick:function(d){this.hide();b.ui._dialogs[d]&&b.ui._dialogs[d].open()},_onImgSetFloat:function(d){this.hide();b.execCommand("imagefloat",d)},_setIframeAlign:function(l){var e=c.anchorEl;var d=e.cloneNode(true);switch(l){case -2:d.setAttribute("align","");break;case -1:d.setAttribute("align","left");break;case 1:d.setAttribute("align","right");break;case 2:d.setAttribute("align","middle");break}e.parentNode.insertBefore(d,e);g.remove(e);c.anchorEl=d;c.showAnchor(c.anchorEl)},_updateIframe:function(){b._iframe=c.anchorEl;b.ui._dialogs.insertframeDialog.open();c.hide()},_onRemoveButtonClick:function(d){b.execCommand(d);this.hide()},queryAutoHide:function(d){if(d&&d.ownerDocument==b.document){if(d.tagName.toLowerCase()=="img"||g.findParentByTagName(d,"a",true)){return d!==c.anchorEl}}return baidu.editor.ui.Popup.prototype.queryAutoHide.call(this,d)}});c.render();if(b.options.imagePopup){b.addListener("mouseover",function(e,n){n=n||window.event;var d=n.target||n.srcElement;if(b.ui._dialogs.insertframeDialog&&/iframe/ig.test(d.tagName)){var m=c.formatHtml("<nobr>"+b.getLang("property")+': <span onclick=$$._setIframeAlign(-2) class="edui-clickable">'+b.getLang("default")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(-1) class="edui-clickable">'+b.getLang("justifyleft")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(1) class="edui-clickable">'+b.getLang("justifyright")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(2) class="edui-clickable">'+b.getLang("justifycenter")+'</span> <span onclick="$$._updateIframe( this);" class="edui-clickable">'+b.getLang("modify")+"</span></nobr>");if(m){c.getDom("content").innerHTML=m;c.anchorEl=d;c.showAnchor(c.anchorEl)}else{c.hide()}}});b.addListener("selectionchange",function(d,v){if(!v){return}var s="",t=b.selection.getRange().getClosedNode(),y=b.ui._dialogs;if(t&&t.tagName=="IMG"){var w="insertimageDialog";if(t.className.indexOf("edui-faked-video")!=-1){w="insertvideoDialog"}if(t.className.indexOf("edui-faked-webapp")!=-1){w="webappDialog"}if(t.src.indexOf("http://api.map.baidu.com")!=-1){w="mapDialog"}if(t.src.indexOf("http://maps.google.com/maps/api/staticmap")!=-1){w="gmapDialog"}if(t.getAttribute("anchorname")){w="anchorDialog";s=c.formatHtml("<nobr>"+b.getLang("property")+': <span onclick=$$._onImgEditButtonClick("anchorDialog") class="edui-clickable">'+b.getLang("modify")+"</span>&nbsp;&nbsp;<span onclick=$$._onRemoveButtonClick('anchor') class=\"edui-clickable\">"+b.getLang("delete")+"</span></nobr>")}if(t.getAttribute("word_img")){b.word_img=[t.getAttribute("word_img")];w="wordimageDialog"}if(!y[w]){return}!s&&(s=c.formatHtml("<nobr>"+b.getLang("property")+': <span onclick=$$._onImgSetFloat("none") class="edui-clickable">'+b.getLang("default")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("left") class="edui-clickable">'+b.getLang("justifyleft")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("right") class="edui-clickable">'+b.getLang("justifyright")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("center") class="edui-clickable">'+b.getLang("justifycenter")+"</span>&nbsp;&nbsp;<span onclick=\"$$._onImgEditButtonClick('"+w+'\');" class="edui-clickable">'+b.getLang("modify")+"</span></nobr>"))}if(b.ui._dialogs.linkDialog){var e=g.findParentByTagName(b.selection.getStart(),"a",true);var x;if(e&&(x=(e.getAttribute("data_ue_src")||e.getAttribute("href",2)))){var u=x;if(x.length>30){u=x.substring(0,20)+"..."}if(s){s+='<div style="height:5px;"></div>'}s+=c.formatHtml("<nobr>"+b.getLang("anthorMsg")+': <a target="_blank" href="'+x+'" title="'+x+'" >'+u+'</a> <span class="edui-clickable" onclick="$$._onEditButtonClick();">'+b.getLang("modify")+'</span> <span class="edui-clickable" onclick="$$._onRemoveButtonClick(\'unlink\');"> '+b.getLang("clear")+"</span></nobr>");c.showAnchor(e)}}if(s){c.getDom("content").innerHTML=s;c.anchorEl=t||e;c.showAnchor(c.anchorEl)}else{c.hide()}})}},_initToolbars:function(){var c=this.editor;var a=this.toolbars||[];var s=[];for(var d=0;d<a.length;d++){var b=a[d];var r=new baidu.editor.ui.Toolbar();for(var e=0;e<b.length;e++){var u=b[e];var t=null;if(typeof u=="string"){u=u.toLowerCase();if(u=="|"){u="Separator"}if(baidu.editor.ui[u]){t=new baidu.editor.ui[u](c)}if(u=="fullscreen"){if(s&&s[0]){s[0].items.splice(0,0,t)}else{t&&r.items.splice(0,0,t)}continue}}else{t=u}if(t){r.add(t)}}s[d]=r}this.toolbars=s},getHtmlTpl:function(){return'<div id="##" class="%%"><div id="##_toolbarbox" class="%%-toolbarbox">'+(this.toolbars.length?'<div id="##_toolbarboxouter" class="%%-toolbarboxouter"><div class="%%-toolbarboxinner">'+this.renderToolbarBoxHtml()+"</div></div>":"")+'<div id="##_toolbarmsg" class="%%-toolbarmsg" style="display:none;"><div id = "##_upload_dialog" class="%%-toolbarmsg-upload" onclick="$$.showWordImageDialog();">'+this.editor.getLang("clickToUpload")+'</div><div class="%%-toolbarmsg-close" onclick="$$.hideToolbarMsg();">x</div><div id="##_toolbarmsg_label" class="%%-toolbarmsg-label"></div><div style="height:0;overflow:hidden;clear:both;"></div></div></div><div id="##_iframeholder" class="%%-iframeholder"></div><div id="##_bottombar" class="%%-bottomContainer"><table><tr><td id="##_elementpath" class="%%-bottombar"></td><td id="##_wordcount" class="%%-wordcount"></td></tr></table></div></div>'},showWordImageDialog:function(){this.editor.execCommand("wordimage","word_img");this._dialogs.wordimageDialog.open()},renderToolbarBoxHtml:function(){var a=[];for(var b=0;b<this.toolbars.length;b++){a.push(this.toolbars[b].renderHtml())}return a.join("")},setFullScreen:function(a){if(this._fullscreen!=a){this._fullscreen=a;this.editor.fireEvent("beforefullscreenchange",a);var b=this.editor;if(baidu.editor.browser.gecko){var d=b.selection.getRange().createBookmark()}if(a){this._bakHtmlOverflow=document.documentElement.style.overflow;this._bakBodyOverflow=document.body.style.overflow;this._bakAutoHeight=this.editor.autoHeightEnabled;this._bakScrollTop=Math.max(document.documentElement.scrollTop,document.body.scrollTop);if(this._bakAutoHeight){b.autoHeightEnabled=false;this.editor.disableAutoHeight()}document.documentElement.style.overflow="hidden";document.body.style.overflow="hidden";this._bakCssText=this.getDom().style.cssText;this._bakCssText1=this.getDom("iframeholder").style.cssText;this._updateFullScreen()}else{this.getDom().style.cssText=this._bakCssText;this.getDom("iframeholder").style.cssText=this._bakCssText1;if(this._bakAutoHeight){b.autoHeightEnabled=true;this.editor.enableAutoHeight()}document.documentElement.style.overflow=this._bakHtmlOverflow;document.body.style.overflow=this._bakBodyOverflow;window.scrollTo(0,this._bakScrollTop)}if(baidu.editor.browser.gecko){var c=document.createElement("input");document.body.appendChild(c);b.body.contentEditable=false;setTimeout(function(){c.focus();setTimeout(function(){b.body.contentEditable=true;b.selection.getRange().moveToBookmark(d).select(true);baidu.editor.dom.domUtils.remove(c);a&&window.scroll(0,0)})})}this.editor.fireEvent("fullscreenchanged",a);this.triggerLayout()}},_wordCount:function(){var a=this.getDom("wordcount");if(!this.editor.options.wordCount){a.style.display="none";this.getDom("bottombar").style.display="none";return}a.innerHTML=this.editor.queryCommandValue("wordcount")},disableWordCount:function(){var a=this.getDom("wordcount");a.innerHTML="";a.style.display="none";this.getDom("bottombar").style.display="none";this.wordcount=false},enableWordCount:function(){this.getDom("bottombar").style.display="";var a=this.getDom("wordcount");a.style.display="";this.wordcount=true;this._wordCount()},_updateFullScreen:function(){if(this._fullscreen){var a=i.getViewportRect();this.getDom().style.cssText="border:0;position:absolute;left:0;top:"+(this.editor.options.topOffset||0)+"px;width:"+a.width+"px;height:"+a.height+"px;z-index:"+(this.getDom().style.zIndex*1+100);i.setViewportOffset(this.getDom(),{left:0,top:this.editor.options.topOffset||0});this.editor.setHeight(a.height-this.getDom("toolbarbox").offsetHeight-this.getDom("bottombar").offsetHeight-(this.editor.options.topOffset||0))}},_updateElementPath:function(){var e=this.getDom("elementpath"),b;if(this.elementPathEnabled&&(b=this.editor.queryCommandValue("elementpath"))){var a=[];for(var c=0,d;d=b[c];c++){a[c]=this.formatHtml('<span unselectable="on" onclick="$$.editor.execCommand(&quot;elementpath&quot;, &quot;'+c+'&quot;);">'+d+"</span>")}e.innerHTML='<div class="edui-editor-breadcrumb" onmousedown="return false;">'+this.editor.getLang("elementPathTip")+": "+a.join(" &gt; ")+"</div>"}else{e.style.display="none"}},disableElementPath:function(){var a=this.getDom("elementpath");a.innerHTML="";a.style.display="none";this.elementPathEnabled=false},enableElementPath:function(){var a=this.getDom("elementpath");a.style.display="";this.elementPathEnabled=true;this._updateElementPath()},isFullScreen:function(){return this._fullscreen},postRender:function(){h.prototype.postRender.call(this);for(var c=0;c<this.toolbars.length;c++){this.toolbars[c].postRender()}var b=this;var d,e=baidu.editor.dom.domUtils,a=function(){clearTimeout(d);d=setTimeout(function(){b._updateFullScreen()})};e.on(window,"resize",a);b.addListener("destroy",function(){e.un(window,"resize",a);clearTimeout(d)})},showToolbarMsg:function(a,b){this.getDom("toolbarmsg_label").innerHTML=a;this.getDom("toolbarmsg").style.display="";if(!b){var c=this.getDom("upload_dialog");c.style.display="none"}},hideToolbarMsg:function(){this.getDom("toolbarmsg").style.display="none"},mapUrl:function(a){return a?a.replace("~/",this.editor.options.UEDITOR_HOME_URL||""):""},triggerLayout:function(){var a=this.getDom();if(a.style.zoom=="1"){a.style.zoom="100%"}else{a.style.zoom="1"}}};f.inherits(j,baidu.editor.ui.UIBase);baidu.editor.ui.Editor=function(c){var a=new baidu.editor.Editor(c);a.options.editor=a;var b=a.render;a.render=function(d){f.domReady(function(){a.langIsReady?e():a.addListener("langReady",e);function e(){a.setOpt({labelMap:a.options.labelMap||UE.I18N[a.options.lang].labelMap});new j(a.options);if(d){if(d.constructor===String){d=document.getElementById(d)}d&&d.getAttribute("name")&&(a.options.textarea=d.getAttribute("name"));if(d&&/script|textarea/ig.test(d.tagName)){var n=document.createElement("div");d.parentNode.insertBefore(n,d);var q=d.value||d.innerHTML;a.options.initialContent=/^[\t\r\n ]*$/.test(q)?a.options.initialContent:q.replace(/>[\n\r\t]+([ ]{4})+/g,">").replace(/[\n\r\t]+([ ]{4})+</g,"<").replace(/>[\n\r\t]+</g,"><");d.id&&(n.id=d.id);d.className&&(n.className=d.className);d.style.cssText&&(n.style.cssText=d.style.cssText);if(/textarea/i.test(d.tagName)){a.textarea=d;a.textarea.style.display="none"}else{d.parentNode.removeChild(d)}d=n;d.innerHTML=""}}a.ui.render(d);var o=a.ui.getDom("iframeholder");a.container=a.ui.getDom();a.container.style.zIndex=a.options.zIndex;b.call(a,o)}})};return a}})();(function(){var h=baidu.editor.utils,g=baidu.editor.ui.Popup,e=baidu.editor.ui.SplitButton,f=baidu.editor.ui.MultiMenuPop=function(a){this.initOptions(a);this.initMultiMenu()};f.prototype={initMultiMenu:function(){var a=this;this.popup=new g({content:"",editor:a.editor,iframe_rendered:false,onshow:function(){if(!this.iframe_rendered){this.iframe_rendered=true;this.getDom("content").innerHTML='<iframe id="'+a.id+'_iframe" src="'+a.iframeUrl+'" frameborder="0"></iframe>';a.editor.container.style.zIndex&&(this.getDom().style.zIndex=a.editor.container.style.zIndex*1+1)}}});this.onbuttonclick=function(){this.showPopup()};this.initSplitButton()}};h.inherits(f,e)})();UE.plugins.list=function(){var e=this,f={TD:1,PRE:1,BLOCKQUOTE:1};e.setOpt({insertorderedlist:{decimal:"","lower-alpha":"","lower-roman":"","upper-alpha":"","upper-roman":""},insertunorderedlist:{circle:"",disc:"",square:""}});function d(a,i,b){var c=a.nextSibling;if(c&&c.nodeType==1&&c.tagName.toLowerCase()==i&&(domUtils.getStyle(c,"list-style-type")||(i=="ol"?"decimal":"disc"))==b){domUtils.moveChild(c,a);if(c.childNodes.length==0){domUtils.remove(c)}}var j=a.previousSibling;if(j&&j.nodeType==1&&j.tagName.toLowerCase()==i&&(domUtils.getStyle(j,"list-style-type")||(i=="ol"?"decimal":"disc"))==b){domUtils.moveChild(a,j)}if(a.childNodes.length==0){domUtils.remove(a)}}e.addListener("keydown",function(w,H){function A(){H.preventDefault?H.preventDefault():(H.returnValue=false);e.undoManger&&e.undoManger.save()}var G=H.keyCode||H.which;if(G==13){var x=e.selection.getRange(),E=domUtils.findParentByTagName(x.startContainer,["ol","ul"],true,function(g){return g.tagName=="TABLE"}),B=domUtils.findParentByTagName(x.endContainer,["ol","ul"],true,function(g){return g.tagName=="TABLE"});if(E&&B&&E===B){if(!x.collapsed){E=domUtils.findParentByTagName(x.startContainer,"li",true);B=domUtils.findParentByTagName(x.endContainer,"li",true);if(E&&B&&E===B){x.deleteContents();a=domUtils.findParentByTagName(x.startContainer,"li",true);if(a&&domUtils.isEmptyBlock(a)){C=a.previousSibling;y=a.nextSibling;F=e.document.createElement("p");domUtils.fillNode(e.document,F);c=a.parentNode;if(C&&y){x.setStart(y,0).collapse(true).select(true);domUtils.remove(a)}else{if(!C&&!y||!C){c.parentNode.insertBefore(F,c)}else{a.parentNode.parentNode.insertBefore(F,c.nextSibling)}domUtils.remove(a);if(!c.firstChild){domUtils.remove(c)}x.setStart(F,0).setCursor()}A();return}}else{var I=x.cloneRange(),D=I.collapse(false).createBookmark();x.deleteContents();I.moveToBookmark(D);var a=domUtils.findParentByTagName(I.startContainer,"li",true),C=a.previousSibling,y=a.nextSibling;if(C){a=C;if(C.firstChild&&domUtils.isBlockElm(C.firstChild)){C=C.firstChild}if(domUtils.isEmptyNode(C)){domUtils.remove(a)}}if(y){a=y;if(y.firstChild&&domUtils.isBlockElm(y.firstChild)){y=y.firstChild}if(domUtils.isEmptyNode(y)){domUtils.remove(a)}}I.select();A();return}}a=domUtils.findParentByTagName(x.startContainer,"li",true);if(a){if(domUtils.isEmptyBlock(a)){D=x.createBookmark();var c=a.parentNode;if(a!==c.lastChild){domUtils.breakParent(a,c)}else{c.parentNode.insertBefore(a,c.nextSibling);if(domUtils.isEmptyNode(c)){domUtils.remove(c)}}if(!dtd.$list[a.parentNode.tagName]){if(!domUtils.isBlockElm(a.firstChild)){F=e.document.createElement("p");a.parentNode.insertBefore(F,a);while(a.firstChild){F.appendChild(a.firstChild)}domUtils.remove(a)}else{domUtils.remove(a,true)}}x.moveToBookmark(D).select()}else{var z=a.firstChild;if(!z||!domUtils.isBlockElm(z)){var F=e.document.createElement("p");!a.firstChild&&domUtils.fillNode(e.document,F);while(a.firstChild){F.appendChild(a.firstChild)}a.appendChild(F);z=F}var v=e.document.createElement("span");x.insertNode(v);domUtils.breakParent(v,a);var b=v.nextSibling;z=b.firstChild;if(!z){F=e.document.createElement("p");domUtils.fillNode(e.document,F);b.appendChild(F);z=F}if(domUtils.isEmptyNode(z)){z.innerHTML="";domUtils.fillNode(e.document,z)}x.setStart(z,0).collapse(true).shrinkBoundary().select();domUtils.remove(v);C=b.previousSibling;if(C&&domUtils.isEmptyBlock(C)){C.innerHTML="<p></p>";domUtils.fillNode(e.document,C.firstChild)}}A()}}}if(G==8){x=e.selection.getRange();if(x.collapsed&&domUtils.isStartInblock(x)){I=x.cloneRange().trimBoundary();a=domUtils.findParentByTagName(x.startContainer,"li",true);if(a&&domUtils.isStartInblock(I)){if(a&&(C=a.previousSibling)){if(G==46&&a.childNodes.length){return}if(dtd.$list[C.tagName]){C=C.lastChild}e.undoManger&&e.undoManger.save();z=a.firstChild;if(domUtils.isBlockElm(z)){if(domUtils.isEmptyNode(z)){C.appendChild(z);x.setStart(z,0).setCursor(false,true);while(a.firstChild){C.appendChild(a.firstChild)}}else{E=domUtils.findParentByTagName(x.startContainer,"p",true);if(E&&E!==z){return}v=e.document.createElement("span");x.insertNode(v);if(domUtils.isEmptyBlock(C)){C.innerHTML=""}domUtils.moveChild(a,C);x.setStartBefore(v).collapse(true).select(true);domUtils.remove(v)}}else{if(domUtils.isEmptyNode(a)){var F=e.document.createElement("p");C.appendChild(F);x.setStart(F,0).setCursor()}else{x.setEnd(C,C.childNodes.length).collapse().select(true);while(a.firstChild){C.appendChild(a.firstChild)}}}domUtils.remove(a);e.undoManger&&e.undoManger.save();domUtils.preventDefault(H);return}if(a&&!a.previousSibling){z=a.firstChild;if(!z||a.lastChild===z&&domUtils.isEmptyNode(domUtils.isBlockElm(z)?z:a)){var F=e.document.createElement("p");a.parentNode.parentNode.insertBefore(F,a.parentNode);domUtils.fillNode(e.document,F);x.setStart(F,0).setCursor();domUtils.remove(!a.nextSibling?a.parentNode:a);e.undoManger&&e.undoManger.save();domUtils.preventDefault(H);return}}}}}});e.commands.insertorderedlist=e.commands.insertunorderedlist={execCommand:function(af,a){if(!a){a=af.toLowerCase()=="insertorderedlist"?"decimal":"disc"}var M=this,S=this.selection.getRange(),Q=function(g){return g.nodeType==1?g.tagName.toLowerCase()!="br":!domUtils.isWhitespace(g)},c=af.toLowerCase()=="insertorderedlist"?"ol":"ul",ag=M.document.createDocumentFragment();S.adjustmentBoundary().shrinkBoundary();var ab=S.createBookmark(true),ad=domUtils.findParentByTagName(M.document.getElementById(ab.start),"li"),K=0,ae=domUtils.findParentByTagName(M.document.getElementById(ab.end),"li"),i=0,P,Y,X,U;if(ad||ae){ad&&(P=ad.parentNode);if(!ab.end){ae=ad}ae&&(Y=ae.parentNode);if(P===Y){while(ad!==ae){U=ad;ad=ad.nextSibling;if(!domUtils.isBlockElm(U.firstChild)){var O=M.document.createElement("p");while(U.firstChild){O.appendChild(U.firstChild)}U.appendChild(O)}ag.appendChild(U)}U=M.document.createElement("span");P.insertBefore(U,ae);if(!domUtils.isBlockElm(ae.firstChild)){O=M.document.createElement("p");while(ae.firstChild){O.appendChild(ae.firstChild)}ae.appendChild(O)}ag.appendChild(ae);domUtils.breakParent(U,P);if(domUtils.isEmptyNode(U.previousSibling)){domUtils.remove(U.previousSibling)}if(domUtils.isEmptyNode(U.nextSibling)){domUtils.remove(U.nextSibling)}var ac=domUtils.getComputedStyle(P,"list-style-type")||(af.toLowerCase()=="insertorderedlist"?"decimal":"disc");if(P.tagName.toLowerCase()==c&&ac==a){for(var b=0,W,aa=M.document.createDocumentFragment();W=ag.childNodes[b++];){while(W.firstChild){aa.appendChild(W.firstChild)}}U.parentNode.insertBefore(aa,U)}else{X=M.document.createElement(c);domUtils.setStyle(X,"list-style-type",a);X.appendChild(ag);U.parentNode.insertBefore(X,U)}domUtils.remove(U);X&&d(X,c,a);S.moveToBookmark(ab).select();return}if(ad){while(ad){U=ad.nextSibling;var ai=M.document.createDocumentFragment(),R=0;while(ad.firstChild){if(domUtils.isBlockElm(ad.firstChild)){R=1}ai.appendChild(ad.firstChild)}if(!R){var J=M.document.createElement("p");J.appendChild(ai);ag.appendChild(J)}else{ag.appendChild(ai)}domUtils.remove(ad);ad=U}P.parentNode.insertBefore(ag,P.nextSibling);if(domUtils.isEmptyNode(P)){S.setStartBefore(P);domUtils.remove(P)}else{S.setStartAfter(P)}K=1}if(ae){ad=Y.firstChild;while(ad!==ae){U=ad.nextSibling;ai=M.document.createDocumentFragment();R=0;while(ad.firstChild){if(domUtils.isBlockElm(ad.firstChild)){R=1}ai.appendChild(ad.firstChild)}if(!R){J=M.document.createElement("p");J.appendChild(ai);ag.appendChild(J)}else{ag.appendChild(ai)}domUtils.remove(ad);ad=U}ag.appendChild(ae.firstChild);domUtils.remove(ae);Y.parentNode.insertBefore(ag,Y);S.setEndBefore(Y);if(domUtils.isEmptyNode(Y)){domUtils.remove(Y)}i=1}}if(!K){S.setStartBefore(M.document.getElementById(ab.start))}if(ab.end&&!i){S.setEndAfter(M.document.getElementById(ab.end))}S.enlarge(true,function(g){return f[g.tagName]});ag=M.document.createDocumentFragment();var ah=S.createBookmark(),L=domUtils.getNextDomNode(ah.start,false,Q),N=S.cloneRange(),V,Z=domUtils.isBlockElm;while(L&&L!==ah.end&&(domUtils.getPosition(L,ah.end)&domUtils.POSITION_PRECEDING)){if(L.nodeType==3||dtd.li[L.tagName]){if(L.nodeType==1&&dtd.$list[L.tagName]){while(L.firstChild){ag.appendChild(L.firstChild)}V=domUtils.getNextDomNode(L,false,Q);domUtils.remove(L);L=V;continue}V=L;N.setStartBefore(L);while(L&&L!==ah.end&&(!Z(L)||domUtils.isBookmarkNode(L))){V=L;L=domUtils.getNextDomNode(L,false,null,function(g){return !f[g.tagName]})}if(L&&Z(L)){U=domUtils.getNextDomNode(V,false,Q);if(U&&domUtils.isBookmarkNode(U)){L=domUtils.getNextDomNode(U,false,Q);V=U}}N.setEndAfter(V);L=domUtils.getNextDomNode(V,false,Q);var T=S.document.createElement("li");T.appendChild(N.extractContents());ag.appendChild(T)}else{L=domUtils.getNextDomNode(L,true,Q)}}S.moveToBookmark(ah).collapse(true);X=M.document.createElement(c);domUtils.setStyle(X,"list-style-type",a);X.appendChild(ag);S.insertNode(X);d(X,c,a);S.moveToBookmark(ab).select()},queryCommandState:function(a){return this.highlight?-1:utils.findNode(this.selection.getStartElementPath(),[a.toLowerCase()=="insertorderedlist"?"ol":"ul"])?1:0},queryCommandValue:function(a){var b=utils.findNode(this.selection.getStartElementPath(),[a.toLowerCase()=="insertorderedlist"?"ol":"ul"]);return b?domUtils.getComputedStyle(b,"list-style-type"):null}}};UE.commands.cleardoc={execCommand:function(h){var g=this,e=g.options.enterTag,f=g.selection.getRange();if(e=="br"){g.body.innerHTML="<br/>";f.setStart(g.body,0).setCursor()}else{g.body.innerHTML="<p>"+(ie?"":"<br/>")+"</p>";f.setStart(g.body.firstChild,0).setCursor(false,true)}}};UE.commands.time=UE.commands.date={execCommand:function(c){var d=new Date;this.execCommand("insertHtml",c=="time"?(d.getHours()+":"+(d.getMinutes()<10?"0"+d.getMinutes():d.getMinutes())+":"+(d.getSeconds()<10?"0"+d.getSeconds():d.getSeconds())):(d.getFullYear()+"-"+((d.getMonth()+1)<10?"0"+(d.getMonth()+1):d.getMonth()+1)+"-"+(d.getDate()<10?"0"+d.getDate():d.getDate())))},queryCommandState:function(){return this.highlight?-1:0}};UE.plugins.basestyle=function(){var g={bold:["strong","b"],italic:["em","i"],subscript:["sub"],superscript:["sup"]},h=function(b,c){var a=b.selection.getStartElementPath();return utils.findNode(a,c)},e=this;for(var f in g){(function(a,b){e.commands[a]={execCommand:function(q){var r=new dom.Range(e.document),s="";if(e.currentSelectedArr&&e.currentSelectedArr.length>0){for(var i=0,o;o=e.currentSelectedArr[i++];){if(o.style.display!="none"){r.selectNodeContents(o).select();!s&&(s=h(this,b));if(q=="superscript"||q=="subscript"){if(!s||s.tagName.toLowerCase()!=q){r.removeInlineStyle(["sub","sup"])}}s?r.removeInlineStyle(b):r.applyInlineStyle(b[0])}}r.selectNodeContents(e.currentSelectedArr[0]).select()}else{r=e.selection.getRange();s=h(this,b);if(r.collapsed){if(s){var c=e.document.createTextNode("");r.insertNode(c).removeInlineStyle(b);r.setStartBefore(c);domUtils.remove(c)}else{var d=r.document.createElement(b[0]);if(q=="superscript"||q=="subscript"){c=e.document.createTextNode("");r.insertNode(c).removeInlineStyle(["sub","sup"]).setStartBefore(c).collapse(true)}r.insertNode(d).setStart(d,0)}r.collapse(true)}else{if(q=="superscript"||q=="subscript"){if(!s||s.tagName.toLowerCase()!=q){r.removeInlineStyle(["sub","sup"])}}s?r.removeInlineStyle(b):r.applyInlineStyle(b[0])}r.select()}return true},queryCommandState:function(){if(this.highlight){return -1}return h(this,b)?1:0}}})(f,g[f])}};UE.plugins.removeformat=function(){var b=this;b.setOpt({removeFormatTags:"b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var",removeFormatAttributes:"class,style,lang,width,height,align,hspace,valign"});b.commands.removeformat={execCommand:function(t,G,F,v,u){var z=new RegExp("^(?:"+(G||this.options.removeFormatTags).replace(/,/g,"|")+")$","i"),B=F?[]:(v||this.options.removeFormatAttributes).split(","),y=new dom.Range(this.document),x,C,w,E=function(c){return c.nodeType==1};function D(c){if(c.nodeType==3||c.tagName.toLowerCase()!="span"){return 0}if(browser.ie){var e=c.attributes;if(e.length){for(var d=0,f=e.length;d<f;d++){if(e[d].specified){return 0}}return 1}}return !c.attributes.length}function i(f){var d=f.createBookmark();if(f.collapsed){f.enlarge(true)}if(!u){var l=domUtils.findParentByTagName(f.startContainer,"a",true);if(l){f.setStartBefore(l)}l=domUtils.findParentByTagName(f.endContainer,"a",true);if(l){f.setEndAfter(l)}}x=f.createBookmark();k=x.start;while((w=k.parentNode)&&!domUtils.isBlockElm(w)){domUtils.breakParent(k,w);domUtils.clearEmptySibling(k)}if(x.end){k=x.end;while((w=k.parentNode)&&!domUtils.isBlockElm(w)){domUtils.breakParent(k,w);domUtils.clearEmptySibling(k)}var e=domUtils.getNextDomNode(x.start,false,E),g;while(e){if(e==x.end){break}g=domUtils.getNextDomNode(e,true,E);if(!dtd.$empty[e.tagName.toLowerCase()]&&!domUtils.isBookmarkNode(e)){if(z.test(e.tagName)){if(F){domUtils.removeStyle(e,F);if(D(e)&&F!="text-decoration"){domUtils.remove(e,true)}}else{domUtils.remove(e,true)}}else{if(!dtd.$tableContent[e.tagName]&&!dtd.$list[e.tagName]){domUtils.removeAttributes(e,B);if(D(e)){domUtils.remove(e,true)}}}}e=g}}var c=x.start.parentNode;if(domUtils.isBlockElm(c)&&!dtd.$tableContent[c.tagName]&&!dtd.$list[c.tagName]){domUtils.removeAttributes(c,B)}c=x.end.parentNode;if(x.end&&domUtils.isBlockElm(c)&&!dtd.$tableContent[c.tagName]&&!dtd.$list[c.tagName]){domUtils.removeAttributes(c,B)}f.moveToBookmark(x).moveToBookmark(d);var k=f.startContainer,h,j=f.collapsed;while(k.nodeType==1&&domUtils.isEmptyNode(k)&&dtd.$removeEmpty[k.tagName]){h=k.parentNode;f.setStartBefore(k);if(f.startContainer===f.endContainer){f.endOffset--}domUtils.remove(k);k=h}if(!j){k=f.endContainer;while(k.nodeType==1&&domUtils.isEmptyNode(k)&&dtd.$removeEmpty[k.tagName]){h=k.parentNode;f.setEndBefore(k);domUtils.remove(k);k=h}}}if(this.currentSelectedArr&&this.currentSelectedArr.length){for(var A=0,a;a=this.currentSelectedArr[A++];){y.selectNodeContents(a);i(y)}y.selectNodeContents(this.currentSelectedArr[0]).select()}else{y=this.selection.getRange();i(y);y.select()}},queryCommandState:function(){return this.highlight?-1:0}}};UE.plugins.font=function(){var e=this,f={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family",underline:"text-decoration",strikethrough:"text-decoration"};e.setOpt({fontfamily:[{name:"songti",val:"宋体,SimSun"},{name:"yahei",val:"微软雅黑,Microsoft YaHei"},{name:"kaiti",val:"楷体,楷体_GB2312, SimKai"},{name:"heiti",val:"黑体, SimHei"},{name:"lishu",val:"隶书, SimLi"},{name:"andaleMono",val:"andale mono"},{name:"arial",val:"arial, helvetica,sans-serif"},{name:"arialBlack",val:"arial black,avant garde"},{name:"comicSansMs",val:"comic sans ms"},{name:"impact",val:"impact,chicago"},{name:"timesNewRoman",val:"times new roman"}],fontsize:[10,11,12,14,16,18,20,24,36]});for(var d in f){(function(a,b){UE.commands[a]={execCommand:function(q,t){t=t||(this.queryCommandState(q)?"none":q=="underline"?"underline":"line-through");var u=this,v=this.selection.getRange(),r;if(t=="default"){if(v.collapsed){r=u.document.createTextNode("font");v.insertNode(r).select()}u.execCommand("removeFormat","span,a",b);if(r){v.setStartBefore(r).setCursor();domUtils.remove(r)}}else{if(u.currentSelectedArr&&u.currentSelectedArr.length>0){for(var w=0,c;c=u.currentSelectedArr[w++];){v.selectNodeContents(c);v.applyInlineStyle("span",{style:b+":"+t})}v.selectNodeContents(this.currentSelectedArr[0]).select()}else{if(!v.collapsed){if((a=="underline"||a=="strikethrough")&&u.queryCommandValue(a)){u.execCommand("removeFormat","span,a",b)}v=u.selection.getRange();v.applyInlineStyle("span",{style:b+":"+t}).select()}else{var s=domUtils.findParentByTagName(v.startContainer,"span",true);r=u.document.createTextNode("font");if(s&&!s.children.length&&!s[browser.ie?"innerText":"textContent"].replace(fillCharReg,"").length){v.insertNode(r);if(a=="underline"||a=="strikethrough"){v.selectNode(r).select();u.execCommand("removeFormat","span,a",b,null);s=domUtils.findParentByTagName(r,"span",true);v.setStartBefore(r)}s.style.cssText+=";"+b+":"+t;v.collapse(true).select()}else{v.insertNode(r);v.selectNode(r).select();s=v.document.createElement("span");if(a=="underline"||a=="strikethrough"){if(domUtils.findParentByTagName(r,"a",true)){v.setStartBefore(r).setCursor();domUtils.remove(r);return}u.execCommand("removeFormat","span,a",b)}s.style.cssText=b+":"+t;r.parentNode.insertBefore(s,r);if(!browser.ie||browser.ie&&browser.version==9){var i=s.parentNode;while(!domUtils.isBlockElm(i)){if(i.tagName=="SPAN"){s.style.cssText=i.style.cssText+";"+s.style.cssText}i=i.parentNode}}if(opera){setTimeout(function(){v.setStart(s,0).setCursor()})}else{v.setStart(s,0).setCursor()}}domUtils.remove(r)}}}return true},queryCommandValue:function(k){var l=this.selection.getStart();if(k=="underline"||k=="strikethrough"){var j=l,c;while(j&&!domUtils.isBlockElm(j)&&!domUtils.isBody(j)){if(j.nodeType==1){c=domUtils.getComputedStyle(j,b);if(c!="none"){return c}}j=j.parentNode}return"none"}return domUtils.getComputedStyle(l,b)},queryCommandState:function(c){if(this.highlight){return -1}if(!(c=="underline"||c=="strikethrough")){return 0}return this.queryCommandValue(c)==(c=="underline"?"underline":"line-through")}}})(d,f[d])}};(function(){var f=domUtils.isBlockElm,d={left:1,right:1,center:1,justify:1},e=function(t,w){var q=t.createBookmark(),b=function(g){return g.nodeType==1?g.tagName.toLowerCase()!="br"&&!domUtils.isBookmarkNode(g):!domUtils.isWhitespace(g)};t.enlarge(true);var a=t.createBookmark(),r=domUtils.getNextDomNode(a.start,false,b),o=t.cloneRange(),u;while(r&&!(domUtils.getPosition(r,a.end)&domUtils.POSITION_FOLLOWING)){if(r.nodeType==3||!f(r)){o.setStartBefore(r);while(r&&r!==a.end&&!f(r)){u=r;r=domUtils.getNextDomNode(r,false,null,function(g){return !f(g)})}o.setEndAfter(u);var s=o.getCommonAncestor();if(!domUtils.isBody(s)&&f(s)){domUtils.setStyles(s,utils.isString(w)?{"text-align":w}:w);r=s}else{var v=t.document.createElement("p");domUtils.setStyles(v,utils.isString(w)?{"text-align":w}:w);var c=o.extractContents();v.appendChild(c);o.insertNode(v);r=v}r=domUtils.getNextDomNode(r,false,b)}else{r=domUtils.getNextDomNode(r,true,b)}}return t.moveToBookmark(a).moveToBookmark(q)};UE.commands.justify={execCommand:function(i,a){var k=this.selection.getRange(),l;if(this.currentSelectedArr&&this.currentSelectedArr.length>0){for(var c=0,b;b=this.currentSelectedArr[c++];){if(domUtils.isEmptyNode(b)){l=this.document.createTextNode("p");k.setStart(b,0).collapse(true).insertNode(l).selectNode(l)}else{k.selectNodeContents(b)}e(k,a.toLowerCase());l&&domUtils.remove(l)}k.selectNode(this.currentSelectedArr[0]).select()}else{if(k.collapsed){l=this.document.createTextNode("p");k.insertNode(l)}e(k,a);if(l){k.setStartBefore(l).collapse(true);domUtils.remove(l)}k.select()}return true},queryCommandValue:function(){var b=this.selection.getStart(),a=domUtils.getComputedStyle(b,"text-align");return d[a]?a:"left"},queryCommandState:function(){return this.highlight?-1:0}}})();UE.plugins.paragraph=function(){var e=this,g=domUtils.isBlockElm,h=["TD","LI","PRE"],f=function(w,y,d,t){var u=w.createBookmark(),c=function(i){return i.nodeType==1?i.tagName.toLowerCase()!="br"&&!domUtils.isBookmarkNode(i):!domUtils.isWhitespace(i)},a;w.enlarge(true);var b=w.createBookmark(),v=domUtils.getNextDomNode(b.start,false,c),r=w.cloneRange(),x;while(v&&!(domUtils.getPosition(v,b.end)&domUtils.POSITION_FOLLOWING)){if(v.nodeType==3||!g(v)){r.setStartBefore(v);while(v&&v!==b.end&&!g(v)){x=v;v=domUtils.getNextDomNode(v,false,null,function(i){return !g(i)})}r.setEndAfter(x);a=w.document.createElement(y);if(d){domUtils.setAttributes(a,d);if(t&&t=="customstyle"&&d.style){a.style.cssText=d.style}}a.appendChild(r.extractContents());if(domUtils.isEmptyNode(a)){domUtils.fillChar(w.document,a)}r.insertNode(a);var s=a.parentNode;if(g(s)&&!domUtils.isBody(a.parentNode)&&utils.indexOf(h,s.tagName)==-1){if(!(t&&t=="customstyle")){s.getAttribute("dir")&&a.setAttribute("dir",s.getAttribute("dir"));s.style.cssText&&(a.style.cssText=s.style.cssText+";"+a.style.cssText);s.style.textAlign&&!a.style.textAlign&&(a.style.textAlign=s.style.textAlign);s.style.textIndent&&!a.style.textIndent&&(a.style.textIndent=s.style.textIndent);s.style.padding&&!a.style.padding&&(a.style.padding=s.style.padding)}if(d&&/h\d/i.test(s.tagName)&&!/h\d/i.test(a.tagName)){domUtils.setAttributes(s,d);if(t&&t=="customstyle"&&d.style){s.style.cssText=d.style}domUtils.remove(a,true);a=s}else{domUtils.remove(a.parentNode,true)}}if(utils.indexOf(h,s.tagName)!=-1){v=s}else{v=a}v=domUtils.getNextDomNode(v,false,c)}else{v=domUtils.getNextDomNode(v,true,c)}}return w.moveToBookmark(b).moveToBookmark(u)};e.setOpt("paragraph",{p:"",h1:"",h2:"",h3:"",h4:"",h5:"",h6:""});e.commands.paragraph={execCommand:function(A,z,a,c){var d=new dom.Range(this.document);if(this.currentSelectedArr&&this.currentSelectedArr.length>0){for(var i=0,y;y=this.currentSelectedArr[i++];){if(y.style.display=="none"){continue}if(domUtils.isEmptyNode(y)){var u=this.document.createTextNode("paragraph");y.innerHTML="";y.appendChild(u)}f(d.selectNodeContents(y),z,a,c);if(u){var b=u.parentNode;domUtils.remove(u);if(domUtils.isEmptyNode(b)){domUtils.fillNode(this.document,b)}}}var v=this.currentSelectedArr[0];if(domUtils.isEmptyBlock(v)){d.setStart(v,0).setCursor(false,true)}else{d.selectNode(v).select()}}else{d=this.selection.getRange();if(d.collapsed){var t=this.document.createTextNode("p");d.insertNode(t);if(browser.ie){var w=t.previousSibling;if(w&&domUtils.isWhitespace(w)){domUtils.remove(w)}w=t.nextSibling;if(w&&domUtils.isWhitespace(w)){domUtils.remove(w)}}}d=f(d,z,a,c);if(t){d.setStartBefore(t).collapse(true);b=t.parentNode;domUtils.remove(t);if(domUtils.isBlockElm(b)&&domUtils.isEmptyNode(b)){domUtils.fillNode(this.document,b)}}if(browser.gecko&&d.collapsed&&d.startContainer.nodeType==1){var x=d.startContainer.childNodes[d.startOffset];if(x&&x.nodeType==1&&x.tagName.toLowerCase()==z){d.setStart(x,0).collapse(true)}}d.select()}return true},queryCommandValue:function(){var a=utils.findNode(this.selection.getStartElementPath(),["p","h1","h2","h3","h4","h5","h6"]);return a?a.tagName.toLowerCase():""},queryCommandState:function(){return this.highlight?-1:0}}};UE.commands.indent={execCommand:function(){var d=this,c=d.queryCommandState("indent")?"0em":(d.options.indentValue||"2em");d.execCommand("Paragraph","p",{style:"text-indent:"+c})},queryCommandState:function(){if(this.highlight){return -1}var b=utils.findNode(this.selection.getStartElementPath(),["p","h1","h2","h3","h4","h5","h6"]);return b&&b.style.textIndent&&parseInt(b.style.textIndent)?1:0}};UE.plugins.formatmatch=function(){var j=this,i=[],f,g=0;j.addListener("reset",function(){i=[];g=0});function h(e,c){if(browser.webkit){var s=c.target.tagName=="IMG"?c.target:null}function x(k){if(b&&(!j.currentSelectedArr||!j.currentSelectedArr.length)){k.selectNode(b)}return k.applyInlineStyle(i[i.length-1].tagName,null,i)}j.undoManger&&j.undoManger.save();var t=j.selection.getRange(),d=s||t.getClosedNode();if(f&&d&&d.tagName=="IMG"){d.style.cssText+=";float:"+(f.style.cssFloat||f.style.styleFloat||"none")+";display:"+(f.style.display||"inline");f=null}else{if(!f){var v=t.collapsed;if(v){var b=j.document.createTextNode("match");t.insertNode(b).select()}j.__hasEnterExecCommand=true;var w=j.options.removeFormatAttributes;j.options.removeFormatAttributes="";j.execCommand("removeformat");j.options.removeFormatAttributes=w;j.__hasEnterExecCommand=false;t=j.selection.getRange();if(i.length==0){if(j.currentSelectedArr&&j.currentSelectedArr.length>0){t.selectNodeContents(j.currentSelectedArr[0]).select()}}else{if(j.currentSelectedArr&&j.currentSelectedArr.length>0){for(var u=0,a;a=j.currentSelectedArr[u++];){t.selectNodeContents(a);x(t)}t.selectNodeContents(j.currentSelectedArr[0]).select()}else{x(t)}}if(!j.currentSelectedArr||!j.currentSelectedArr.length){if(b){t.setStartBefore(b).collapse(true)}t.select()}b&&domUtils.remove(b)}}j.undoManger&&j.undoManger.save();j.removeListener("mouseup",h);g=0}j.commands.formatmatch={execCommand:function(d){if(g){g=0;i=[];j.removeListener("mouseup",h);return}var e=j.selection.getRange();f=e.getClosedNode();if(!f||f.tagName!="IMG"){e.collapse(true).shrinkBoundary();var a=e.startContainer;i=domUtils.findParents(a,true,function(k){return !domUtils.isBlockElm(k)&&k.nodeType==1});for(var b=0,c;c=i[b];b++){if(c.tagName=="A"){i.splice(b,1);break}}}j.addListener("mouseup",h);g=1},queryCommandState:function(){if(this.highlight){return -1}return g},notNeedUndo:1}};UE.plugins.rowspacing=function(){var b=this;b.setOpt({rowspacingtop:["5","10","15","20","25"],rowspacingbottom:["5","10","15","20","25"]});b.commands.rowspacing={execCommand:function(f,e,a){this.execCommand("paragraph","p",{style:"margin-"+a+":"+e+"px"});return true},queryCommandValue:function(g,h){var a=utils.findNode(this.selection.getStartElementPath(),null,function(c){return domUtils.isBlockElm(c)}),f;if(a){f=domUtils.getComputedStyle(a,"margin-"+h).replace(/[^\d]/g,"");return !f?0:f}return 0},queryCommandState:function(){return this.highlight?-1:0}}};UE.plugins.lineheight=function(){var b=this;b.setOpt({lineheight:["1","1.5","1.75","2","3","4","5"]});b.commands.lineheight={execCommand:function(a,d){this.execCommand("paragraph","p",{style:"line-height:"+(d=="1"?"normal":d+"em")});return true},queryCommandValue:function(){var a=utils.findNode(this.selection.getStartElementPath(),null,function(c){return domUtils.isBlockElm(c)});if(a){var d=domUtils.getComputedStyle(a,"line-height");return d=="normal"?1:d.replace(/[^\d.]*/ig,"")}},queryCommandState:function(){return this.highlight?-1:0}}};UE.plugins.wordcount=function(){var i=this;i.setOpt({wordCount:true,maximumWords:10000,wordCountMsg:i.options.wordCountMsg||i.getLang("wordCountMsg"),wordOverFlowMsg:i.options.wordOverFlowMsg||i.getLang("wordOverFlowMsg")});var f=i.options,g=f.maximumWords,h=f.wordCountMsg,j=f.wordOverFlowMsg;if(!f.wordCount){return}i.commands.wordcount={queryCommandValue:function(a,c){var b,e,d;if(c){d=new RegExp("[\r\t\n]","g");e=this.getContentTxt().replace(d,"");return e.length}d=new RegExp("[\r\t\n]","g");e=this.getContentTxt().replace(d,"");e=e.replace(/\s/g,"");b=e.replace(/[^\x00-\xff]/g,"**").length;if(g-b<0){i.fireEvent("wordcountoverflow");return j}return h.replace("{#leave}",g-b>=0?g-b:0).replace("{#count}",b)}}};UE.plugins.contextmenu=function(){var j=this,h=j.getLang("contextMenu"),i,g=j.options.contextMenu||[{label:h["delete"],cmdName:"delete"},{label:h.selectall,cmdName:"selectall"},{label:h.deletecode,cmdName:"highlightcode",icon:"deletehighlightcode"},{label:h.cleardoc,cmdName:"cleardoc",exec:function(){if(confirm(h.confirmclear)){this.execCommand("cleardoc")}}},"-",{label:h.unlink,cmdName:"unlink"},"-",{group:h.paragraph,icon:"justifyjustify",subMenu:[{label:j.getLang("justifyleft"),cmdName:"justify",value:"left"},{label:j.getLang("justifyright"),cmdName:"justify",value:"right"},{label:j.getLang("justifyrenter"),cmdName:"justify",value:"center"},{label:j.getLang("justify"),cmdName:"justify",value:"justify"}]},"-",{label:h.edittable,cmdName:"edittable",exec:function(){this.ui._dialogs.inserttableDialog.open()}},{label:h.edittd,cmdName:"edittd",exec:function(){if(UE.ui.edittd){new UE.ui.edittd(this)}this.ui._dialogs.edittdDialog.open()}},{group:h.table,icon:"table",subMenu:[{label:h.deletetable,cmdName:"deletetable"},{label:h.insertparagraphbeforetable,cmdName:"insertparagraphbeforetable"},"-",{label:h.deleterow,cmdName:"deleterow"},{label:h.deletecol,cmdName:"deletecol"},"-",{label:h.insertrow,cmdName:"insertrow"},{label:h.insertcol,cmdName:"insertcol"},"-",{label:h.mergeright,cmdName:"mergeright"},{label:h.mergedown,cmdName:"mergedown"},"-",{label:h.splittorows,cmdName:"splittorows"},{label:h.splittocols,cmdName:"splittocols"},{label:h.mergecells,cmdName:"mergecells"},{label:h.splittocells,cmdName:"splittocells"}]},{label:h.copy,cmdName:"copy",exec:function(){alert(h.copymsg)},query:function(){return 0}},{label:h.paste,cmdName:"paste",exec:function(){alert(h.pastemsg)},query:function(){return 0}}];if(!g.length){return}var f=UE.ui.uiUtils;j.addListener("contextmenu",function(d,b){var t=f.getViewportOffsetByEvent(b);j.fireEvent("beforeselectionchange");if(i){i.destroy()}for(var s=0,v,a=[];v=g[s];s++){var c;(function(l){if(l=="-"){if((c=a[a.length-1])&&c!=="-"){a.push("-")}}else{if(l.hasOwnProperty("group")){for(var m=0,n,k=[];n=l.subMenu[m];m++){(function(o){if(o=="-"){if((c=k[k.length-1])&&c!=="-"){k.push("-")}}else{if((j.commands[o.cmdName]||UE.commands[o.cmdName]||o.query)&&(o.query?o.query():j.queryCommandState(o.cmdName))>-1){k.push({label:o.label||j.getLang("contextMenu."+o.cmdName+(o.value||"")),className:"edui-for-"+o.cmdName+(o.value||""),onclick:o.exec?function(){o.exec.call(j)}:function(){j.execCommand(o.cmdName,o.value)}})}}})(n)}if(k.length){a.push({label:l.icon=="table"?j.getLang("contextMenu.table"):j.getLang("contextMenu.paragraph"),className:"edui-for-"+l.icon,subMenu:{items:k,editor:j}})}}else{if((j.commands[l.cmdName]||UE.commands[l.cmdName]||l.query)&&(l.query?l.query():j.queryCommandState(l.cmdName))>-1){if(l.cmdName=="highlightcode"&&j.queryCommandState(l.cmdName)==0){return}a.push({label:l.label||j.getLang("contextMenu."+l.cmdName),className:"edui-for-"+(l.icon?l.icon:l.cmdName+(l.value||"")),onclick:l.exec?function(){l.exec.call(j)}:function(){j.execCommand(l.cmdName,l.value)}})}}}})(v)}if(a[a.length-1]=="-"){a.pop()}i=new UE.ui.Menu({items:a,editor:j});i.render();i.showAt(t);domUtils.preventDefault(b);if(browser.ie){var u;try{u=j.selection.getNative().createRange()}catch(e){return}if(u.item){var r=new dom.Range(j.document);r.selectNode(u.item(0)).select(true,true)}}})};UE.plugins.autoheight=function(){var o=this;o.autoHeightEnabled=o.options.autoHeightEnabled!==false;if(!o.autoHeightEnabled){return}var j,q,i,n=0,m,k;function l(){clearTimeout(k);k=setTimeout(function(){if(o.queryCommandState("source")!=1){if(!q){q=o.document.createElement("span");q.style.cssText="display:block;width:0;margin:0;padding:0;border:0;clear:both;";q.innerHTML="."}i=q.cloneNode(true);o.body.appendChild(i);m=Math.max(domUtils.getXY(i).y+i.offsetHeight,o.options.minFrameHeight);if(m!=n){o.setHeight(m);n=m}domUtils.remove(i)}},50)}o.addListener("destroy",function(){o.removeListener("contentchange",l);o.removeListener("keyup",l);o.removeListener("mouseup",l)});o.enableAutoHeight=function(){if(!o.autoHeightEnabled){return}var a=o.document;o.autoHeightEnabled=true;j=a.body.style.overflowY;a.body.style.overflowY="hidden";o.addListener("contentchange",l);o.addListener("keyup",l);o.addListener("mouseup",l);setTimeout(function(){l()},browser.gecko?100:0);o.fireEvent("autoheightchanged",o.autoHeightEnabled)};o.disableAutoHeight=function(){o.body.style.overflowY=j||"";o.removeListener("contentchange",l);o.removeListener("keyup",l);o.removeListener("mouseup",l);o.autoHeightEnabled=false;o.fireEvent("autoheightchanged",o.autoHeightEnabled)};o.addListener("ready",function(){o.enableAutoHeight();var a;domUtils.on(browser.ie?o.body:o.document,browser.webkit?"dragover":"drop",function(){clearTimeout(a);a=setTimeout(function(){l()},100)})})};UE.plugins.autofloat=function(){var v=this,u=v.getLang();v.setOpt({topOffset:0});var A=v.options.autoFloatEnabled!==false,C=v.options.topOffset;if(!A){return}var H=UE.ui.uiUtils,G=browser.ie&&browser.version<=6,B=browser.quirks;function M(a){if(!a.ui){alert(u.autofloatMsg);return 0}return 1}function F(){var a=document.body.style;a.backgroundImage='url("about:blank")';a.backgroundAttachment="fixed"}var E,z=document.createElement("div"),J,K,w,y=true;function D(){var b=domUtils.getXY(J),c=domUtils.getComputedStyle(J,"position"),a=domUtils.getComputedStyle(J,"left");J.style.width=J.offsetWidth+"px";J.style.zIndex=v.options.zIndex*1+1;J.parentNode.insertBefore(z,J);if(G||(B&&browser.ie)){if(J.style.position!="absolute"){J.style.position="absolute"}J.style.top=(document.body.scrollTop||document.documentElement.scrollTop)-K+C+"px"}else{if(browser.ie7Compat&&y){y=false;J.style.left=domUtils.getXY(J).x-document.documentElement.getBoundingClientRect().left+2+"px"}if(J.style.position!="fixed"){J.style.position="fixed";J.style.top=C+"px";((c=="absolute"||c=="relative")&&parseFloat(a))&&(J.style.left=b.x+"px")}}}function I(){y=true;if(z.parentNode){z.parentNode.removeChild(z)}J.style.cssText=E}function L(){var a=w(v.container);if(a.top<0&&a.bottom-J.offsetHeight>0){D()}else{I()}}var x=utils.defer(function(){L()},browser.ie?200:100,true);v.addListener("destroy",function(){domUtils.un(window,["scroll","resize"],L);v.removeListener("keydown",x)});v.addListener("ready",function(){if(M(v)){w=H.getClientRect;J=v.ui.getDom("toolbarbox");K=w(J).top;E=J.style.cssText;z.style.height=J.offsetHeight+"px";if(G){F()}v.addListener("autoheightchanged",function(a,b){if(b){domUtils.on(window,["scroll","resize"],L);v.addListener("keydown",x)}else{domUtils.un(window,["scroll","resize"],L);v.removeListener("keydown",x)}});v.addListener("beforefullscreenchange",function(a,b){if(b){I()}});v.addListener("fullscreenchanged",function(a,b){if(!b){L()}});v.addListener("sourcemodechanged",function(a,b){setTimeout(function(){L()},0)})}})};UE.plugins.elementpath=function(){var f,e,d=this;d.setOpt("elementPathEnabled",true);if(!d.options.elementPathEnabled){return}d.commands.elementpath={execCommand:function(c,v){var t=e[v],j=d.selection.getRange();d.currentSelectedArr&&domUtils.clearSelectedArr(d.currentSelectedArr);f=v*1;if(dtd.$tableContent[t.tagName]){switch(t.tagName){case"TD":d.currentSelectedArr=[t];t.className=d.options.selectedTdClass;break;case"TR":var b=t.cells;for(var r=0,u;u=b[r++];){d.currentSelectedArr.push(u);u.className=d.options.selectedTdClass}break;case"TABLE":case"TBODY":var a=t.rows;for(var r=0,i;i=a[r++];){b=i.cells;for(var s=0,w;w=b[s++];){d.currentSelectedArr.push(w);w.className=d.options.selectedTdClass}}}t=d.currentSelectedArr[0];if(domUtils.isEmptyNode(t)){j.setStart(t,0).setCursor()}else{j.selectNodeContents(t).select()}}else{j.selectNode(t).select()}},queryCommandValue:function(){var i=[].concat(this.selection.getStartElementPath()).reverse(),a=[];e=i;for(var b=0,c;c=i[b];b++){if(c.nodeType==3){continue}var j=c.tagName.toLowerCase();if(j=="img"&&c.getAttribute("anchorname")){j="anchor"}a[b]=j;if(f==b){f=-1;break}}return a}}};UE.plugins.autolink=function(){var d=0;if(browser.ie){return}var c=this;c.addListener("reset",function(){d=0});c.addListener("keydown",function(s,q){var a=q.keyCode||q.which;if(a==32||a==13){var w=c.selection.getNative(),u=w.getRangeAt(0).cloneRange(),v,b;var x=u.startContainer;while(x.nodeType==1&&u.startOffset>0){x=u.startContainer.childNodes[u.startOffset-1];if(!x){break}u.setStart(x,x.nodeType==1?x.childNodes.length:x.nodeValue.length);u.collapse(true);x=u.startContainer}do{if(u.startOffset==0){x=u.startContainer.previousSibling;while(x&&x.nodeType==1){x=x.lastChild}if(!x||domUtils.isFillChar(x)){break}v=x.nodeValue.length}else{x=u.startContainer;v=u.startOffset}u.setStart(x,v-1);b=u.toString().charCodeAt(0)}while(b!=160&&b!=32);if(u.toString().replace(new RegExp(domUtils.fillChar,"g"),"").match(/(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i)){while(u.toString().length){if(/^(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i.test(u.toString())){break}try{u.setStart(u.startContainer,u.startOffset+1)}catch(t){var x=u.startContainer;while(!(next=x.nextSibling)){if(domUtils.isBody(x)){return}x=x.parentNode}u.setStart(next,0)}}var r=c.document.createElement("a"),e=c.document.createTextNode(" "),y;c.undoManger&&c.undoManger.save();r.appendChild(u.extractContents());r.href=r.innerHTML=r.innerHTML.replace(/<[^>]+>/g,"");y=r.getAttribute("href").replace(new RegExp(domUtils.fillChar,"g"),"");y=/^(?:https?:\/\/)/ig.test(y)?y:"http://"+y;r.setAttribute("data_ue_src",y);r.href=y;u.insertNode(r);r.parentNode.insertBefore(e,r.nextSibling);u.setStart(e,0);u.collapse(true);w.removeAllRanges();w.addRange(u);c.undoManger&&c.undoManger.save()}}})};UE.plugins.catchremoteimage=function(){if(this.options.catchRemoteImageEnable===false){return}var me=this;this.setOpt({localDomain:["127.0.0.1","localhost","img.baidu.com"],separater:"ue_separate_ue",catchFieldName:"upfile",catchRemoteImageEnable:true});var ajax=UE.ajax,localDomain=me.options.localDomain,catcherUrl=me.options.catcherUrl,separater=me.options.separater;function catchremoteimage(imgs,callbacks){var submitStr=imgs.join(separater);var tmpOption={timeout:60000,onsuccess:callbacks.success,onerror:callbacks.error};tmpOption[me.options.catchFieldName]=submitStr;ajax.request(catcherUrl,tmpOption)}me.addListener("afterpaste",function(){me.fireEvent("catchRemoteImage")});me.addListener("catchRemoteImage",function(){var remoteImages=[];var imgs=domUtils.getElementsByTagName(me.document,"img");var test=function(src,urls){for(var j=0,url;url=urls[j++];){if(src.indexOf(url)!==-1){return true}}return false};for(var i=0,ci;ci=imgs[i++];){if(ci.getAttribute("word_img")){continue}var src=ci.getAttribute("data_ue_src")||ci.src||"";if(/^(https?|ftp):/i.test(src)&&!test(src,localDomain)){remoteImages.push(src)}}if(remoteImages.length){catchremoteimage(remoteImages,{success:function(xhr){try{var info=eval("("+xhr.responseText+")")}catch(e){return}var srcUrls=info.srcUrl.split(separater),urls=info.url.split(separater);for(var i=0,ci;ci=imgs[i++];){var src=ci.getAttribute("data_ue_src")||ci.src||"";for(var j=0,cj;cj=srcUrls[j++];){var url=urls[j-1];if(src==cj&&url!="error"){var newSrc=me.options.catcherPath+url;domUtils.setAttributes(ci,{src:newSrc,data_ue_src:newSrc});break}}}},error:function(){me.fireEvent("catchremoteerror")}})}})};UE.commands.autosubmit={execCommand:function(){var c=this,d=domUtils.findParentByTagName(c.iframe,"form",false);if(d){if(c.fireEvent("beforesubmit")===false){return}c.sync();d.submit()}}};UE.plugins.undo=function(){var t=this,o=t.options.maxUndoCount||20,u=t.options.maxInputCount||20,y=new RegExp(domUtils.fillChar+"|</hr>","gi"),C=/\b(?:href|src|name)="[^"]*?"/gi;function r(b){var a=this;a.collapsed=b.collapsed;a.startAddr=s(b.startContainer,b.startOffset);a.endAddr=b.collapsed?a.startAddr:s(b.endContainer,b.endOffset)}r.prototype={compare:function(a){if(t.collapsed!==a.collapsed){return 0}if(!w(t.startAddr,a.startAddr)||!w(t.endAddr,a.endAddr)){return 0}return 1},transformRange:function(b){var a=this;b.collapsed=a.collapsed;z(b,"start",a.startAddr);b.collapsed?b.collapse(true):z(b,"end",a.endAddr)}};function s(a,e){for(var c=0,g=[e],d,f=domUtils.findParents(a,true,function(h){return !domUtils.isBody(h)},true);d=f[c++];){if(c==1&&d.nodeType==3){var b=d;while(b=b.previousSibling){if(b.nodeType==3){e+=b.nodeValue.replace(fillCharReg,"").length}else{break}}g[0]=e}g.push(domUtils.getNodeIndex(d,true))}return g.reverse()}function w(a,b){if(a.length!=b.length){return 0}for(var c=0,d=a.length;c<d;c++){if(a[c]!=b[c]){return 0}}return 1}function z(e,a,b){c=e.document.body;for(var d=0,c,f=b.length-1;d<f;d++){c=c.childNodes[b[d]]}e[a+"Container"]=c;e[a+"Offset"]=b[b.length-1]}function A(){this.list=[];this.index=0;this.hasUndo=false;this.hasRedo=false;this.undo=function(){if(this.hasUndo){var a=this.getScene(),b=this.list[this.index];if(b.content.replace(C,"")!=a.content.replace(C,"")){this.save()}if(!this.list[this.index-1]&&this.list.length==1){this.reset();return}while(this.list[this.index].content==this.list[this.index-1].content){this.index--;if(this.index==0){return this.restore(0)}}this.restore(--this.index)}};this.redo=function(){if(this.hasRedo){while(this.list[this.index].content==this.list[this.index+1].content){this.index++;if(this.index==this.list.length-1){return this.restore(this.index)}}this.restore(++this.index)}};this.restore=function(){var c=this.list[this.index];t.document.body.innerHTML=c.bookcontent.replace(y,"");if(browser.ie){for(var g=0,d,b=t.document.getElementsByTagName("p");d=b[g++];){if(d.innerHTML==""){domUtils.fillNode(t.document,d)}}}var h=new dom.Range(t.document);try{if(browser.opera||browser.safari){c.senceRange.transformRange(h)}else{h.moveToBookmark({start:"_baidu_bookmark_start_",end:"_baidu_bookmark_end_",id:true})}if(browser.ie&&browser.version==9&&h.collapsed&&domUtils.isBlockElm(h.startContainer)&&domUtils.isEmptyNode(h.startContainer)){domUtils.fillNode(h.document,h.startContainer)}h.select(!browser.gecko);if(!(browser.opera||browser.safari)){setTimeout(function(){h.scrollToView(t.autoHeightEnabled,t.autoHeightEnabled?domUtils.getXY(t.iframe).y:0)},200)}}catch(e){}this.update();if(t.currentSelectedArr){t.currentSelectedArr=[];var f=t.document.getElementsByTagName("td");for(var g=0,a;a=f[g++];){if(a.className==t.options.selectedTdClass){t.currentSelectedArr.push(a)}}}this.clearKey();t.fireEvent("reset",true)};this.getScene=function(){var c=t.selection.getRange(),d=t.body.innerHTML.replace(y,"");c.shrinkBoundary();browser.ie&&(d=d.replace(/>&nbsp;</g,"><").replace(/\s*</g,"").replace(/>\s*/g,">"));if(browser.opera||browser.safari){return{senceRange:new r(c),content:d,bookcontent:d}}else{var a=c.createBookmark(true,true),b=t.body.innerHTML.replace(y,"");a&&c.moveToBookmark(a).select(true);return{bookcontent:b,content:d}}};this.save=function(){var a=this.getScene(),b=this.list[this.index];if(b&&b.content==a.content&&((browser.opera||browser.safari)?b.senceRange.compare(a.senceRange):b.bookcontent==a.bookcontent)){return}this.list=this.list.slice(0,this.index+1);this.list.push(a);if(this.list.length>o){this.list.shift()}this.index=this.list.length-1;this.clearKey();this.update()};this.update=function(){this.hasRedo=this.list[this.index+1]?true:false;this.hasUndo=this.list[this.index-1]||this.list.length==1?true:false};this.reset=function(){this.list=[];this.index=0;this.hasUndo=false;this.hasRedo=false;this.clearKey()};this.clearKey=function(){x=0;B=null;t.fireEvent("contentchange")}}t.undoManger=new A();function v(){this.undoManger.save()}t.addListener("beforeexeccommand",v);t.addListener("afterexeccommand",v);t.addListener("reset",function(a,b){if(!b){t.undoManger.reset()}});t.commands.redo=t.commands.undo={execCommand:function(a){t.undoManger[a]()},queryCommandState:function(a){return t.undoManger["has"+(a.toLowerCase()=="undo"?"Undo":"Redo")]?0:-1},notNeedUndo:1};var q={16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},x=0,B;t.addListener("keydown",function(b,c){var a=c.keyCode||c.which;if(!q[a]&&!c.ctrlKey&&!c.metaKey&&!c.shiftKey&&!c.altKey){if(t.undoManger.list.length==0||((a==8||a==46)&&B!=a)){t.undoManger.save(true);B=a;return}if(t.undoManger.list.length==2&&t.undoManger.index==0&&x==0){t.undoManger.list.splice(1,1);t.undoManger.update()}B=a;x++;if(x>=u){if(t.selection.getRange().collapsed){t.undoManger.save()}}}})};UE.plugins.selectall=function(){var b=this;b.commands.selectall={execCommand:function(){var e=this,a=e.body,f=e.selection.getRange();f.selectNodeContents(a);if(domUtils.isEmptyBlock(a)){if(browser.opera&&a.firstChild&&a.firstChild.nodeType==1){f.setStartAtFirst(a.firstChild)}f.collapse(true)}f.select(true);this.selectAll=true},notNeedUndo:1};b.addListener("ready",function(){domUtils.on(b.document,"click",function(a){b.selectAll=false})})};UE.plugins.keystrokes=function(){var j=this,h=0,k=domUtils.keys,g={B:"strong",I:"em",FONT:"span"},l=[0,10,12,16,18,24,32,48],i={OL:["decimal","lower-alpha","lower-roman","upper-alpha","upper-roman"],UL:["circle","disc","square"]};j.addListener("keydown",function(W,d){var R=d.keyCode||d.which;if(this.selectAll){this.selectAll=false;if((R==8||R==46)){j.undoManger&&j.undoManger.save();j.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>";new dom.Range(j.document).setStart(j.body.firstChild,0).setCursor(false,true);j.undoManger&&j.undoManger.save();browser.ie&&j._selectionChange();domUtils.preventDefault(d);return}}if(R==8){var I=j.selection.getRange(),f,U,V;if(I.collapsed){U=I.startContainer;if(domUtils.isWhitespace(U)){U=U.parentNode}if(domUtils.isEmptyNode(U)&&U===j.body.firstChild){if(U.tagName!="P"){p=j.document.createElement("p");j.body.insertBefore(p,U);domUtils.fillNode(j.document,p);I.setStart(p,0).setCursor(false,true);domUtils.remove(U)}domUtils.preventDefault(d);return}}if(I.collapsed&&I.startContainer.nodeType==3&&I.startContainer.nodeValue.replace(new RegExp(domUtils.fillChar,"g"),"").length==0){I.setStartBefore(I.startContainer).collapse(true)}if(U=I.getClosedNode()){j.undoManger&&j.undoManger.save();I.setStartBefore(U);domUtils.remove(U);I.setCursor();j.undoManger&&j.undoManger.save();domUtils.preventDefault(d);return}if(!browser.ie){U=domUtils.findParentByTagName(I.startContainer,"table",true);V=domUtils.findParentByTagName(I.endContainer,"table",true);if(U&&!V||!U&&V||U!==V){d.preventDefault();return}}if(j.undoManger){if(!I.collapsed){j.undoManger.save();h=1}}}if(R==9){I=j.selection.getRange();j.undoManger&&j.undoManger.save();for(var K=0,G="",c=j.options.tabSize||4,O=j.options.tabNode||"&nbsp;";K<c;K++){G+=O}var L=j.document.createElement("span");L.innerHTML=G;if(I.collapsed){var M=domUtils.findParentByTagName(I.startContainer,"li",true);if(M&&domUtils.isStartInblock(I)){X=I.createBookmark();var P=M.parentNode,H=j.document.createElement(P.tagName);var T=utils.indexOf(i[H.tagName],domUtils.getComputedStyle(P,"list-style-type"));T=T+1==i[H.tagName].length?0:T+1;domUtils.setStyle(H,"list-style-type",i[H.tagName][T]);P.insertBefore(H,M);H.appendChild(M);I.moveToBookmark(X).select()}else{I.insertNode(L.cloneNode(true).firstChild).setCursor(true)}}else{U=domUtils.findParentByTagName(I.startContainer,"table",true);V=domUtils.findParentByTagName(I.endContainer,"table",true);if(U||V){d.preventDefault?d.preventDefault():(d.returnValue=false);return}U=domUtils.findParentByTagName(I.startContainer,["ol","ul"],true);V=domUtils.findParentByTagName(I.endContainer,["ol","ul"],true);if(U&&V&&U===V){var X=I.createBookmark();U=domUtils.findParentByTagName(I.startContainer,"li",true);V=domUtils.findParentByTagName(I.endContainer,"li",true);if(U===U.parentNode.firstChild){var J=j.document.createElement(U.parentNode.tagName);U.parentNode.parentNode.insertBefore(J,U.parentNode);J.appendChild(U.parentNode)}else{P=U.parentNode;H=j.document.createElement(P.tagName);T=utils.indexOf(i[H.tagName],domUtils.getComputedStyle(P,"list-style-type"));T=T+1==i[H.tagName].length?0:T+1;domUtils.setStyle(H,"list-style-type",i[H.tagName][T]);U.parentNode.insertBefore(H,U);var N;while(U!==V){N=U.nextSibling;H.appendChild(U);U=N}H.appendChild(V)}I.moveToBookmark(X).select()}else{if(U||V){d.preventDefault?d.preventDefault():(d.returnValue=false);return}U=domUtils.findParent(I.startContainer,e);V=domUtils.findParent(I.endContainer,e);if(U&&V&&U===V){I.deleteContents();I.insertNode(L.cloneNode(true).firstChild).setCursor(true)}else{var S=I.createBookmark(),e=function(m){return domUtils.isBlockElm(m)};I.enlarge(true);var a=I.createBookmark(),b=domUtils.getNextDomNode(a.start,false,e);while(b&&!(domUtils.getPosition(b,a.end)&domUtils.POSITION_FOLLOWING)){b.insertBefore(L.cloneNode(true).firstChild,b.firstChild);b=domUtils.getNextDomNode(b,false,e)}I.moveToBookmark(a).moveToBookmark(S).select()}}}j.undoManger&&j.undoManger.save();d.preventDefault?d.preventDefault():(d.returnValue=false)}if(browser.gecko&&R==46){I=j.selection.getRange();if(I.collapsed){U=I.startContainer;if(domUtils.isEmptyBlock(U)){var Q=U.parentNode;while(domUtils.getChildCount(Q)==1&&!domUtils.isBody(Q)){U=Q;Q=Q.parentNode}if(U===Q.lastChild){d.preventDefault()}return}}}});j.addListener("keyup",function(a,H){var D=H.keyCode||H.which;if(!browser.gecko&&!k[D]&&!H.ctrlKey&&!H.metaKey&&!H.shiftKey&&!H.altKey){c=j.selection.getRange();if(c.collapsed){var B=c.startContainer,A=0;while(!domUtils.isBlockElm(B)){if(B.nodeType==1&&utils.indexOf(["FONT","B","I"],B.tagName)!=-1){var z=j.document.createElement(g[B.tagName]);if(B.tagName=="FONT"){z.style.cssText=(B.getAttribute("size")?"font-size:"+(l[B.getAttribute("size")]||12)+"px":"")+";"+(B.getAttribute("color")?"color:"+B.getAttribute("color"):"")+";"+(B.getAttribute("face")?"font-family:"+B.getAttribute("face"):"")+";"+B.style.cssText}while(B.firstChild){z.appendChild(B.firstChild)}B.parentNode.insertBefore(z,B);domUtils.remove(B);if(!A){c.setEnd(z,z.childNodes.length).collapse(true)}B=z;A=1}B=B.parentNode}A&&c.select()}}if(D==8){if(browser.gecko){for(var e=0,G,E=domUtils.getElementsByTagName(this.body,"li");G=E[e++];){if(domUtils.isEmptyNode(G)&&!G.previousSibling){var F=G.parentNode;domUtils.remove(G);if(domUtils.isEmptyNode(F)){domUtils.remove(F)}}}}var c,B,I,f=this.currentSelectedArr;if(f&&f.length>0){for(var e=0,C;C=f[e++];){C.innerHTML=browser.ie?(browser.version<9?"&#65279":""):"<br/>"}c=new dom.Range(this.document);c.setStart(f[0],0).setCursor();if(h){j.undoManger.save();h=0}if(browser.webkit){H.preventDefault()}return}c=j.selection.getRange();B=c.startContainer;if(domUtils.isWhitespace(B)){B=B.parentNode}var b=0;while(B.nodeType==1&&domUtils.isEmptyNode(B)&&dtd.$removeEmpty[B.tagName]){b=1;I=B.parentNode;domUtils.remove(B);B=I}if(b&&B.nodeType==1&&domUtils.isEmptyNode(B)){if(browser.ie){var J=c.document.createElement("span");B.appendChild(J);c.setStart(B,0).setCursor();G=domUtils.findParentByTagName(B,"li",true);if(G){var d=G.nextSibling;while(d){if(domUtils.isEmptyBlock(d)){G=d;d=d.nextSibling;domUtils.remove(G);continue}break}}}else{B.innerHTML="<br/>";c.setStart(B,0).setCursor(false,true)}setTimeout(function(){if(browser.ie){domUtils.remove(J)}if(h){j.undoManger.save();h=0}},0)}else{if(h){j.undoManger.save();h=0}}}})};UE.plugins.serialize=function(){var B=browser.ie,L=browser.version;function w(a){return/pt/.test(a)?a.replace(/([\d.]+)pt/g,function(b){return Math.round(parseFloat(b)*96/72)+"px"}):a}var v=this,C=v.options.autoClearEmptyNode,I=dtd.$empty,A=function(){var b=/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)-->)|(?:([^\s\/>]+)\s*((?:(?:"[^"]*")|(?:'[^']*')|[^"'<>])*)\/?>))/g,d=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,g={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1},f={script:1,style:1},c={li:{"$":"ul",ul:1,ol:1},dd:{"$":"dl",dl:1},dt:{"$":"dl",dl:1},option:{"$":"select",select:1},td:{"$":"tr",tr:1},th:{"$":"tr",tr:1},tr:{"$":"tbody",tbody:1,thead:1,tfoot:1,table:1},tbody:{"$":"table",table:1,colgroup:1},thead:{"$":"table",table:1},tfoot:{"$":"table",table:1},col:{"$":"colgroup",colgroup:1}};var e={table:"td",tbody:"td",thead:"td",tfoot:"td",tr:"td",colgroup:"col",ul:"li",ol:"li",dl:"dd",select:"option"};function a(u,q){var t,s=0,h,k;b.exec("");while((t=b.exec(u))){var m=t.index;if(m>s){var j=u.slice(s,m);if(k){k.push(j)}else{q.onText(j)}}s=b.lastIndex;if((h=t[1])){h=h.toLowerCase();if(k&&h==k._tag_name){q.onCDATA(k.join(""));k=null}if(!k){q.onTagClose(h);continue}}if(k){k.push(t[0]);continue}if((h=t[3])){if(/="/.test(h)){continue}h=h.toLowerCase();var l=t[4],i,Q={},n=l&&l.slice(-1)=="/";if(l){d.exec("");while((i=d.exec(l))){var o=i[1].toLowerCase(),r=i[2]||i[3]||i[4]||"";if(!r&&g[o]){r=o}if(o=="style"){if(B&&L<=6){r=r.replace(/(?!;)\s*([\w-]+):/g,function(S,P){return P.toLowerCase()+":"})}}if(r){Q[o]=r.replace(/:\s*/g,":")}}}q.onTagOpen(h,Q,n);if(!k&&f[h]){k=[];k._tag_name=h}continue}if((h=t[2])){q.onComment(h)}}if(u.length>s){q.onText(u.slice(s,u.length))}}return function(k,j){var m={type:"fragment",parent:null,children:[]};var l=m;function h(o){o.parent=l;l.children.push(o)}function i(q,r){var o=q;if(c[o.tag]){while(c[l.tag]&&c[l.tag][o.tag]){l=l.parent}if(l.tag==o.tag){l=l.parent}while(c[o.tag]){if(c[o.tag][l.tag]){break}o=o.parent={type:"element",tag:c[o.tag]["$"],attributes:{},children:[o]}}}if(j){while(dtd[o.tag]&&!(l.tag=="span"?utils.extend(dtd.strong,{a:1,A:1}):(dtd[l.tag]||dtd.div))[o.tag]){if(n(l)){continue}if(!l.parent){break}l=l.parent}}o.parent=l;l.children.push(o);if(r){l=q}if(q.attributes.style){q.attributes.style=q.attributes.style.toLowerCase()}return q}function n(q){var o;if(!q.children.length&&(o=e[q.tag])){i({type:"element",tag:o,attributes:{},children:[]},true);return true}return false}a(k,{onText:function(o){while(!(dtd[l.tag]||dtd.div)["#"]){if(n(l)){continue}l=l.parent}h({type:"text",data:o})},onComment:function(o){h({type:"comment",data:o})},onCDATA:function(o){while(!(dtd[l.tag]||dtd.div)["#"]){if(n(l)){continue}l=l.parent}h({type:"cdata",data:o})},onTagOpen:function(r,o,q){q=q||I[r];i({type:"element",tag:r,attributes:o,closed:q,children:[]},!q)},onTagClose:function(r){var q=l;while(q&&r!=q.tag){q=q.parent}if(q){for(var o=l;o!==q.parent;o=o.parent){n(o)}l=q.parent}else{if(!(dtd.$removeEmpty[r]||dtd.$removeEmptyBlock[r]||r=="embed")){q={type:"element",tag:r,attributes:{},children:[]};i(q,true);n(q);l=q.parent}}}});while(l!==m){n(l);l=l.parent}return m}}();var F=function(){var a={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function b(c){return a[c]}return function(c){c=c+"";return c?c.replace(/[<>"']/g,b):""}}();var D=function(){function b(h,i){var j=h.children;var g=[];for(var k=0,f;f=j[k];k++){g.push(D(f,i))}return g.join("")}function a(i){var g=[];for(var f in i){var h=i[f];if(f=="style"){h=w(h);if(/rgba?\s*\([^)]*\)/.test(h)){h=h.replace(/rgba?\s*\(([^)]*)\)/g,function(j){return utils.fixColor("color",j)})}i[f]=utils.optCss(h.replace(/windowtext/g,"#000")).replace(/white-space[^;]+;/g,"")}g.push(f+'="'+F(i[f])+'"')}return g.join(" ")}function c(g,f){return f?g.data.replace(/&nbsp;/g," "):F(g.data).replace(/ /g,"&nbsp;")}var d={div:"p",li:"p",tr:"p",br:"br",p:"p"};function e(g,h){if(g.type=="element"&&!g.children.length&&(dtd.$removeEmpty[g.tag])&&g.tag!="a"&&utils.isEmptyObject(g.attributes)&&C){return i}var f=g.tag;if(h&&f=="td"){if(!i){i=""}i+=b(g,h)+"&nbsp;&nbsp;&nbsp;"}else{var j=a(g.attributes);var i="<"+(h&&d[f]?d[f]:f)+(j?" "+j:"")+(I[f]?" />":">");if(!I[f]){if(f=="p"&&!g.children.length){i+=browser.ie?"&nbsp;":"<br/>"}i+=b(g,h);i+="</"+(h&&d[f]?d[f]:f)+">"}}return i}return function(g,f){if(g.type=="fragment"){return b(g,f)}else{if(g.type=="element"){return e(g,f)}else{if(g.type=="text"||g.type=="cdata"){return c(g,dtd.$notTransContent[g.parent.tag])}else{if(g.type=="comment"){return"<!--"+g.data+"-->"}}}}return""}}();var H=function(){function b(d){var e=new RegExp(/(class="?Mso|style="[^"]*\bmso\-|w:WordDocument|<v:)/ig);return e.test(d)}function a(d){d=d.replace(/([\d.]+)([\w]+)?/g,function(f,g,e){return(Math.round(parseFloat(g))||1)+(e||"px")});return d}function c(d){d=d.replace(/<!--\s*EndFragment\s*-->[\s\S]*$/,"").replace(/^(\r\n|\n|\r)|(\r\n|\n|\r)$/ig,"").replace(/^\s*(&nbsp;)+/ig,"").replace(/(&nbsp;|<br[^>]*>)+\s*$/ig,"").replace(/<!--[\s\S]*?-->/ig,"").replace(/<v:shape [^>]*>[\s\S]*?.<\/v:shape>/gi,function(f){if(browser.opera){return""}try{var e=f.match(/width:([ \d.]*p[tx])/i)[1],h=f.match(/height:([ \d.]*p[tx])/i)[1],g=f.match(/src=\s*"([^"]*)"/i)[1];return'<img width="'+w(e)+'" height="'+w(h)+'" src="'+g+'" />'}catch(i){return""}}).replace(/v:\w+=["']?[^'"]+["']?/g,"").replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|xml|meta|link|style|\w+:\w+)(?=[\s\/>]))[^>]*>/gi,"").replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>").replace(/(lang)\s*=\s*([\'\"]?)[\w-]+\2/ig,"").replace(/<font[^>]*>\s*<\/font>/gi,"").replace(/class\s*=\s*["']?(?:(?:MsoTableGrid)|(?:MsoListParagraph)|(?:MsoNormal(Table)?))\s*["']?/gi,"");d=d.replace(/(<[a-z][^>]*)\sstyle=(["'])([^\2]*?)\2/gi,function(n,j,e,h){var g=[],o=0,k=h.replace(/^\s+|\s+$/,"").replace(/&quot;/gi,"'").split(/;\s*/g);for(var o=0;o<k.length;o++){var l=k[o];var i,m,f=l.split(":");if(f.length==2){i=f[0].toLowerCase();m=f[1].toLowerCase();switch(i){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":if(!/<table/.test(j)){g[o]=i.replace(/^mso-|-alt$/g,"")+":"+a(m)}continue;case"horiz-align":g[o]="text-align:"+m;continue;case"vert-align":g[o]="vertical-align:"+m;continue;case"font-color":case"mso-foreground":g[o]="color:"+m;continue;case"mso-background":case"mso-highlight":g[o]="background:"+m;continue;case"mso-default-height":g[o]="min-height:"+a(m);continue;case"mso-default-width":g[o]="min-width:"+a(m);continue;case"mso-padding-between-alt":g[o]="border-collapse:separate;border-spacing:"+a(m);continue;case"text-line-through":if((m=="single")||(m=="double")){g[o]="text-decoration:line-through"}continue;case"mso-zero-height":if(m=="yes"){g[o]="display:none"}continue;case"margin":if(!/[1-9]/.test(f[1])){continue}}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(i)){continue}if(/text\-indent|padding|margin/.test(i)&&/\-[\d.]+/.test(m)){continue}g[o]=i+":"+f[1]}}if(o>0){return j+' style="'+g.join(";")+'"'}else{return j}});d=d.replace(/([ ]+)<\/span>/ig,function(f,e){return new Array(e.length+1).join("&nbsp;")+"</span>"});return d}return function(d){J=null;x="",G="",z="";if(b(d)){d=c(d)}return d.replace(/>[ \t\r\n]*</g,"><")}}();var M={text:"#text",comment:"#comment",cdata:"#cdata-section",fragment:"#document-fragment"};var J,x="",G="",z;function K(f,e){var c=[0,10,12,16,18,24,32,48],d,a=utils.indexOf;switch(f.tag){case"script":f.tag="div";f.attributes._ue_div_script=1;f.attributes._ue_script_data=f.children[0]?encodeURIComponent(f.children[0].data):"";f.attributes._ue_custom_node_=1;f.children=[];break;case"style":f.tag="div";f.attributes._ue_div_style=1;f.attributes._ue_style_data=f.children[0]?encodeURIComponent(f.children[0].data):"";f.attributes._ue_custom_node_=1;f.children=[];break;case"img":if(f.attributes.src&&/^data:/.test(f.attributes.src)){return{type:"fragment",children:[]}}if(f.attributes.src&&/^(?:file)/.test(f.attributes.src)){if(!/(gif|bmp|png|jpg|jpeg)$/.test(f.attributes.src)){return{type:"fragment",children:[]}}f.attributes.word_img=f.attributes.src;f.attributes.src=v.options.UEDITOR_HOME_URL+"themes/default/images/spacer.gif";var b=parseInt(f.attributes.width)<128||parseInt(f.attributes.height)<43;f.attributes.style="background:url("+(b?v.options.UEDITOR_HOME_URL+"themes/default/images/word.gif":v.options.langPath+v.options.lang+"/images/localimage.png")+") no-repeat center center;border:1px solid #ddd";e&&(e.flag=1)}if(browser.ie&&browser.version<7){f.attributes.orgSrc=f.attributes.src}f.attributes.data_ue_src=f.attributes.data_ue_src||f.attributes.src;break;case"li":var h=f.children[0];if(!h||h.type!="element"||h.tag!="p"&&dtd.p[h.tag]){var g={type:"element",tag:"p",attributes:{},parent:f};g.children=h?f.children:[browser.ie?{type:"text",data:domUtils.fillChar,parent:g}:{type:"element",tag:"br",attributes:{},closed:true,children:[],parent:g}];f.children=[g]}break;case"table":case"td":O(f);break;case"a":if(f.attributes.anchorname){f.tag="img";f.attributes={"class":"anchorclass",anchorname:f.attributes.name};f.closed=1}f.attributes.href&&(f.attributes.data_ue_src=f.attributes.href);break;case"b":f.tag=f.name="strong";break;case"i":f.tag=f.name="em";break;case"u":f.tag=f.name="span";f.attributes.style=(f.attributes.style||"")+";text-decoration:underline;";break;case"s":case"del":f.tag=f.name="span";f.attributes.style=(f.attributes.style||"")+";text-decoration:line-through;";if(f.children.length==1){h=f.children[0];if(h.tag==f.tag){f.attributes.style+=";"+h.attributes.style;f.children=h.children}}break;case"span":var i=f.attributes.style;if(i){if(!f.attributes.style||browser.webkit&&i=="white-space:nowrap;"){delete f.attributes.style}}if(browser.gecko&&browser.version<=10902&&f.parent){var j=f.parent;if(j.tag=="span"&&j.attributes&&j.attributes.style){f.attributes.style=j.attributes.style+";"+f.attributes.style}}if(utils.isEmptyObject(f.attributes)&&C){f.type="fragment"}break;case"font":f.tag=f.name="span";d=f.attributes;f.attributes={style:(d.size?"font-size:"+(c[d.size]||12)+"px":"")+";"+(d.color?"color:"+d.color:"")+";"+(d.face?"font-family:"+d.face:"")+";"+(d.style||"")};while(f.parent.tag==f.tag&&f.parent.children.length==1){f.attributes.style&&(f.parent.attributes.style?(f.parent.attributes.style+=";"+f.attributes.style):(f.parent.attributes.style=f.attributes.style));f.parent.children=f.children;f=f.parent}break;case"p":if(f.attributes.align){f.attributes.style=(f.attributes.style||"")+";text-align:"+f.attributes.align+";";delete f.attributes.align}}return f}function O(a){if(B&&a.attributes.style){var b=a.attributes.style;a.attributes.style=b.replace(/;\s*/g,";");a.attributes.style=a.attributes.style.replace(/^\s*|\s*$/,"")}}function E(b){switch(b.tag){case"div":if(b.attributes._ue_div_script){b.tag="script";b.children=[{type:"cdata",data:b.attributes._ue_script_data?decodeURIComponent(b.attributes._ue_script_data):"",parent:b}];delete b.attributes._ue_div_script;delete b.attributes._ue_script_data;delete b.attributes._ue_custom_node_}if(b.attributes._ue_div_style){b.tag="style";b.children=[{type:"cdata",data:b.attributes._ue_style_data?decodeURIComponent(b.attributes._ue_style_data):"",parent:b}];delete b.attributes._ue_div_style;delete b.attributes._ue_style_data;delete b.attributes._ue_custom_node_}break;case"table":!b.attributes.style&&delete b.attributes.style;if(B&&b.attributes.style){O(b)}if(b.attributes["class"]=="noBorderTable"){delete b.attributes["class"]}break;case"td":case"th":if(/display\s*:\s*none/i.test(b.attributes.style)){return{type:"fragment",children:[]}}if(B&&!b.children.length){var a={type:"text",data:domUtils.fillChar,parent:b};b.children[0]=a}if(B&&b.attributes.style){O(b)}if(b.attributes["class"]=="selectTdClass"){delete b.attributes["class"]}break;case"img":if(b.attributes.anchorname){b.tag="a";b.attributes={name:b.attributes.anchorname,anchorname:1};b.closed=null}else{if(b.attributes.data_ue_src){b.attributes.src=b.attributes.data_ue_src;delete b.attributes.data_ue_src}}break;case"a":if(b.attributes.data_ue_src){b.attributes.href=b.attributes.data_ue_src;delete b.attributes.data_ue_src}}return b}function N(g,b,d){if(!g.children||!g.children.length){return g}var e=g.children;for(var f=0;f<e.length;f++){var a=b(e[f],d);if(a.type=="fragment"){var c=[f,1];c.push.apply(c,a.children);e.splice.apply(e,c);if(!e.length){g={type:"fragment",children:[]}}f--}else{e[f]=a}}return g}function y(a){this.rules=a}y.prototype={rules:null,filter:function(b,a,e){a=a||this.rules;var c=a&&a.whiteList;var d=a&&a.blackList;function f(h,i){h.name=h.type=="element"?h.tag:M[h.type];if(i==null){return N(h,f,h)}if(d&&d[h.name]){e&&(e.flag=1);return{type:"fragment",children:[]}}if(c){if(h.type=="element"){if(i.type=="fragment"?c[h.name]:c[h.name]&&c[i.name][h.name]){var j;if((j=c[h.name].$)){var g=h.attributes;var k={};for(var l in j){if(g[l]){k[l]=g[l]}}h.attributes=k}}else{e&&(e.flag=1);h.type="fragment";h.name=i.name}}else{}}if(d||c){N(h,f,h)}return h}return f(b,null)},transformInput:function(b,c){function a(d){d=K(d,c);d=N(d,a,d);if(v.options.pageBreakTag&&d.type=="text"&&d.data.replace(/\s/g,"")==v.options.pageBreakTag){d.type="element";d.name=d.tag="hr";delete d.data;d.attributes={"class":"pagebreak",noshade:"noshade",size:"5",unselectable:"on",style:"moz-user-select:none;-khtml-user-select: none;"};d.children=[]}if(d.type=="text"&&!dtd.$notTransContent[d.parent.tag]){d.data=d.data.replace(/[\r\t\n]*/g,"")}return d}return a(b)},transformOutput:function(b){function a(c){if(c.tag=="hr"&&c.attributes["class"]=="pagebreak"){delete c.tag;c.type="text";c.data=v.options.pageBreakTag;delete c.children}c=E(c);if(c.tag=="ol"||c.tag=="ul"){J=1}c=N(c,a,c);if(c.tag=="ol"||c.tag=="ul"){J=0}return c}return a(b)},toHTML:D,parseHTML:A,word:H};v.serialize=new y(v.options.serialize||{});UE.serialize=new y({})};(function(){function b(g){var i=this.document;if(i.getElementById("baidu_pastebin")){return}var j=this.selection.getRange(),a=j.createBookmark(),h=i.createElement("div");h.id="baidu_pastebin";browser.webkit&&h.appendChild(i.createTextNode(domUtils.fillChar+domUtils.fillChar));i.body.appendChild(h);a.start.style.display="";h.style.cssText="position:absolute;width:1px;height:1px;overflow:hidden;left:-1000px;white-space:nowrap;top:"+domUtils.getXY(a.start).y+"px";j.selectNodeContents(h).select(true);setTimeout(function(){if(browser.webkit){for(var f=0,e=i.querySelectorAll("#baidu_pastebin"),c;c=e[f++];){if(domUtils.isEmptyNode(c)){domUtils.remove(c)}else{h=c;break}}}try{h.parentNode.removeChild(h)}catch(d){}j.moveToBookmark(a).select(true);g(h)},0)}UE.plugins.paste=function(){var g=this;var h={flag:""};var i=g.options.pasteplain===true;var a={flag:""};g.commands.pasteplain={queryCommandState:function(){return i},execCommand:function(){i=!i|0},notNeedUndo:1};function j(G){var I;if(G.firstChild){var D=domUtils.getElementsByTagName(G,"span");for(var e=0,O;O=D[e++];){if(O.id=="_baidu_cut_start"||O.id=="_baidu_cut_end"){domUtils.remove(O)}}if(browser.webkit){var F=G.querySelectorAll("div br");for(var e=0,Q;Q=F[e++];){var K=Q.parentNode;if(K.tagName=="DIV"&&K.childNodes.length==1){K.innerHTML="<p><br/></p>";domUtils.remove(K)}}var f=G.querySelectorAll("#baidu_pastebin");for(var e=0,d;d=f[e++];){var H=g.document.createElement("p");d.parentNode.insertBefore(H,d);while(d.firstChild){H.appendChild(d.firstChild)}domUtils.remove(d)}var R=G.querySelectorAll("meta");for(var e=0,L;L=R[e++];){domUtils.remove(L)}var F=G.querySelectorAll("br");for(e=0;L=F[e++];){if(/^apple-/.test(L)){domUtils.remove(L)}}}if(browser.gecko){var E=G.querySelectorAll("[_moz_dirty]");for(e=0;L=E[e++];){L.removeAttribute("_moz_dirty")}}if(!browser.ie){var M=G.querySelectorAll("span.apple-style-span");for(var e=0,L;L=M[e++];){domUtils.remove(L,true)}}I=G.innerHTML;var c=g.serialize;if(c){try{var C=c.transformInput(c.parseHTML(c.word(I)),h);C=c.filter(C,i?{whiteList:{p:{br:1,BR:1,$:{}},br:{"$":{}},div:{br:1,BR:1,"$":{}},li:{"$":{}},tr:{td:1,"$":{}},td:{"$":{}}},blackList:{style:1,script:1,object:1}}:null,!i?a:null);if(browser.webkit){var P=C.children.length,N;while((N=C.children[P-1])&&N.tag=="br"){C.children.splice(P-1,1);P=C.children.length}}I=c.toHTML(C,i)}catch(J){}}I={html:I};g.fireEvent("beforepaste",I);g.execCommand("insertHtml",I.html,true);g.fireEvent("afterpaste")}}g.addListener("ready",function(){domUtils.on(g.body,"cut",function(){var c=g.selection.getRange();if(!c.collapsed&&g.undoManger){g.undoManger.save()}});domUtils.on(g.body,browser.ie||browser.opera?"keydown":"paste",function(c){if((browser.ie||browser.opera)&&(!c.ctrlKey||c.keyCode!="86")){return}b.call(g,function(d){j(d)})})})}})();UE.plugins.fiximgclick=function(){var b=this;if(browser.webkit){b.addListener("click",function(f,e){if(e.target.tagName=="IMG"){var a=new dom.Range(b.document);a.selectNode(e.target).select()}})}};UE.plugins.enterkey=function(){var d,f=this,e=f.options.enterTag;f.addListener("keyup",function(c,b){var a=b.keyCode||b.which;if(a==13){var h=f.selection.getRange(),r=h.startContainer,u;if(!browser.ie){if(/h\d/i.test(d)){if(browser.gecko){var o=domUtils.findParentByTagName(r,["h1","h2","h3","h4","h5","h6","blockquote"],true);if(!o){f.document.execCommand("formatBlock",false,"<p>");u=1}}else{if(r.nodeType==1){var q=f.document.createTextNode(""),t;h.insertNode(q);t=domUtils.findParentByTagName(q,"div",true);if(t){var s=f.document.createElement("p");while(t.firstChild){s.appendChild(t.firstChild)}t.parentNode.insertBefore(s,t);domUtils.remove(t);h.setStartBefore(q).setCursor();u=1}domUtils.remove(q)}}if(f.undoManger&&u){f.undoManger.save()}}browser.opera&&h.select()}setTimeout(function(){f.selection.getRange().scrollToView(f.autoHeightEnabled,f.autoHeightEnabled?domUtils.getXY(f.iframe).y:0)},50)}});f.addListener("keydown",function(o,c){var a=c.keyCode||c.which;if(a==13){if(f.undoManger){f.undoManger.save()}d="";var s=f.selection.getRange();if(!s.collapsed){var u=s.startContainer,t=s.endContainer,r=domUtils.findParentByTagName(u,"td",true),q=domUtils.findParentByTagName(t,"td",true);if(r&&q&&r!==q||!r&&q||r&&!q){c.preventDefault?c.preventDefault():(c.returnValue=false);return}}f.currentSelectedArr&&domUtils.clearSelectedArr(f.currentSelectedArr);if(e=="p"){if(!browser.ie){u=domUtils.findParentByTagName(s.startContainer,["ol","ul","p","h1","h2","h3","h4","h5","h6","blockquote"],true);if(!u&&!browser.opera){f.document.execCommand("formatBlock",false,"<p>");if(browser.gecko){s=f.selection.getRange();u=domUtils.findParentByTagName(s.startContainer,"p",true);u&&domUtils.removeDirtyAttr(u)}}else{d=u.tagName;u.tagName.toLowerCase()=="p"&&browser.gecko&&domUtils.removeDirtyAttr(u)}}}else{c.preventDefault?c.preventDefault():(c.returnValue=false);if(!s.collapsed){s.deleteContents();u=s.startContainer;if(u.nodeType==1&&(u=u.childNodes[s.startOffset])){while(u.nodeType==1){if(dtd.$empty[u.tagName]){s.setStartBefore(u).setCursor();if(f.undoManger){f.undoManger.save()}return false}if(!u.firstChild){var b=s.document.createElement("br");u.appendChild(b);s.setStart(u,0).setCursor();if(f.undoManger){f.undoManger.save()}return false}u=u.firstChild}if(u===s.startContainer.childNodes[s.startOffset]){b=s.document.createElement("br");s.insertNode(b).setCursor()}else{s.setStart(u,0).setCursor()}}else{b=s.document.createElement("br");s.insertNode(b).setStartAfter(b).setCursor()}}else{b=s.document.createElement("br");s.insertNode(b);var n=b.parentNode;if(n.lastChild===b){b.parentNode.insertBefore(b.cloneNode(true),b);s.setStartBefore(b)}else{s.setStartAfter(b)}s.setCursor()}}}})};UE.commands["delete"]={execCommand:function(){var r=this.selection.getRange(),t=0,n=0,o=this;if(this.selectAll){o.body.innerHTML="<p>"+(browser.ie?"&nbsp;":"<br/>")+"</p>";r.setStart(o.body.firstChild,0).setCursor(false,true);o.selectAll=false;return}if(o.currentSelectedArr&&o.currentSelectedArr.length>0){for(var s=0,i;i=o.currentSelectedArr[s++];){if(i.style.display!="none"){i.innerHTML=browser.ie?domUtils.fillChar:"<br/>"}}r.setStart(o.currentSelectedArr[0],0).setCursor();return}if(r.collapsed){return}r.txtToElmBoundary();while(!r.startOffset&&!domUtils.isBody(r.startContainer)&&!dtd.$tableContent[r.startContainer.tagName]){t=1;r.setStartBefore(r.startContainer)}while(r.endContainer.nodeType!=3&&!domUtils.isBody(r.endContainer)&&!dtd.$tableContent[r.endContainer.tagName]){var v,m=r.endContainer,q=r.endOffset;v=m.childNodes[q];if(!v||domUtils.isBr(v)&&m.lastChild===v){r.setEndAfter(m);continue}break}if(t){var w=o.document.createElement("span");w.innerHTML="start";w.id="_baidu_cut_start";r.insertNode(w).setStartBefore(w)}if(n){var u=o.document.createElement("span");u.innerHTML="end";u.id="_baidu_cut_end";r.cloneRange().collapse(false).insertNode(u);r.setEndAfter(u)}r.deleteContents();if(domUtils.isBody(r.startContainer)&&domUtils.isEmptyBlock(o.body)){o.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>";r.setStart(o.body.firstChild,0).collapse(true)}else{if(!browser.ie&&domUtils.isEmptyBlock(r.startContainer)){r.startContainer.innerHTML="<br/>"}}r.select(true)},queryCommandState:function(){if(this.currentSelectedArr&&this.currentSelectedArr.length>0){return 0}return this.highlight||this.selection.getRange().collapsed?-1:0}};UE.commands.inserthtml={execCommand:function(K,F,i){var e=this,E,D,y=e.currentSelectedArr;E=e.selection.getRange();D=E.document.createElement("div");D.style.display="inline";var A=e.serialize;if(!i&&A){var z=A.parseHTML(F);z=A.transformInput(z);z=A.filter(z);F=A.toHTML(z)}D.innerHTML=utils.trim(F);try{e.adjustTable&&e.adjustTable(D)}catch(w){}if(y&&y.length){for(var x=0,I;I=y[x++];){I.className=""}y[0].innerHTML="";E.setStart(y[0],0).collapse(true);e.currentSelectedArr=[]}if(!E.collapsed){E.deleteContents();if(E.startContainer.nodeType==1){var H=E.startContainer.childNodes[E.startOffset],C;if(H&&domUtils.isBlockElm(H)&&(C=H.previousSibling)&&domUtils.isBlockElm(C)){E.setEnd(C,C.childNodes.length).collapse();while(H.firstChild){C.appendChild(H.firstChild)}domUtils.remove(H)}}}var H,G,C,v,J=0;while(H=D.firstChild){E.insertNode(H);if(!J&&H.nodeType==domUtils.NODE_ELEMENT&&domUtils.isBlockElm(H)){G=domUtils.findParent(H,function(a){return domUtils.isBlockElm(a)});if(G&&G.tagName.toLowerCase()!="body"&&!(dtd[G.tagName][H.nodeName]&&H.parentNode===G)){if(!dtd[G.tagName][H.nodeName]){C=G}else{v=H.parentNode;while(v!==G){C=v;v=v.parentNode}}domUtils.breakParent(H,C||v);var C=H.previousSibling;domUtils.trimWhiteTextNode(C);if(!C.childNodes.length){domUtils.remove(C)}if(!browser.ie&&(B=H.nextSibling)&&domUtils.isBlockElm(B)&&B.lastChild&&!domUtils.isBr(B.lastChild)){B.appendChild(e.document.createElement("br"))}J=1}}var B=H.nextSibling;if(!D.firstChild&&B&&domUtils.isBlockElm(B)){E.setStart(B,0).collapse(true);break}E.setEndAfter(H).collapse()}H=E.startContainer;if(domUtils.isBlockElm(H)&&domUtils.isEmptyNode(H)){H.innerHTML=browser.ie?"":"<br/>"}E.select(true);setTimeout(function(){E=e.selection.getRange();E.scrollToView(e.autoHeightEnabled,e.autoHeightEnabled?domUtils.getXY(e.iframe).y:0)},200)}};UE.plugins.shortcutkeys=function(){var c=this,d={"ctrl+66":"Bold","ctrl+90":"Undo","ctrl+89":"Redo","ctrl+73":"Italic","ctrl+85":"Underline","ctrl+shift+67":"removeformat","ctrl+shift+76":"justify:left","ctrl+shift+82":"justify:right","ctrl+65":"selectAll","ctrl+13":"autosubmit"};c.addListener("keydown",function(i,a){var b=a.keyCode||a.which,e;for(var j in d){if(/^(ctrl)(\+shift)?\+(\d+)$/.test(j.toLowerCase())||/^(\d+)$/.test(j)){if(((RegExp.$1=="ctrl"?(a.ctrlKey||a.metaKey||browser.opera&&b==17):0)&&(RegExp.$2!=""?a[RegExp.$2.slice(1)+"Key"]:1)&&b==RegExp.$3)||b==RegExp.$1){e=d[j].split(":");c.execCommand(e[0],e[1]);domUtils.preventDefault(a)}}}})};UE.I18N["zh-cn"]={labelMap:{anchor:"锚点",undo:"撤销",redo:"重做",bold:"加粗",indent:"首行缩进",snapscreen:"截图",italic:"斜体",underline:"下划线",strikethrough:"删除线",subscript:"下标",superscript:"上标",formatmatch:"格式刷",source:"源代码",blockquote:"引用",pasteplain:"纯文本粘贴模式",selectall:"全选",print:"打印",preview:"预览",horizontal:"分隔线",removeformat:"清除格式",time:"时间",date:"日期",unlink:"取消链接",insertrow:"前插入行",insertcol:"前插入列",mergeright:"右合并单元格",mergedown:"下合并单元格",deleterow:"删除行",deletecol:"删除列",splittorows:"拆分成行",splittocols:"拆分成列",splittocells:"完全拆分单元格",mergecells:"合并多个单元格",deletetable:"删除表格",insertparagraphbeforetable:"表格前插行",cleardoc:"清空文档",fontfamily:"字体",fontsize:"字号",paragraph:"段落格式",insertimage:"图片",inserttable:"表格",link:"超链接",emotion:"表情",spechars:"特殊字符",searchreplace:"查询替换",map:"Baidu地图",gmap:"Google地图",insertvideo:"视频",help:"帮助",justifyleft:"居左对齐",justifyright:"居右对齐",justifycenter:"居中对齐",justifyjustify:"两端对齐",forecolor:"字体颜色",backcolor:"背景色",insertorderedlist:"有序列表",insertunorderedlist:"无序列表",fullscreen:"全屏",directionalityltr:"从左向右输入",directionalityrtl:"从右向左输入",rowspacingtop:"段前距",rowspacingbottom:"段后距",highlightcode:"插入代码",pagebreak:"分页",insertframe:"插入Iframe",imagenone:"默认",imageleft:"左浮动",imageright:"右浮动",attachment:"附件",imagecenter:"居中",wordimage:"图片转存",lineheight:"行间距",edittd:"单元格",customstyle:"自定义标题",autotypeset:"自动排版",webapp:"百度应用",touppercase:"字母大写",tolowercase:"字母小写",background:"背景",template:"模板",scrawl:"涂鸦"},insertorderedlist:{decimal:"1,2,3...","lower-alpha":"a,b,c...","lower-roman":"i,ii,iii...","upper-alpha":"A,B,C...","upper-roman":"I,II,III..."},insertunorderedlist:{circle:"○ 小圆圈",disc:"● 小圆点",square:"■ 小方块 "},paragraph:{p:"段落",h1:"标题 1",h2:"标题 2",h3:"标题 3",h4:"标题 4",h5:"标题 5",h6:"标题 6"},fontfamily:{songti:"宋体",kaiti:"楷体",heiti:"黑体",lishu:"隶书",yahei:"微软雅黑",andaleMono:"andale mono",arial:"arial",arialBlack:"arial black",comicSansMs:"comic sans ms",impact:"impact",timesNewRoman:"times new roman"},customstyle:{tc:"标题居中",tl:"标题居左",im:"强调",hi:"明显强调"},elementPathTip:"元素路径",wordCountTip:"字数统计",wordCountMsg:"当前已输入{#count}个字符, 您还可以输入{#leave}个字符。 ",wordOverFlowMsg:'<span style="color:red;">您输入的字数已经超过了允许的最大字数，服务器可能拒绝保存！</span>',ok:"确认",cancel:"取消",closeDialog:"关闭对话框",tableDrag:"表格拖动必须引入uiUtils.js文件！",autofloatMsg:"工具栏浮动依赖编辑器UI，您首先需要引入UI文件!",snapScreen_plugin:{browserMsg:"仅支持IE浏览器！",callBackErrorMsg:"服务器返回数据有误，请检查配置项之后重试。",uploadErrorMsg:"截图上传失败，请检查服务器端环境! "},confirmClear:"确定清空当前文档么？",contextMenu:{"delete":"删除",selectall:"全选",deletecode:"删除代码",cleardoc:"清空文档",confirmclear:"确定清空当前文档么？",unlink:"删除超链接",paragraph:"段落格式",edittable:"表格属性",edittd:"单元格属性",justifyleft:"左对齐",justifyright:"右对齐",justifycenter:"居中对齐",justifyjustify:"两端对齐",table:"表格",deletetable:"删除表格",insertparagraphbeforetable:"表格前插入行",deleterow:"删除行",deletecol:"删除列",insertrow:"插入行",insertcol:"插入列",mergeright:"向右合并",mergeleft:"向左合并",mergedown:"向下合并",mergecells:"合并单元格",splittocells:"完全拆分单元格",splittocols:"拆分成列",splittorows:"拆分成行",copy:"复制(Ctrl + c)",copymsg:"请使用 'Ctrl + c'执行复制操作",paste:"粘贴(Ctrl + v)",pastemsg:"请使用'Ctrl + v'执行复制操作"},anthorMsg:"链接",clearColor:"清空颜色",standardColor:"标准颜色",themeColor:"主题颜色",property:"属性","default":"默认",modify:"修改",justifyleft:"左对齐",justifyright:"右对齐",justifycenter:"居中",justify:"默认",clear:"清除",anchorMsg:"锚点","delete":"删除",clickToUpload:"点击上传",unset:"尚未设置语言文件",t_row:"行",t_col:"列",more:"更多",autoTypeSet:{mergeLine:"合并空行",delLine:"清除空行",removeFormat:"清除格式",indent:"首行缩进",alignment:"对齐方式",imageFloat:"图片浮动",removeFontsize:"清除字号",removeFontFamily:"清除字体",removeHtml:"清除冗余HTML代码",pasteFilter:"粘贴过滤",run:"执行"},background:{"static":{lang_background_normal:"背景设置",lang_background_local:"本地图片",lang_background_set:"选项",lang_background_none:"无",lang_background_color:"颜色设置",lang_background_netimg:"网络图片",lang_background_align:"对齐方式",lang_background_position:"精确定位",repeatType:{options:["居中","横向重复","纵向重复","平铺","自定义"]}},noUploadImage:"当前未上传过任何图片！",toggleSelect:"单击可切换选中状态\n原图尺寸: "},insertimage:{"static":{lang_tab_remote:"远程图片",lang_tab_local:"本地上传",lang_tab_imgManager:"在线管理",lang_tab_imgSearch:"图片搜索",lang_input_url:"地 址：",lang_input_width:"宽 度：",lang_input_height:"高 度：",lang_input_border:"边 框：",lang_input_vhspace:"边 距：",lang_input_title:"描 述：",lang_input_remoteAlign:"对 齐：",lang_imgLoading:"　图片加载中……",lock:{title:"锁定宽高比例"},imgType:{title:"图片类型",options:["新闻","壁纸","表情","头像"]},imgSearchTxt:{value:"请输入搜索关键词"},imgSearchBtn:{value:"百度一下"},imgSearchReset:{value:"清空搜索"},upload:{style:"background: url(upload.png);"},duiqi:{style:"background: url(imglabel.png) -12px 2px no-repeat;"}},netError:"网络链接错误，请检查配置后重试！",noUploadImage:"当前未上传过任何图片！",imageLoading:"图片加载中，请稍后……",tryAgain:" :( ，抱歉，没有找到图片！请重试一次！",toggleSelect:"单击可切换选中状态\n原图尺寸: ",searchInitInfo:"请输入搜索关键词",numError:"请输入正确的长度或者宽度值！例如：123，400",fileType:"图片",imageUrlError:"不允许的图片格式或者图片域！",imageLoadError:"图片加载失败！请检查链接地址或网络状态！",flashError:"Flash插件初始化失败，请更新您的FlashPlayer版本之后重试！",floatDefault:"默认",floatLeft:"左浮动",floatRight:"右浮动",floatCenter:"居中",flashI18n:{}},webapp:{tip1:"本功能由百度APP提供，如看到此页面，请各位站长首先申请百度APPKey!",tip2:"申请完成之后请至editor_config.js中配置获得的appkey! ",applyFor:"点此申请",anthorApi:"百度API"},template:{"static":{lang_template_bkcolor:"背景颜色",lang_template_clear:"保留原有内容",lang_template_select:"选择模板"},blank:"空白文档",blog:"博客文章",resume:"个人简历",richText:"图文混排",sciPapers:"科技论文"},scrawl:{"static":{lang_input_previousStep:"上一步",lang_input_nextsStep:"下一步",lang_input_clear:"清空",lang_input_addPic:"添加背景",lang_input_ScalePic:"缩放背景",lang_input_removePic:"删除背景",J_imgTxt:{title:"添加背景图片"}},noScarwl:"尚未作画，白纸一张~",scrawlUpLoading:"涂鸦上传中,别急哦~",continueBtn:"继续",imageError:"糟糕，图片读取失败了！",backgroundUploading:"背景图片上传中,别急哦~"},anchor:{"static":{lang_input_anchorName:"锚点名字："}},attachment:{"static":{lang_input_fileStatus:" 当前未上传文件",startUpload:{style:"background:url(upload.png) no-repeat;"}},browseFiles:"文件浏览…",uploadSuccess:"上传成功!",delSuccessFile:"从成功队列中移除",delFailSaveFile:"移除保存失败文件",statusPrompt:" 个文件已上传！ ",flashVersionError:"当前Flash版本过低，请更新FlashPlayer后重试！",flashLoadingError:"Flash加载失败!请检查路径或网络状态",fileUploadReady:"等待上传……",delUploadQueue:"从上传队列中移除",limitPrompt1:"单次不能选择超过",limitPrompt2:"个文件！请重新选择！",delFailFile:"移除失败文件",fileSizeLimit:"文件大小超出限制！",emptyFile:"空文件无法上传！",fileTypeError:"文件类型错误！",unknownError:"未知错误！",fileUploading:"上传中，请等待……",cancelUpload:"取消上传",netError:"网络错误",failUpload:"上传失败!",serverIOError:"服务器IO错误！",noAuthority:"无权限！",fileNumLimit:"上传个数限制",failCheck:"验证失败，本次上传被跳过！",fileCanceling:"取消中，请等待……",stopUploading:"上传已停止……"},highlightcode:{"static":{lang_input_selectLang:"选择语言"},importCode:"请输入代码"},emotion:{"static":{lang_input_choice:"精选",lang_input_Tuzki:"兔斯基",lang_input_BOBO:"BOBO",lang_input_lvdouwa:"绿豆蛙",lang_input_babyCat:"baby猫",lang_input_bubble:"泡泡",lang_input_youa:"有啊"}},gmap:{"static":{lang_input_address:"地址",lang_input_search:"搜索",address:{value:"北京"}},searchError:"无法定位到该地址!"},help:{"static":{lang_input_about:"关于UEditor",lang_input_shortcuts:"快捷键",lang_input_version:"版本:1.2.3",lang_input_introduction:"UEditor是由百度web前端研发部开发的所见即所得富文本web编辑器，具有轻量，可定制，注重用户体验等特点。开源基于BSD协议，允许自由使用和修改代码。",lang_Txt_shortcuts:"快捷键",lang_Txt_func:"功能",lang_Txt_bold:"给选中字设置为加粗",lang_Txt_copy:"复制选中内容",lang_Txt_cut:"剪切选中内容",lang_Txt_Paste:"粘贴",lang_Txt_undo:"重新执行上次操作",lang_Txt_redo:"撤销上一次操作",lang_Txt_italic:"给选中字设置为斜体",lang_Txt_underline:"给选中字加下划线",lang_Txt_selectAll:"全部选中",lang_Txt_removeFormat:"清除页面文字格式",lang_Txt_leftJustification:"页面文字居左显示",lang_Txt_rightJustification:"页面文字居右显示",lang_Txt_visualEnter:"软回车"}},insertframe:{"static":{lang_input_address:"地址：",lang_input_width:"宽度：",lang_input_height:"高度：",lang_input_isScroll:"允许滚动条：",lang_input_frameborder:"显示框架边框：",lang_input_alignMode:"对齐方式：",align:{title:"对齐方式",options:["默认","左对齐","右对齐","居中"]}},enterAddress:"请输入地址!"},link:{"static":{lang_input_text:"文本内容：",lang_input_url:"链接地址：",lang_input_title:"标题：",lang_input_target:"是否在新窗口打开："},validLink:"只支持选中一个链接时生效",httpPrompt:"您输入的超链接中不包含http等协议名称，默认将为您添加http://前缀"},map:{"static":{lang_city:"城市",lang_address:"地址",city:{value:"北京"},lang_search:"搜索"},cityMsg:"请选择城市",errorMsg:"抱歉，找不到该位置！"},searchreplace:{"static":{lang_tab_search:"查找",lang_tab_replace:"替换",lang_search1:"查找",lang_search2:"查找",lang_replace:"替换",lang_case_sensitive1:"区分大小写",lang_case_sensitive2:"区分大小写",nextFindBtn:{value:"下一个"},preFindBtn:{value:"上一个"},nextReplaceBtn:{value:"下一个"},preReplaceBtn:{value:"上一个"},repalceBtn:{value:"替换"},repalceAllBtn:{value:"全部替换"}},getEnd:"已经搜索到文章末尾！",getStart:"已经搜索到文章头部",countMsg:"总共替换了{#count}处！"},snapscreen:{"static":{lang_showMsg:"截图功能需要首先安装UEditor截图插件！ ",lang_download:"点此下载",lang_step1:"第一步，下载UEditor截图插件并运行安装。",lang_step2:"第二不，插件安装完成后即可使用，如不生效，请重启浏览器后再试！"}},insertvideo:{"static":{lang_tab_insertV:"插入视频",lang_tab_searchV:"搜索视频",lang_video_url:"视频网址",lang_video_size:"视频尺寸",lang_videoW:"宽度",lang_videoH:"高度",lang_alignment:"对齐方式",videoSearchTxt:{value:"请输入搜索关键字！"},videoType:{options:["全部","热门","娱乐","搞笑","体育","科技","综艺"]},videoSearchBtn:{value:"百度一下"},videoSearchReset:{value:"清空结果"}},numError:"请输入正确的数值，如123,400",floatLeft:"左浮动",floatRight:"右浮动","default":"默认",block:"独占一行",urlError:"输入的视频地址有误，请检查后再试！",loading:" &nbsp;视频加载中，请等待……",clickToSelect:"点击选中",goToSource:"访问源视频",noVideo:" &nbsp; &nbsp;抱歉，找不到对应的视频，请重试！"},spechars:{"static":{},tsfh:"特殊字符",lmsz:"罗马字符",szfh:"数学字符",rwfh:"日文字符",xlzm:"希腊字母",ewzm:"俄文字符",pyzm:"拼音字母",zyzf:"注音及其他"},inserttable:{"static":{lang_baseInfo:"基础信息",lang_rows:"行数",lang_rowUnit:"行",lang_width:"宽度",lang_widthUnit:"px",lang_height:"高度",lang_heightUnit:"px",lang_cols:"列数",lang_colUnit:"列",lang_warmPrompt:"温馨提示",lang_maxPadding:"边距最大不能超过13px! ",lang_extendInfo:"扩展信息",lang_preview:"可预览",lang_tableBorder:"表格边框",lang_borderSize:"大小",lang_borderColor:"颜色",lang_mar_pad:"边距间距",lang_margin:"边距",lang_padding:"间距",lang_table_background:"表格的背景颜色",lang_table_alignment:"表格的对齐方式",lang_borderFor:"边框设置作用于",align:{options:["默认","居中","居左","居右"]},borderType:{options:["仅表格","所有单元格"]},lang_forPreview:"这是用来预览的"},errorNum:"请输入正确的数值，如124,358",errorColor:"请输入正确的颜色值，如#34abdd，red",clearColor:"清除颜色",overflowMsg:"最大值不能超过{#value}px!",overflowPreviewMsg:"超过{#value} px时将不再提供实时预览。"},edittd:{"static":{lang_background:"背景颜色",lang_alignment:"对齐方式",lang_horizontal:"水平",lang_vertical:"垂直",vAlign:{options:["默认","居中对齐","顶端对齐","底部对齐"]},align:{options:["默认","居中对齐","左对齐","右对齐"]}},clearColor:"清除颜色"},wordimage:{"static":{lang_resave:"转存步骤",uploadBtn:{src:"upload.png",alt:"上传"},clipboard:{style:"background: url(copy.png) -153px -1px no-repeat;"},lang_step:"1、点击顶部复制按钮，将地址复制到剪贴板；2、点击添加照片按钮，在弹出的对话框中使用Ctrl+V粘贴地址；3、点击打开后选择图片上传流程。"},fileType:"图片",flashError:"FLASH初始化失败，请检查FLASH插件是否正确安装！",netError:"网络连接错误，请重试！",copySuccess:"图片地址已经复制！",flashI18n:{}}};(function(a,b){comtop.UI.Editor=comtop.UI.Base.extend({options:{uitype:"Editor",width:0,min_frame_height:320,readonly:false,initial_content:"",readonly:false,word_count:true,maximum_words:10000,textmode:false,focus:true},ueditor:null,_init:function(c){var d=this.options;var e={initialContent:window[d.initial_content]?window[d.initial_content]:d.initial_content,wordCount:d.word_count,maximumWords:d.maximum_words,minFrameHeight:d.min_frame_height};a.extend(this.options,e);if(this.options.width){this.options.el.width(this.options.width)}},getLabelValue:function(){return this.options.initialContent},_create:function(){this.ueditor=new UE.ui.Editor(this.options);this.ueditor.render(this.options.el.get(0));if(this.options.word_count){this.ueditor.ready(function(){this.ui._wordCount()})}var c=this;this.ueditor.addListener("blur",function(){c._triggerHandler("change")})},set:function(d,f){var e=this.options,g=typeof(f)==="string"?f.replace("px",""):f;if(d==="width"){e.el.width(g)}else{if(d==="height"){var c=this;this.ueditor.ready(function(){c.ueditor.setHeight(g,true)})}}return this},getHtml:function(){return this.ueditor.getContent()},setHtml:function(d,e){var c=this;this.ueditor.ready(function(){c.ueditor.setContent(d);e||c._triggerHandler("change")});return this},setValue:function(c,d){if(!c){return}this.setHtml(c,d)},getValue:function(){return this.getHtml()},getText:function(){return this.ueditor.getPlainTxt()},disable:function(){this.ueditor.setDisabled();return this},enable:function(){this.ueditor.setEnabled();return this},show:function(){this.ueditor.setShow();return this},hide:function(){this.ueditor.setHide();return this},destroy:function(){this.ueditor.destroy()},onInValid:function(e,d){var c=this.options;a(".edui-editor",c.el).addClass("edui-editor-invalid");c.el.attr("tip",d)},onValid:function(d){var c=this.options;a(".edui-editor",c.el).removeClass("edui-editor-invalid");c.el.attr("tip","")}})})(window.comtop.cQuery,window.comtop);